{"utilities":{},"programModules":{"EXT100MI":{"program":"EXT100MI","triggers":{},"transactions":{"UpdCnfDlyDate":{"sourceUuid":"823c4298-78cf-4c67-99d3-2c7fab2f087c","name":"UpdCnfDlyDate","program":"EXT100MI","description":"Update Planning date","active":true,"multi":false,"modified":1674864849974,"modifiedBy":"CHESHA","outputFields":[],"inputFields":[{"name":"CONO","description":"Company","length":3,"mandatory":true,"type":"N"},{"name":"ORNO","description":"Order Number","length":10,"mandatory":true,"type":"A"},{"name":"PONR","description":"Order Line Number","length":5,"mandatory":true,"type":"N"},{"name":"PLDT","description":"Planning Date","length":8,"mandatory":false,"type":"N"},{"name":"PLHM","description":"Planning Time","length":4,"mandatory":false,"type":"N"},{"name":"DSDT","description":"Departure Date","length":8,"mandatory":false,"type":"N"},{"name":"DSHM","description":"Departure Time","length":4,"mandatory":false,"type":"N"},{"name":"CODT","description":"Confirmed Delivery Date","length":8,"mandatory":false,"type":"N"},{"name":"COHM","description":"Confirmed Delivery Time","length":4,"mandatory":false,"type":"N"}],"utilities":["DateUtil"]}},"batches":{}}},"sources":{"823c4298-78cf-4c67-99d3-2c7fab2f087c":{"uuid":"823c4298-78cf-4c67-99d3-2c7fab2f087c","updated":1676222892456,"updatedBy":"900049","created":1666702772984,"createdBy":"900066","apiVersion":"0.9","beVersion":"16.0.0.20221110165806","codeHash":"24A82EAF6FD578C25541BF22A7B8D4DB95FECB845AF2CD51789420E6D6683330","code":"LyoqDQogKiBSRUFETUUNCiAqIFRoaXMgaXMgdXNlZCB0byB1cGRhdGUgUGxhbm5pbmcgRGF0ZSwgQ29uZmlybWVkIERlbGl2ZXJ5IERhdGUgYW5kIERlcGFydHVyZSBEYXRlLg0KICogDQogKiBOYW1lOiBFWFQxMDBNSS5VcGRDbmZEbHlEYXRlDQogKiBEZXNjcmlwdGlvbjogVG8gdXBkYXRlICBQbGFubmluZyBEYXRlLCBDb25maXJtZWQgRGVsaXZlcnkgRGF0ZSBhbmQgRGVwYXJ0dXJlIERhdGUuDQogKiANCiAqIERhdGUJICAgICAgQ2hhbmdlZCBCeSAgICAgICAgICAgIERlc2NyaXB0aW9uDQogKiAyMDIyMTAyNQkgIEdpcmlzaCBIb3NhbWFuaSAgICAgIFRvIHVwZGF0ZSBQbGFubmluZyBEYXRlLCBDb25maXJtZWQgRGVsaXZlcnkgRGF0ZSBhbmQgRGVwYXJ0dXJlIERhdGUuDQogKiAyMDIzMDEyNwkgIENoZXRhbiBTaGFybWEgICAgICAgIEFQSSBpcyBzZW5kaW5nIGVycm9yIG1lc3NhZ2UgYmVmb3JlIGZpbmlzaGluZyB0aGUgSXNDTyBhbmQgSXNETyBjaGVjay4NCiAqDQogKi8NCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlDQppbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWUNCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyDQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZVBhcnNlRXhjZXB0aW9uDQoNCnB1YmxpYyBjbGFzcyBVcGRDbmZEbHlEYXRlIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7DQogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkNCglwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlDQoJcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyDQoJcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0NCglwcml2YXRlIGZpbmFsIFV0aWxpdHlBUEkgdXRpbGl0eQ0KCXByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXINCgkNCgkvL0lucHV0IGZpZWxkcw0KCXByaXZhdGUgaW50IGlDT05PLCBpUE9OUiwgaVBMRFQsIGlQTEhNLCBpRFNEVCwgaURTSE0sIGlDT0RULCBpQ09ITQ0KICBwcml2YXRlIFN0cmluZyBpT1JOTw0KICANCiAgLy9JbmRpY2F0aW9uIG9mIHRoZSBvcmRlciB0eXBlDQoJcHJpdmF0ZSBib29sZWFuIElzQ08sIElzRE8NCiAgDQogIHB1YmxpYyBVcGRDbmZEbHlEYXRlKE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgTG9nZ2VyQVBJIGxvZ2dlciwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBVdGlsaXR5QVBJIHV0aWxpdHksIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyKSB7DQogICAgdGhpcy5taSA9IG1pDQoJCXRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZQ0KCQl0aGlzLmxvZ2dlciA9IGxvZ2dlcg0KCQl0aGlzLnByb2dyYW0gPSBwcm9ncmFtDQoJCXRoaXMudXRpbGl0eSA9IHV0aWxpdHkNCgkJdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyDQogIH0NCiAgDQogICAvKioNCiAgICogTWFpbiBtZXRob2QNCiAgICogQHBhcmFtDQogICAqIEByZXR1cm4NCiAgICovDQogIA0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIGlDT05PID0gbWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpID09IDAgPyBwcm9ncmFtLkxEQVpELkNPTk8udG9TdHJpbmcoKSBhcyBJbnRlZ2VyIDogbWkuaW5EYXRhLmdldCgiQ09OTyIpIGFzIEludGVnZXINCiAgICBpUE9OUiA9IG1pLmluRGF0YS5nZXQoIlBPTlIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBPTlIiKS50cmltKCkgaW4gWyIiLCAiPyJdID8gMCA6IG1pLmluRGF0YS5nZXQoIlBPTlIiKS50cmltKCkudG9JbnRlZ2VyKCkNCiAgICBpUExEVCA9IG1pLmluRGF0YS5nZXQoIlBMRFQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBMRFQiKS50cmltKCkgaW4gWyIiLCAiPyJdID8gMCA6IG1pLmluRGF0YS5nZXQoIlBMRFQiKS50cmltKCkudG9JbnRlZ2VyKCkNCiAgICBpUExITSA9IG1pLmluRGF0YS5nZXQoIlBMSE0iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBMSE0iKS50cmltKCkgaW4gWyIiLCAiPyJdID8gMCA6IG1pLmluRGF0YS5nZXQoIlBMSE0iKS50cmltKCkudG9JbnRlZ2VyKCkNCiAgICBpRFNEVCA9IG1pLmluRGF0YS5nZXQoIkRTRFQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRTRFQiKS50cmltKCkgaW4gWyIiLCAiPyJdID8gMCA6IG1pLmluRGF0YS5nZXQoIkRTRFQiKS50cmltKCkudG9JbnRlZ2VyKCkNCiAgICBpRFNITSA9IG1pLmluRGF0YS5nZXQoIkRTSE0iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRTSE0iKS50cmltKCkgaW4gWyIiLCAiPyJdID8gMCA6IG1pLmluRGF0YS5nZXQoIkRTSE0iKS50cmltKCkudG9JbnRlZ2VyKCkNCiAgICBpQ09EVCA9IG1pLmluRGF0YS5nZXQoIkNPRFQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNPRFQiKS50cmltKCkgaW4gWyIiLCAiPyJdID8gMCA6IG1pLmluRGF0YS5nZXQoIkNPRFQiKS50cmltKCkudG9JbnRlZ2VyKCkNCiAgICBpQ09ITSA9IG1pLmluRGF0YS5nZXQoIkNPSE0iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNPSE0iKS50cmltKCkgaW4gWyIiLCAiPyJdID8gMCA6IG1pLmluRGF0YS5nZXQoIkNPSE0iKS50cmltKCkudG9JbnRlZ2VyKCkNCiAgICBpT1JOTyA9IG1pLmluRGF0YS5nZXQoIk9STk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIk9STk8iKS50cmltKCkgPT0gIj8iID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJPUk5PIikudHJpbSgpDQogICAgDQogICAgaWYgKGlEU0RUID09IDApIHsNCiAgICAgIGlEU0RUID0gaVBMRFQNCiAgICB9DQogICAgDQogICAgIGlmIChpRFNITSA9PSAwKSB7DQogICAgICBpRFNITSA9IGlQTEhNDQogICAgfQ0KDQogICAgaWYgKGlQTERUICE9IDAgJiYgIXV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCJpc0RhdGVWYWxpZCIsIGlQTERULnRvU3RyaW5nKCkudHJpbSgpLCAieXl5eU1NZGQiKSkgew0KICAgICAgbWkuZXJyb3IoImluY29ycmVjdCBkYXRlIGZvcm1hdCAiK2lQTERUKSANCgkJCXJldHVybg0KICAgIH0NCiAgICANCiAgICBpZiAoaURTRFQgIT0gMCAmJiAhdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsImlzRGF0ZVZhbGlkIiwgaURTRFQudG9TdHJpbmcoKS50cmltKCksICJ5eXl5TU1kZCIpKSB7DQogICAgICBtaS5lcnJvcigiaW5jb3JyZWN0IGRhdGUgZm9ybWF0ICIraURTRFQpDQoJCQlyZXR1cm4NCiAgICB9DQogICAgDQogICAgaWYgKGlDT0RUICE9IDAgJiYgIXV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCJpc0RhdGVWYWxpZCIsIGlDT0RULnRvU3RyaW5nKCkudHJpbSgpLCAieXl5eU1NZGQiKSkgew0KICAgICAgbWkuZXJyb3IoImluY29ycmVjdCBkYXRlIGZvcm1hdCAiK2lDT0RUKQ0KCQkJcmV0dXJuDQogICAgfQ0KICAgIA0KICAgIC8vVmFsaWRhdGVzIHRoZSBpbnB1dCBwYXJhbWV0ZXJzDQoJCXZhbGlkYXRlT0lTMTAwT1JOTygpDQoJCQ0KCQlpZiAoIUlzQ08pIHsNCgkJICB2YWxpZGF0ZU1NUzEwME9STk8oKQ0KCQl9DQoJCQ0KCQlpZighSXNDTyAmJiAhSXNETykgew0KCQkgIG1pLmVycm9yKCJPcmRlciBsaW5lIGRvZXMgbm90IGV4aXN0LiBPUk5POiAiICsgaU9STk8gKyAiLCBQT05SOiAiICsgaVBPTlIpDQoJCSAgcmV0dXJuDQoJCX0NCgkJDQoJCWxvZ2dlci5kZWJ1ZygiZGVidWcgSXNETzoiK0lzRE8pDQoJCWxvZ2dlci5kZWJ1ZygiZGVidWcgSXNDTzoiK0lzQ08pDQoJCQ0KCQlpZiAoSXNDTykgew0KCQkgIHVwZGF0ZU9PTElORVBMRFQoKQ0KCQl9DQoJCQ0KCQlpZiAoaVBMRFQgIT0gMCkgew0KCQkgIHVwZGF0ZU1JVFBMT1BMRFQoKQ0KCQkgIGFkZE1NTTkyMCgpDQoJCX0NCiAgfQ0KICANCiAvKioNCiAgKiBWYWxpZGF0aW5nIHRoZSBNSSBpbnB1dCB2YWx1ZXMgYW5kIGlkZW50aWZpbmcgdGhlIG9yZGVyIHR5cGUsIElzQ08gb3Igbm90Pw0KICAqIA0KICAqIEBwYXJhbSBjb25vIC0gQ29tcGFueSBudW1iZXINCiAgKiBAcGFyYW0gb3JubyAtIE9yZGVyIG51bWJlcg0KICAqIEBwYXJhbSBwb25yIC0gTGluZSBudW1iZXINCiAgKiANCiAgKiByZXR1cm4gYm9vbGVhbg0KICAqLw0KCXByaXZhdGUgdmFsaWRhdGVPSVMxMDBPUk5PKCl7DQoJICBEQkFjdGlvbiBhY3Rpb25vb2xpbmUgPSBkYXRhYmFzZS50YWJsZSgiT09MSU5FIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCkuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIG9vbGluZSA9IGFjdGlvbm9vbGluZS5nZXRDb250YWluZXIoKQ0KDQogICAgb29saW5lLnNldCgiT0JDT05PIiwgaUNPTk8pDQogICAgb29saW5lLnNldCgiT0JPUk5PIiwgaU9STk8pDQogICAgb29saW5lLnNldCgiT0JQT05SIiwgaVBPTlIpDQogICAgDQogICAgLy8gRmV0Y2ggdGhlIGluZm9ybWF0aW9uIGZvcm0gdGhlIHRhYmxlIGFuZCBvdXRwdXQgaXQNCiAgICBpZiAoYWN0aW9ub29saW5lLnJlYWQob29saW5lKSkgew0KICAgICAgSXNDTyA9IHRydWUgLy8gVGhpcyBtZWFucyBjdXN0b21lciBvcmRlcg0KICAgIH0gZWxzZSB7DQogICAgICBJc0NPID0gZmFsc2UgLy8gQ3VzdG9tZXIgb3JkZXIgbGluZSBkb2VzIG5vdCBleGlzdA0KICAgIH0NCgl9DQoJDQoJLyoqDQogICogVmFsaWRhdGluZyB0aGUgTUkgaW5wdXQgdmFsdWVzIGFuZCBpZGVudGlmaW5nIHRoZSBvcmRlciB0eXBlLCBJc0RPIG9yIG5vdD8NCiAgKi8NCglwcml2YXRlIHZhbGlkYXRlTU1TMTAwT1JOTygpew0KCSAgREJBY3Rpb24gYWN0aW9ubWdsaW5lID0gZGF0YWJhc2UudGFibGUoIk1HTElORSIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBtZ2xpbmUgPSBhY3Rpb25tZ2xpbmUuZ2V0Q29udGFpbmVyKCkNCiAgICANCiAgICBtZ2xpbmUuc2V0KCJNUkNPTk8iLCBpQ09OTykNCiAgICBtZ2xpbmUuc2V0KCJNUk9STk8iLCBpT1JOTykNCiAgICBtZ2xpbmUuc2V0KCJNUlBPTlIiLCBpUE9OUikNCiAgICANCiAgICAvLyBGZXRjaCB0aGUgaW5mb3JtYXRpb24gZm9ybSB0aGUgdGFibGUgYW5kIG91dHB1dCBpdA0KICAgIGlmIChhY3Rpb25tZ2xpbmUucmVhZChtZ2xpbmUpKSB7DQogICAgICBJc0RPID0gdHJ1ZSAvLyBUaGlzIGlzIERpc3RyaWJ1dGlvbiBPcmRlcg0KICAgIH0gZWxzZSB7DQogICAgICAgSXNETyA9IGZhbHNlIC8vIERpc3RyaWJ1dGlvbiBvcmRlciBsaW5lIGRvZXMgbm90IGV4aXN0DQogICAgfQ0KCX0NCgkNCgkvKioNCiAgKiBUbyB1cGRhdGUgdGhlIERhdGVzIGF0IE9yZGVyIExpbmVzKE9JUzMwMFxPT0xJTkUpIA0KICAqIA0KICAqIEBwYXJhbSBjb25vIC0gQ29tcGFueSBudW1iZXINCiAgKiBAcGFyYW0gb3JubyAtIE9yZGVyIG51bWJlcg0KICAqIEBwYXJhbSBwb25yIC0gTGluZSBudW1iZXINCiAgKiBAcGFyYW0gY29kdCAtIFBsYW5uaW5nIGRhdGUNCiAgKiBAcGFyYW0gY29obSAtIFBsYW5uaW5nIHRpbWUNCiAgKiBAcGFyYW0gZHNkdCAtIERlcGFydHVyZSBkYXRlDQogICogQHBhcmFtIGRzaG0gLSBEZXBhcnR1cmUgdGltZQ0KICAqIEBwYXJhbSBjb2R0IC0gQ29uZmlybWVkIERlbGl2ZXJ5IGRhdGUNCiAgKiBAcGFyYW0gY29obSAtIENvbmZpcm1lZCBEZWxpdmVyeSB0aW1lDQogICogDQogICogcmV0dXJuIGJvb2xlYW4NCiAqLw0KCXByaXZhdGUgdm9pZCB1cGRhdGVPT0xJTkVQTERUKCl7DQoJCURCQWN0aW9uIGRiQWN0aW9uID0gZGF0YWJhc2UudGFibGUoIk9PTElORSIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigpLmJ1aWxkKCkNCgkJREJDb250YWluZXIgT09MSU5FID0gZGJBY3Rpb24uZ2V0Q29udGFpbmVyKCkNCg0KCQlPT0xJTkUuc2V0KCJPQkNPTk8iLCBpQ09OTykNCgkJT09MSU5FLnNldCgiT0JPUk5PIiwgaU9STk8pDQoJCU9PTElORS5zZXQoIk9CUE9OUiIsIGlQT05SKQ0KCQkvLyBVcGRhdGUgY2hhbmdlZCBpbmZvcm1hdGlvbg0KCQlpZiAoIWRiQWN0aW9uLnJlYWRMb2NrKE9PTElORSwgY2FsbGJhY2t1cGRhdGVPT0xJTkVQTERUKSkgew0KCQkgIG1pLmVycm9yKCJDdXN0b21lciBvcmRlciBsaW5lIGRvZXMgbm90IGV4aXN0IikNCgkJCXJldHVybg0KCQl9DQoJfQ0KCS8qKiANCgkqQ2xvc3VyZSBmb3IgT09MSU5FIFVwZGF0ZQ0KCSovIA0KCQlDbG9zdXJlPD8+IGNhbGxiYWNrdXBkYXRlT09MSU5FUExEVCA9IHsgTG9ja2VkUmVzdWx0IGxvY2tlZFJlc3VsdCAtPg0KDQogICAgaWYoaVBMRFQgIT0gMCkgew0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0JQTERUIiwgaVBMRFQpDQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPQkRTRFQiLCBpUExEVCkNCiAgICB9DQogICAgaWYoaVBMSE0gIT0gMCkgew0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0JQTEhNIiwgaVBMSE0pDQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPQkRTSE0iLCBpUExITSkNCiAgICB9DQogICAgDQogICAgaWYoaUNPRFQgIT0gMCkgew0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0JDT0RUIiwgaUNPRFQpDQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPQkNPRFoiLCBpQ09EVCkNCiAgICB9DQogICAgaWYoaUNPSE0gIT0gMCkgew0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiT0JDT0hNIiwgaUNPSE0pDQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPQkNPSFoiLCBpQ09ITSkNCiAgICB9DQogICAgDQogICAgaWYoaURTRFQgIT0gMCkge2xvY2tlZFJlc3VsdC5zZXQoIk9CRFNEVCIsIGlEU0RUKSB9DQogICAgaWYoaURTSE0gIT0gMCkge2xvY2tlZFJlc3VsdC5zZXQoIk9CRFNITSIsIGlEU0hNKSB9DQoJCS8vIFVwZGF0ZSBjaGFuZ2VkIGluZm9ybWF0aW9uDQoJCWxvY2tlZFJlc3VsdC5zZXQoIk9CTE1EVCIsIExvY2FsRGF0ZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSkNCgkJbG9ja2VkUmVzdWx0LnNldCgiT0JDSE5PIiwgKGxvY2tlZFJlc3VsdC5nZXRJbnQoIk9CQ0hOTyIpICsgMSkpDQoJCWxvY2tlZFJlc3VsdC5zZXQoIk9CQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKQ0KCQkNCgkJaWYoIWxvY2tlZFJlc3VsdC51cGRhdGUoKSl7DQoJCSAgbWkuZXJyb3IoIkZhaWxlZCB0byB1cGRhdGUgT09MSU5FIikNCgkJICByZXR1cm4NCgkJfQ0KCX0NCgkNCgkvKioNCiAgKiBUbyB1cGRhdGUgb3IgYWRkIHJlY29yZCB0byBNYXRlcmlhbCBwbGFuIChNSVRQTE8pDQogICogDQogICogQHBhcmFtIGNvbm8gLSBDb21wYW55IG51bWJlcg0KICAqIEBwYXJhbSBvcm5vIC0gT3JkZXIgbnVtYmVyDQogICogQHBhcmFtIHBvbnIgLSBMaW5lIG51bWJlcg0KICAqIA0KICAqIHJldHVybiBib29sZWFuDQogKi8NCglwcml2YXRlIHZvaWQgdXBkYXRlTUlUUExPUExEVCgpew0KCQlEQkFjdGlvbiBkYkFjdGlvbiA9IGRhdGFiYXNlLnRhYmxlKCJNSVRQTE8iKS5pbmRleCgiMTAiKS5zZWxlY3RBbGxGaWVsZHMoKS5idWlsZCgpDQoJCURCQ29udGFpbmVyIE1JVFBMTyA9IGRiQWN0aW9uLmdldENvbnRhaW5lcigpDQoJCQ0KCQlNSVRQTE8uc2V0KCJNT0NPTk8iLCBpQ09OTykNCgkJaWYgKElzQ08pIHsNCgkJICBNSVRQTE8uc2V0KCJNT09SQ0EiLCAiMzExIikNCgkJfQ0KCQlpZiAoSXNETykgew0KCQkgIE1JVFBMTy5zZXQoIk1PT1JDQSIsICI1MTEiKQ0KCQl9DQoJCU1JVFBMTy5zZXQoIk1PUklETiIsIGlPUk5PKQ0KCQlNSVRQTE8uc2V0KCJNT1JJREwiLCBpUE9OUikNCgkJLy8gVXBkYXRlIGNoYW5nZWQgaW5mb3JtYXRpb24NCgkJaWYgKCFkYkFjdGlvbi5yZWFkQWxsTG9jayhNSVRQTE8sIDQsIGNhbGxiYWNrdXBkYXRlTUlUUExPUExEVCkpIHsNCgkJCW1pLmVycm9yKCJPcmRlciBsaW5lIGRvZXMgbm90IGV4aXN0IikNCgkJCXJldHVybg0KCQl9DQoJfQ0KCS8qKiANCgkqQ2xvc3VyZSBmb3IgTUlUUExPIFVwZGF0ZQ0KCSovDQoJCUNsb3N1cmU8Pz4gY2FsbGJhY2t1cGRhdGVNSVRQTE9QTERUID0geyBMb2NrZWRSZXN1bHQgbG9ja2VkUmVzdWx0IC0+DQogICAgICBqYXZhLnV0aWwuU2V0PFN0cmluZz4gY29sdW1ucyA9IGxvY2tlZFJlc3VsdC5nZXRBbGxDb2x1bW5zKCkNCiAgICAgIGphdmEudXRpbC5JdGVyYXRvciBpdGVyYXRvciA9IGNvbHVtbnMuaXRlcmF0b3IoKQ0KICAgICAgDQogICAgICBEQkFjdGlvbiBkYkFjdGlvbk1JVFBMTyA9IGRhdGFiYXNlLnRhYmxlKCJNSVRQTE8iKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oKS5idWlsZCgpDQogICAgICBEQkNvbnRhaW5lciBkYkNvbnRhaW5lck1JVFBMTyA9IGRiQWN0aW9uTUlUUExPLmdldENvbnRhaW5lcigpDQogICAgICANCiAgICAgIHdoaWxlKGl0ZXJhdG9yLmhhc05leHQoKSl7DQogICAgICAgIFN0cmluZyBjb2x1bW4gPSBpdGVyYXRvci5uZXh0KCkudG9TdHJpbmcoKQ0KICAgICAgICBkYkNvbnRhaW5lck1JVFBMTy5zZXQoY29sdW1uLCBsb2NrZWRSZXN1bHQuZ2V0KGNvbHVtbikpDQogICAgICB9DQogICAgICANCiAgICAgIGlmKGlQTERUICE9IDApIHtkYkNvbnRhaW5lck1JVFBMTy5zZXQoIk1PUExEVCIsIGlQTERUKSB9DQogICAgICANCiAgICAgIGlmICghbG9ja2VkUmVzdWx0LmRlbGV0ZSgpKSB7DQogICAgICAgIGxvZ2dlci5kZWJ1ZygiRmFpbGVkIHRvIGRlbGV0ZSBNSVRQTE8gcmVjb3JkIikNCiAgICAgIH0NCiAgICAgIA0KICAgICAgaWYgKCFkYkFjdGlvbk1JVFBMTy5pbnNlcnQoZGJDb250YWluZXJNSVRQTE8pKSB7DQogICAgICAgIGxvZ2dlci5kZWJ1ZygiRmFpbGVkIHRvIGluc2VydCBNSVRQTE8gcmVjb3JkIikNCiAgICAgIH0NCgl9CQ0KCQ0KCS8qKg0KICAqIEluc2VydHMgcmVjb3JkIGluIHRoZSBNTU05MjAgdGFibGUNCiAgKiANCiAgKiBAcGFyYW0gY29ubyAtIENvbXBhbnkgbnVtYmVyDQogICogQHBhcmFtIG9ybm8gLSBPcmRlciBudW1iZXINCiAgKiBAcGFyYW0gcG9uciAtIExpbmUgbnVtYmVyDQogICogDQogICogcmV0dXJuIGJvb2xlYW4NCiAqLw0KCXByaXZhdGUgdm9pZCBhZGRNTU05MjAoKXsNCgkJREJBY3Rpb24gZGJBY3Rpb24gPSBkYXRhYmFzZS50YWJsZSgiTU1NOTIwIikuaW5kZXgoIjIwIikuc2VsZWN0aW9uKCJNQUNPTk8iLCJNQVJJRE4iKS5idWlsZCgpDQoJCURCQ29udGFpbmVyIE1NTTkyMCA9IGRiQWN0aW9uLmdldENvbnRhaW5lcigpDQoNCgkJTU1NOTIwLnNldCgiTUFDT05PIiwgaUNPTk8pDQoJCU1NTTkyMC5zZXQoIk1BUklETiIsIGlPUk5PKQ0KCQlNTU05MjAuc2V0KCJNQVBHTk0iLCAiT09MSU5FUEkiKQ0KCQkNCgkJTU1NOTIwLnNldCgiTUFSR0RUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQ0KCQlNTU05MjAuc2V0KCJNQVJHVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkNCgkJTU1NOTIwLnNldCgiTUFDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpDQoJCQ0KCQlpZiAoIWRiQWN0aW9uLmluc2VydChNTU05MjApKSB7DQoJCSAgbG9nZ2VyLmRlYnVnKCJGYWlsZWQgdG8gaW5zZXJ0IE1NTTkyMCByZWNvcmQiKQ0KCQl9DQoJfQ0KCQ0KfQ=="}}}