{"utilities":{},"programModules":{"EXT100MI":{"program":"EXT100MI","triggers":{},"transactions":{"UpdCnfDlyDate":{"sourceUuid":"823c4298-78cf-4c67-99d3-2c7fab2f087c","name":"UpdCnfDlyDate","program":"EXT100MI","description":"Update Planning date","active":true,"multi":false,"modified":1674864849974,"modifiedBy":"CHESHA","outputFields":[],"inputFields":[{"name":"CONO","description":"Company","length":3,"mandatory":true,"type":"N"},{"name":"ORNO","description":"Order Number","length":10,"mandatory":true,"type":"A"},{"name":"PONR","description":"Order Line Number","length":5,"mandatory":true,"type":"N"},{"name":"PLDT","description":"Planning Date","length":8,"mandatory":false,"type":"N"},{"name":"PLHM","description":"Planning Time","length":4,"mandatory":false,"type":"N"},{"name":"DSDT","description":"Departure Date","length":8,"mandatory":false,"type":"N"},{"name":"DSHM","description":"Departure Time","length":4,"mandatory":false,"type":"N"},{"name":"CODT","description":"Confirmed Delivery Date","length":8,"mandatory":false,"type":"N"},{"name":"COHM","description":"Confirmed Delivery Time","length":4,"mandatory":false,"type":"N"}],"utilities":[]}},"batches":{}}},"sources":{"823c4298-78cf-4c67-99d3-2c7fab2f087c":{"uuid":"823c4298-78cf-4c67-99d3-2c7fab2f087c","updated":1677672584545,"updatedBy":"900049","created":1666702772984,"createdBy":"900066","apiVersion":"0.9","beVersion":"16.0.0.20221210044646.7","codeHash":"7A9345391F404984FDC15D784107EBCB81D4C6E019644C9A535ED17CCBE5523E","code":"LyoqDQogKiBSRUFETUUNCiAqIFRoaXMgaXMgdXNlZCB0byB1cGRhdGUgUGxhbm5pbmcgRGF0ZSwgQ29uZmlybWVkIERlbGl2ZXJ5IERhdGUgYW5kIERlcGFydHVyZSBEYXRlLg0KICogDQogKiBOYW1lOiBFWFQxMDBNSS5VcGRDbmZEbHlEYXRlDQogKiBEZXNjcmlwdGlvbjogVG8gdXBkYXRlICBQbGFubmluZyBEYXRlLCBDb25maXJtZWQgRGVsaXZlcnkgRGF0ZSBhbmQgRGVwYXJ0dXJlIERhdGUuDQogKiANCiAqIERhdGUJICAgICAgQ2hhbmdlZCBCeSAgICAgICAgICAgIERlc2NyaXB0aW9uDQogKiAyMDIyMTAyNQkgIEdpcmlzaCBIb3NhbWFuaSAgICAgIFRvIHVwZGF0ZSBQbGFubmluZyBEYXRlLCBDb25maXJtZWQgRGVsaXZlcnkgRGF0ZSBhbmQgRGVwYXJ0dXJlIERhdGUuDQogKiAyMDIzMDEyNwkgIEdpcmlzaCBIb3NhbWFuaSAgICAgIEFQSSBpcyBzZW5kaW5nIGVycm9yIG1lc3NhZ2UgYmVmb3JlIGZpbmlzaGluZyB0aGUgaXNDTyBhbmQgaXNETyBjaGVjay4NCiAqIDIwMjMwMzAxCSAgR2lyaXNoIEhvc2FtYW5pICAgICAgQnVnIGZpeCBmb3IgRE8gc2NlbmFyaW9zLiANCiAqLw0KaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGUNCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZQ0KaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXINCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lUGFyc2VFeGNlcHRpb24NCg0KcHVibGljIGNsYXNzIFVwZENuZkRseURhdGUgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsNCiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQ0KCXByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2UNCglwcml2YXRlIGZpbmFsIExvZ2dlckFQSSBsb2dnZXINCglwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQ0KCQ0KCS8vSW5wdXQgZmllbGRzDQoJcHJpdmF0ZSBpbnQgaUNPTk8sIGlQT05SLCBpUExEVCwgaVBMSE0sIGlEU0RULCBpRFNITSwgaUNPRFQsIGlDT0hNDQogIHByaXZhdGUgU3RyaW5nIGlPUk5PDQogIA0KICAvL0luZGljYXRpb24gb2YgdGhlIG9yZGVyIHR5cGUNCglwcml2YXRlIGJvb2xlYW4gaXNDTywgaXNETw0KICANCiAgcHVibGljIFVwZENuZkRseURhdGUoTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBMb2dnZXJBUEkgbG9nZ2VyLCBQcm9ncmFtQVBJIHByb2dyYW0pIHsNCiAgICB0aGlzLm1pID0gbWkNCgkJdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlDQoJCXRoaXMubG9nZ2VyID0gbG9nZ2VyDQoJCXRoaXMucHJvZ3JhbSA9IHByb2dyYW0NCiAgfQ0KICANCiAgIC8qKg0KICAgKiBNYWluIG1ldGhvZA0KICAgKiBAcGFyYW0NCiAgICogQHJldHVybg0KICAgKi8NCiAgDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7DQogICAgaUNPTk8gPSBtaS5pbkRhdGEuZ2V0KCJDT05PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDT05PIikgPT0gMCA/IHByb2dyYW0uTERBWkQuQ09OTy50b1N0cmluZygpIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcg0KICAgIGlQT05SID0gbWkuaW5EYXRhLmdldCgiUE9OUiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUE9OUiIpLnRyaW0oKSBpbiBbIiIsICI/Il0gPyAwIDogbWkuaW5EYXRhLmdldCgiUE9OUiIpLnRyaW0oKS50b0ludGVnZXIoKQ0KICAgIGlQTERUID0gbWkuaW5EYXRhLmdldCgiUExEVCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUExEVCIpLnRyaW0oKSBpbiBbIiIsICI/Il0gPyAwIDogbWkuaW5EYXRhLmdldCgiUExEVCIpLnRyaW0oKS50b0ludGVnZXIoKQ0KICAgIGlQTEhNID0gbWkuaW5EYXRhLmdldCgiUExITSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUExITSIpLnRyaW0oKSBpbiBbIiIsICI/Il0gPyAwIDogbWkuaW5EYXRhLmdldCgiUExITSIpLnRyaW0oKS50b0ludGVnZXIoKQ0KICAgIGlEU0RUID0gbWkuaW5EYXRhLmdldCgiRFNEVCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRFNEVCIpLnRyaW0oKSBpbiBbIiIsICI/Il0gPyAwIDogbWkuaW5EYXRhLmdldCgiRFNEVCIpLnRyaW0oKS50b0ludGVnZXIoKQ0KICAgIGlEU0hNID0gbWkuaW5EYXRhLmdldCgiRFNITSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRFNITSIpLnRyaW0oKSBpbiBbIiIsICI/Il0gPyAwIDogbWkuaW5EYXRhLmdldCgiRFNITSIpLnRyaW0oKS50b0ludGVnZXIoKQ0KICAgIGlDT0RUID0gbWkuaW5EYXRhLmdldCgiQ09EVCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09EVCIpLnRyaW0oKSBpbiBbIiIsICI/Il0gPyAwIDogbWkuaW5EYXRhLmdldCgiQ09EVCIpLnRyaW0oKS50b0ludGVnZXIoKQ0KICAgIGlDT0hNID0gbWkuaW5EYXRhLmdldCgiQ09ITSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09ITSIpLnRyaW0oKSBpbiBbIiIsICI/Il0gPyAwIDogbWkuaW5EYXRhLmdldCgiQ09ITSIpLnRyaW0oKS50b0ludGVnZXIoKQ0KICAgIGlPUk5PID0gbWkuaW5EYXRhLmdldCgiT1JOTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT1JOTyIpLnRyaW0oKSA9PSAiPyIgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk9STk8iKS50cmltKCkNCiAgICANCiAgICBpZiAoaURTRFQgPT0gMCkgew0KICAgICAgaURTRFQgPSBpUExEVA0KICAgIH0NCiAgICANCiAgICAgaWYgKGlEU0hNID09IDApIHsNCiAgICAgIGlEU0hNID0gaVBMSE0NCiAgICB9DQoNCiAgICBpZiAoaVBMRFQgIT0gMCAmJiAhaXNEYXRlVmFsaWQoaVBMRFQudG9TdHJpbmcoKS50cmltKCkpKSB7DQogICAgICBtaS5lcnJvcigiaW5jb3JyZWN0IGRhdGUgZm9ybWF0ICIraVBMRFQpIA0KCQkJcmV0dXJuDQogICAgfQ0KICAgIA0KICAgIGlmIChpRFNEVCAhPSAwICYmICFpc0RhdGVWYWxpZChpRFNEVC50b1N0cmluZygpLnRyaW0oKSkpIHsNCiAgICAgIG1pLmVycm9yKCJpbmNvcnJlY3QgZGF0ZSBmb3JtYXQgIitpRFNEVCkNCgkJCXJldHVybg0KICAgIH0NCiAgICANCiAgICBpZiAoaUNPRFQgIT0gMCAmJiAhaXNEYXRlVmFsaWQoaUNPRFQudG9TdHJpbmcoKS50cmltKCkpKSB7DQogICAgICBtaS5lcnJvcigiaW5jb3JyZWN0IGRhdGUgZm9ybWF0ICIraUNPRFQpDQoJCQlyZXR1cm4NCiAgICB9DQogICAgDQogICAgLy9WYWxpZGF0ZXMgdGhlIGlucHV0IHBhcmFtZXRlcnMNCgkJdmFsaWRhdGVPSVMxMDBPUk5PKCkNCgkJDQoJCWlmICghaXNDTykgew0KCQkgIHZhbGlkYXRlTU1TMTAwT1JOTygpDQoJCX0NCgkJDQoJCWlmKCFpc0NPICYmICFpc0RPKSB7DQoJCSAgbWkuZXJyb3IoIk9yZGVyIGxpbmUgZG9lcyBub3QgZXhpc3QuIE9STk86ICIgKyBpT1JOTyArICIsIFBPTlI6ICIgKyBpUE9OUikNCgkJICByZXR1cm4NCgkJfQ0KCQkNCgkJbG9nZ2VyLmRlYnVnKCJkZWJ1ZyBpc0RPOiIraXNETykNCgkJbG9nZ2VyLmRlYnVnKCJkZWJ1ZyBpc0NPOiIraXNDTykNCgkJDQoJCWlmIChpc0NPKSB7DQoJCSAgdXBkYXRlT09MSU5FUExEVCgpDQoJCX0NCgkJDQoJCWlmIChpUExEVCAhPSAwKSB7DQoJCSAgdXBkYXRlTUlUUExPUExEVCgpDQoJCSAgYWRkTU1NOTIwKCkNCgkJfQ0KICB9DQogIA0KICAvKioNCiAgKiBWYWxpZGF0aW5nIHRoZSBNSSBpbnB1dCBkYXRlIGZvcm1hdA0KICAqIA0KICAqIEBwYXJhbSBkYXRlIC0gSW5wdXQgZGF0ZQ0KICAqIA0KICAqIHJldHVybiBib29sZWFuDQogICovDQogIHB1YmxpYyBib29sZWFuIGlzRGF0ZVZhbGlkKFN0cmluZyBkYXRlKSB7DQogICAgdHJ5IHsNCiAgICAgIExvY2FsRGF0ZS5wYXJzZShkYXRlLCBEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIH0gY2F0Y2ggKERhdGVUaW1lUGFyc2VFeGNlcHRpb24gZSkgew0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfQ0KICB9DQogIA0KIC8qKg0KICAqIFZhbGlkYXRpbmcgdGhlIE1JIGlucHV0IHZhbHVlcyBhbmQgaWRlbnRpZmluZyB0aGUgb3JkZXIgdHlwZSwgaXNDTyBvciBub3Q/DQogICogDQogICogQHBhcmFtIGNvbm8gLSBDb21wYW55IG51bWJlcg0KICAqIEBwYXJhbSBvcm5vIC0gT3JkZXIgbnVtYmVyDQogICogQHBhcmFtIHBvbnIgLSBMaW5lIG51bWJlcg0KICAqIA0KICAqIHJldHVybiBib29sZWFuDQogICovDQoJcHJpdmF0ZSB2YWxpZGF0ZU9JUzEwME9STk8oKXsNCgkgIERCQWN0aW9uIGFjdGlvbm9vbGluZSA9IGRhdGFiYXNlLnRhYmxlKCJPT0xJTkUiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oKS5idWlsZCgpDQogICAgREJDb250YWluZXIgb29saW5lID0gYWN0aW9ub29saW5lLmdldENvbnRhaW5lcigpDQoNCiAgICBvb2xpbmUuc2V0KCJPQkNPTk8iLCBpQ09OTykNCiAgICBvb2xpbmUuc2V0KCJPQk9STk8iLCBpT1JOTykNCiAgICBvb2xpbmUuc2V0KCJPQlBPTlIiLCBpUE9OUikNCiAgICANCiAgICAvLyBGZXRjaCB0aGUgaW5mb3JtYXRpb24gZm9ybSB0aGUgdGFibGUgYW5kIG91dHB1dCBpdA0KICAgIGlmIChhY3Rpb25vb2xpbmUucmVhZChvb2xpbmUpKSB7DQogICAgICBpc0NPID0gdHJ1ZSAvLyBUaGlzIG1lYW5zIGN1c3RvbWVyIG9yZGVyDQogICAgfSBlbHNlIHsNCiAgICAgIGlzQ08gPSBmYWxzZSAvLyBDdXN0b21lciBvcmRlciBsaW5lIGRvZXMgbm90IGV4aXN0DQogICAgfQ0KCX0NCgkNCgkvKioNCiAgKiBWYWxpZGF0aW5nIHRoZSBNSSBpbnB1dCB2YWx1ZXMgYW5kIGlkZW50aWZpbmcgdGhlIG9yZGVyIHR5cGUsIGlzRE8gb3Igbm90Pw0KICAqLw0KCXByaXZhdGUgdmFsaWRhdGVNTVMxMDBPUk5PKCl7DQoJICBEQkFjdGlvbiBhY3Rpb25tZ2xpbmUgPSBkYXRhYmFzZS50YWJsZSgiTUdMSU5FIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCkuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIG1nbGluZSA9IGFjdGlvbm1nbGluZS5nZXRDb250YWluZXIoKQ0KICAgIA0KICAgIG1nbGluZS5zZXQoIk1SQ09OTyIsIGlDT05PKQ0KICAgIG1nbGluZS5zZXQoIk1SVFJOUiIsIGlPUk5PKQ0KICAgIG1nbGluZS5zZXQoIk1SUE9OUiIsIGlQT05SKQ0KICAgIA0KICAgIC8vIEZldGNoIHRoZSBpbmZvcm1hdGlvbiBmb3JtIHRoZSB0YWJsZSBhbmQgb3V0cHV0IGl0DQogICAgaWYgKGFjdGlvbm1nbGluZS5yZWFkKG1nbGluZSkpIHsNCiAgICAgIGlzRE8gPSB0cnVlIC8vIFRoaXMgaXMgRGlzdHJpYnV0aW9uIE9yZGVyDQogICAgfSBlbHNlIHsNCiAgICAgICBpc0RPID0gZmFsc2UgLy8gRGlzdHJpYnV0aW9uIG9yZGVyIGxpbmUgZG9lcyBub3QgZXhpc3QNCiAgICB9DQoJfQ0KCQ0KCS8qKg0KICAqIFRvIHVwZGF0ZSB0aGUgRGF0ZXMgYXQgT3JkZXIgTGluZXMoT0lTMzAwXE9PTElORSkgDQogICogDQogICogQHBhcmFtIGNvbm8gLSBDb21wYW55IG51bWJlcg0KICAqIEBwYXJhbSBvcm5vIC0gT3JkZXIgbnVtYmVyDQogICogQHBhcmFtIHBvbnIgLSBMaW5lIG51bWJlcg0KICAqIEBwYXJhbSBjb2R0IC0gUGxhbm5pbmcgZGF0ZQ0KICAqIEBwYXJhbSBjb2htIC0gUGxhbm5pbmcgdGltZQ0KICAqIEBwYXJhbSBkc2R0IC0gRGVwYXJ0dXJlIGRhdGUNCiAgKiBAcGFyYW0gZHNobSAtIERlcGFydHVyZSB0aW1lDQogICogQHBhcmFtIGNvZHQgLSBDb25maXJtZWQgRGVsaXZlcnkgZGF0ZQ0KICAqIEBwYXJhbSBjb2htIC0gQ29uZmlybWVkIERlbGl2ZXJ5IHRpbWUNCiAgKiANCiAgKiByZXR1cm4gYm9vbGVhbg0KICovDQoJcHJpdmF0ZSB2b2lkIHVwZGF0ZU9PTElORVBMRFQoKXsNCgkJREJBY3Rpb24gZGJBY3Rpb25vb2xpbmUgPSBkYXRhYmFzZS50YWJsZSgiT09MSU5FIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCkuYnVpbGQoKQ0KCQlEQkNvbnRhaW5lciBvb2xpbmUgPSBkYkFjdGlvbm9vbGluZS5nZXRDb250YWluZXIoKQ0KDQoJCW9vbGluZS5zZXQoIk9CQ09OTyIsIGlDT05PKQ0KCQlvb2xpbmUuc2V0KCJPQk9STk8iLCBpT1JOTykNCgkJb29saW5lLnNldCgiT0JQT05SIiwgaVBPTlIpDQoJCS8vIFVwZGF0ZSBjaGFuZ2VkIGluZm9ybWF0aW9uDQoJCWlmICghZGJBY3Rpb25vb2xpbmUucmVhZExvY2sob29saW5lLCBjYWxsYmFja3VwZGF0ZU9PTElORVBMRFQpKSB7DQoJCSAgbWkuZXJyb3IoIkN1c3RvbWVyIG9yZGVyIGxpbmUgZG9lcyBub3QgZXhpc3QiKQ0KCQkJcmV0dXJuDQoJCX0NCgl9DQoJLyoqIA0KCSpDbG9zdXJlIGZvciBPT0xJTkUgVXBkYXRlDQoJKi8gDQoJCUNsb3N1cmU8Pz4gY2FsbGJhY2t1cGRhdGVPT0xJTkVQTERUID0geyBMb2NrZWRSZXN1bHQgbG9ja2VkUmVzdWx0IC0+DQoNCiAgICBpZihpUExEVCAhPSAwKSB7DQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPQlBMRFQiLCBpUExEVCkNCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9CRFNEVCIsIGlQTERUKQ0KICAgIH0NCiAgICBpZihpUExITSAhPSAwKSB7DQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPQlBMSE0iLCBpUExITSkNCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9CRFNITSIsIGlQTEhNKQ0KICAgIH0NCiAgICANCiAgICBpZihpQ09EVCAhPSAwKSB7DQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPQkNPRFQiLCBpQ09EVCkNCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9CQ09EWiIsIGlDT0RUKQ0KICAgIH0NCiAgICBpZihpQ09ITSAhPSAwKSB7DQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJPQkNPSE0iLCBpQ09ITSkNCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIk9CQ09IWiIsIGlDT0hNKQ0KICAgIH0NCiAgICANCiAgICBpZihpRFNEVCAhPSAwKSB7bG9ja2VkUmVzdWx0LnNldCgiT0JEU0RUIiwgaURTRFQpIH0NCiAgICBpZihpRFNITSAhPSAwKSB7bG9ja2VkUmVzdWx0LnNldCgiT0JEU0hNIiwgaURTSE0pIH0NCgkJLy8gVXBkYXRlIGNoYW5nZWQgaW5mb3JtYXRpb24NCgkJbG9ja2VkUmVzdWx0LnNldCgiT0JMTURUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQ0KCQlsb2NrZWRSZXN1bHQuc2V0KCJPQkNITk8iLCAobG9ja2VkUmVzdWx0LmdldEludCgiT0JDSE5PIikgKyAxKSkNCgkJbG9ja2VkUmVzdWx0LnNldCgiT0JDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpDQoJCQ0KCQlpZighbG9ja2VkUmVzdWx0LnVwZGF0ZSgpKXsNCgkJICBtaS5lcnJvcigiRmFpbGVkIHRvIHVwZGF0ZSBPT0xJTkUiKQ0KCQkgIHJldHVybg0KCQl9DQoJfQ0KCQ0KCS8qKg0KICAqIFRvIHVwZGF0ZSBvciBhZGQgcmVjb3JkIHRvIE1hdGVyaWFsIHBsYW4gKE1JVFBMTykNCiAgKiANCiAgKiBAcGFyYW0gY29ubyAtIENvbXBhbnkgbnVtYmVyDQogICogQHBhcmFtIG9ybm8gLSBPcmRlciBudW1iZXINCiAgKiBAcGFyYW0gcG9uciAtIExpbmUgbnVtYmVyDQogICogDQogICogcmV0dXJuIGJvb2xlYW4NCiAqLw0KCXByaXZhdGUgdm9pZCB1cGRhdGVNSVRQTE9QTERUKCl7DQoJCURCQWN0aW9uIGRiQWN0aW9uID0gZGF0YWJhc2UudGFibGUoIk1JVFBMTyIpLmluZGV4KCIxMCIpLnNlbGVjdEFsbEZpZWxkcygpLmJ1aWxkKCkNCgkJREJDb250YWluZXIgbWl0cGxvID0gZGJBY3Rpb24uZ2V0Q29udGFpbmVyKCkNCgkJDQoJCW1pdHBsby5zZXQoIk1PQ09OTyIsIGlDT05PKQ0KCQlpZiAoaXNDTykgew0KCQkgIG1pdHBsby5zZXQoIk1PT1JDQSIsICIzMTEiKQ0KCQl9DQoJCWlmIChpc0RPKSB7DQoJCSAgbWl0cGxvLnNldCgiTU9PUkNBIiwgIjUxMSIpDQoJCX0NCgkJbWl0cGxvLnNldCgiTU9SSUROIiwgaU9STk8pDQoJCW1pdHBsby5zZXQoIk1PUklETCIsIGlQT05SKQ0KCQkvLyBVcGRhdGUgY2hhbmdlZCBpbmZvcm1hdGlvbg0KCQlpZiAoIWRiQWN0aW9uLnJlYWRBbGxMb2NrKG1pdHBsbywgNCwgY2FsbGJhY2t1cGRhdGVNSVRQTE9QTERUKSkgew0KCQkJbWkuZXJyb3IoIk9yZGVyIGxpbmUgZG9lcyBub3QgZXhpc3QiKQ0KCQkJcmV0dXJuDQoJCX0NCgl9DQoJLyoqIA0KCSpDbG9zdXJlIGZvciBNSVRQTE8gVXBkYXRlDQoJKi8NCgkJQ2xvc3VyZTw/PiBjYWxsYmFja3VwZGF0ZU1JVFBMT1BMRFQgPSB7IExvY2tlZFJlc3VsdCBsb2NrZWRSZXN1bHQgLT4NCiAgICAgIGphdmEudXRpbC5TZXQ8U3RyaW5nPiBjb2x1bW5zID0gbG9ja2VkUmVzdWx0LmdldEFsbENvbHVtbnMoKQ0KICAgICAgamF2YS51dGlsLkl0ZXJhdG9yIGl0ZXJhdG9yID0gY29sdW1ucy5pdGVyYXRvcigpDQogICAgICANCiAgICAgIERCQWN0aW9uIGRiQWN0aW9uTUlUUExPID0gZGF0YWJhc2UudGFibGUoIk1JVFBMTyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigpLmJ1aWxkKCkNCiAgICAgIERCQ29udGFpbmVyIGRiQ29udGFpbmVyTUlUUExPID0gZGJBY3Rpb25NSVRQTE8uZ2V0Q29udGFpbmVyKCkNCiAgICAgIA0KICAgICAgd2hpbGUoaXRlcmF0b3IuaGFzTmV4dCgpKXsNCiAgICAgICAgU3RyaW5nIGNvbHVtbiA9IGl0ZXJhdG9yLm5leHQoKS50b1N0cmluZygpDQogICAgICAgIGRiQ29udGFpbmVyTUlUUExPLnNldChjb2x1bW4sIGxvY2tlZFJlc3VsdC5nZXQoY29sdW1uKSkNCiAgICAgIH0NCiAgICAgIA0KICAgICAgaWYoaVBMRFQgIT0gMCkge2RiQ29udGFpbmVyTUlUUExPLnNldCgiTU9QTERUIiwgaVBMRFQpIH0NCiAgICAgIA0KICAgICAgaWYgKCFsb2NrZWRSZXN1bHQuZGVsZXRlKCkpIHsNCiAgICAgICAgbG9nZ2VyLmRlYnVnKCJGYWlsZWQgdG8gZGVsZXRlIE1JVFBMTyByZWNvcmQiKQ0KICAgICAgfQ0KICAgICAgDQogICAgICBpZiAoIWRiQWN0aW9uTUlUUExPLmluc2VydChkYkNvbnRhaW5lck1JVFBMTykpIHsNCiAgICAgICAgbG9nZ2VyLmRlYnVnKCJGYWlsZWQgdG8gaW5zZXJ0IE1JVFBMTyByZWNvcmQiKQ0KICAgICAgfQ0KCX0JDQoJDQoJLyoqDQogICogSW5zZXJ0cyByZWNvcmQgaW4gdGhlIE1NTTkyMCB0YWJsZQ0KICAqIA0KICAqIEBwYXJhbSBjb25vIC0gQ29tcGFueSBudW1iZXINCiAgKiBAcGFyYW0gb3JubyAtIE9yZGVyIG51bWJlcg0KICAqIEBwYXJhbSBwb25yIC0gTGluZSBudW1iZXINCiAgKiANCiAgKiByZXR1cm4gYm9vbGVhbg0KICovDQoJcHJpdmF0ZSB2b2lkIGFkZE1NTTkyMCgpew0KCQlEQkFjdGlvbiBkYkFjdGlvbm1tbTkyMCA9IGRhdGFiYXNlLnRhYmxlKCJNTU05MjAiKS5pbmRleCgiMjAiKS5zZWxlY3Rpb24oIk1BQ09OTyIsIk1BUklETiIpLmJ1aWxkKCkNCgkJREJDb250YWluZXIgbW1tOTIwID0gZGJBY3Rpb25tbW05MjAuZ2V0Q29udGFpbmVyKCkNCg0KCQltbW05MjAuc2V0KCJNQUNPTk8iLCBpQ09OTykNCgkJbW1tOTIwLnNldCgiTUFSSUROIiwgaU9STk8pDQoJCW1tbTkyMC5zZXQoIk1BUEdOTSIsICJPT0xJTkVQSSIpDQoJCQ0KCQltbW05MjAuc2V0KCJNQVJHRFQiLCBMb2NhbERhdGUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpDQoJCW1tbTkyMC5zZXQoIk1BUkdUTSIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKQ0KCQltbW05MjAuc2V0KCJNQUNISUQiLCBwcm9ncmFtLmdldFVzZXIoKSkNCgkJDQoJCWlmICghZGJBY3Rpb25tbW05MjAuaW5zZXJ0KG1tbTkyMCkpIHsNCgkJICBsb2dnZXIuZGVidWcoIkZhaWxlZCB0byBpbnNlcnQgTU1NOTIwIHJlY29yZCIpDQoJCX0NCgl9DQoJDQp9"}}}