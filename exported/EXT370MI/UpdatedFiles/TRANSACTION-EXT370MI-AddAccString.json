{"utilities":{},"programModules":{"EXT370MI":{"program":"EXT370MI","triggers":{},"transactions":{"AddAccString":{"sourceUuid":"b35c69b1-905f-4fdc-8d8b-ce5a5781635b","name":"AddAccString","program":"EXT370MI","description":"Add accounting String","active":true,"multi":false,"modified":1675937185800,"modifiedBy":"900071","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":true,"type":"N"},{"name":"PUNO","description":"Purchase order number","length":10,"mandatory":true,"type":"N"},{"name":"PNLI","description":"Purchase order line","length":3,"mandatory":true,"type":"N"},{"name":"ITNO","description":"Item Number","length":15,"mandatory":true,"type":"A"},{"name":"TYPE","description":"Type","length":30,"mandatory":true,"type":"A"},{"name":"ORTP","description":"Order Type","length":15,"mandatory":false,"type":"A"},{"name":"AIT1","description":"Accounting Dimension 1","length":10,"mandatory":false,"type":"A"},{"name":"AIT2","description":"Accounting Dimension 2","length":10,"mandatory":false,"type":"A"},{"name":"AIT3","description":"Accounting Dimension 3","length":10,"mandatory":false,"type":"A"},{"name":"AIT4","description":"Accounting Dimension 4 ","length":10,"mandatory":false,"type":"A"},{"name":"AIT5","description":"Accounting Dimension 5","length":10,"mandatory":false,"type":"A"},{"name":"AIT6","description":"Accounting Dimension 6","length":10,"mandatory":false,"type":"A"},{"name":"AIT7","description":"Accounting Dimension 7","length":10,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{}}},"sources":{"b35c69b1-905f-4fdc-8d8b-ce5a5781635b":{"uuid":"b35c69b1-905f-4fdc-8d8b-ce5a5781635b","updated":1675937105430,"updatedBy":"900071","created":1672835693263,"createdBy":"900071","apiVersion":"0.9","beVersion":"16.0.0.20221110165806","codeHash":"F918249B799686469FAC546F1D7A2A45292B917DEDF2400FF6950FDBD72025C4","code":"LyoqDQogKiBSRUFETUUNCiAqIFRoaXMgZXh0ZW5zaW9uIGlzIGJlaW5nIHVzZWQgdG8gQWRkIHJlY29yZHMgdG8gQ0FDQ1NUIHRhYmxlIGZvciBhZGRpbmcgYWNjb3VudGluZyBzdHJpbmcNCiAqDQogKiBOYW1lOiBFWFQzNzBNSS5BZGRBY2NTdHJpbmcNCiAqIERlc2NyaXB0aW9uOiBBZGRpbmcgYWNjb3VudGluZyBTdHJpbmcgdG8gQ0FDQ1NUIHRhYmxlDQogKiBEYXRlCSAgICAgIENoYW5nZWQgQnkgICAgICAgICAgICBEZXNjcmlwdGlvbg0KICogMjAyMzAxMDQJICBQcmFub3RpIEtoYXRhdmthciAgICAgQWRkaW5nIHJlY29yZHMgdG8gQ0FDQ1NUIHRhYmxlDQogKi8NCiANCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlDQppbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWUNCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyDQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZVBhcnNlRXhjZXB0aW9uDQogDQoNCnB1YmxpYyBjbGFzcyBBZGRBY2NTdHJpbmcgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsNCiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQ0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlDQoJcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyDQoJcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0NCg0KCQ0KCXByaXZhdGUgaW50IGlDT05PLGlQTkxJLGlQVU5PDQoJcHJpdmF0ZSBTdHJpbmcgaUlUTk8saUFJVDEsaUFJVDIsaUFJVDMsaUFJVDQsaUFJVDUsaUFJVDYsaUFJVDcsb3V0X1BVTk8saVRZUEUsaW5QVU5PLElUR1IsRElWSSxpT1JUUA0KCXByaXZhdGUgYm9vbGVhbiBpc1ZhbGlkX0FJVDEsaXNWYWxpZF9BSVQzLGlzVmFsaWRfQUlUNQ0KCQ0KICBwdWJsaWMgQWRkQWNjU3RyaW5nKE1JQVBJIG1pLERhdGFiYXNlQVBJIGRhdGFiYXNlLCBMb2dnZXJBUEkgbG9nZ2VyLCBQcm9ncmFtQVBJIHByb2dyYW0pIHsNCiAgICB0aGlzLm1pID0gbWkNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UNCgkJdGhpcy5sb2dnZXIgPSBsb2dnZXINCgkJdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQ0KICB9DQogIA0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIGxvZ2dlci5kZWJ1ZygiaW4gbWFpbiIpDQogICAgaUNPTk8gPSBtaS5pbkRhdGEuZ2V0KCJDT05PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDT05PIikgPT0gMCA/IChJbnRlZ2VyKXByb2dyYW0uTERBWkQuQ09OTyA6IG1pLmluRGF0YS5nZXQoIkNPTk8iKSBhcyBJbnRlZ2VyDQoJCWlQVU5PID0gbWkuaW5EYXRhLmdldCgiUFVOTyIpID09IG51bGwgPyAwIDogbWkuaW5EYXRhLmdldCgiUFVOTyIpIGFzIEludGVnZXINCgkJaVBOTEkgPSBtaS5pbkRhdGEuZ2V0KCJQTkxJIikgPT0gbnVsbCA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJQTkxJIikgYXMgSW50ZWdlcg0KICAgIC8vaUFJVDEgPSBtaS5pbkRhdGEuZ2V0KCJBSVQxIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUMSIpDQogICAgaUFJVDIgPSBtaS5pbkRhdGEuZ2V0KCJBSVQyIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUMiIpDQogICAgaUFJVDMgPSBtaS5pbkRhdGEuZ2V0KCJBSVQzIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUMyIpDQogICAgaUFJVDQgPSBtaS5pbkRhdGEuZ2V0KCJBSVQ0IikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUNCIpDQogICAgaUFJVDUgPSBtaS5pbkRhdGEuZ2V0KCJBSVQ1IikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUNSIpDQogICAgaUFJVDYgPSBtaS5pbkRhdGEuZ2V0KCJBSVQ2IikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUNiIpDQogICAgLy9pQUlUNyA9IG1pLmluRGF0YS5nZXQoIkFJVDciKSA9PSBudWxsID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJBSVQ3IikNCiAgICBpSVROTyA9IG1pLmluRGF0YS5nZXQoIklUTk8iKSA9PSBudWxsID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJJVE5PIikNCiAgICBpVFlQRSA9IG1pLmluRGF0YS5nZXQoIlRZUEUiKSA9PSBudWxsID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJUWVBFIikNCiAgICBESVZJICA9IHByb2dyYW0uZ2V0TERBWkQoKS5ESVZJDQogICAgaU9SVFAgPSBtaS5pbkRhdGEuZ2V0KCJPUlRQIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiT1JUUCIpDQogICAgDQogICAgaW5QVU5PID0gKFN0cmluZylpUFVOTy50b1N0cmluZygpDQogICAgaWYoaW5QVU5PLmxlbmd0aCgpPT01KXsNCiAgICAgIGxvZ2dlci5kZWJ1ZygiTGVuZ3RoIGlzIDoiK2luUFVOTy5sZW5ndGgoKSkNCiAgICAgIG91dF9QVU5PID0gJzAwJysoU3RyaW5nKWlQVU5PLnRvU3RyaW5nKCkNCiAgICB9ZWxzZXsNCiAgICAgIGxvZ2dlci5kZWJ1ZygiTGVuZ3RoIGlzIDoiK2luUFVOTy5sZW5ndGgoKSkNCiAgICAgIG91dF9QVU5PID0gKFN0cmluZylpUFVOTy50b1N0cmluZygpDQogICAgfQ0KDQogICAgDQogICAgLy8gVmFsaWRhdGlvbiBDaGVja3MNCiAgICBpZiAoIXZhbGlkSXRlbShpQ09OTywgaUlUTk8pKSB7DQogICAgICBtaS5lcnJvcigiSXRlbSBudW1iZXIgZG9lcyBub3QgZXhpc3QiKQ0KICAgICAgcmV0dXJuDQogICAgfQ0KICAgIA0KICAgIGlmKCF2YWxpZE1QT1BMUERhdGEoaVBVTk8saVBOTEkpKXsNCiAgICAgIG1pLmVycm9yKCJJbnZhbGlkIEl0ZW0gbnVtYmVyIikNCiAgICAgIHJldHVybg0KICAgIH0NCiAgICANCiAgICBpZihpVFlQRS50b1N0cmluZygpLnRyaW0oKS5lcXVhbHMoJ0luZGlyZWN0UHJvY3VyZW1lbnRPbmx5Jykpew0KICAgICAgICBsb2dnZXIuZGVidWcoIk9yZGVyIHR5cGUgaXMgOiIraU9SVFAudHJpbSgpKQ0KICAgICAgICANCiAgICAgICAgaWYoaU9SVFAudHJpbSgpPT0nUHJlcGFpZE9yZGVyJyl7DQogICAgICAgICAgaUFJVDEgPSBtaS5pbkRhdGEuZ2V0KCJBSVQxIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUMSIpDQogICAgICAgICAgaUFJVDcgPSBtaS5pbkRhdGEuZ2V0KCJBSVQ3IikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUNyIpDQogICAgICAgICAgdmFsaWRhdGVEYXRhUHJlcGFpZE9yZGVyKCkNCiAgICAgICAgICAgIGlmKGlzVmFsaWRfQUlUMSAmJiBpc1ZhbGlkX0FJVDMpew0KICAgICAgICAgICAgIGFkZFJlY29yZCgpDQogICAgICAgICAgICB9DQogICAgICAgIH1lbHNlew0KICAgICAgICAgIHZhbGlkYXRlQWNjb3VudGluZ0RpbWVuc2lvbigpDQogICAgICAgICAgbG9nZ2VyLmRlYnVnKCJpc1ZhbGlkX0FJVDE6Iitpc1ZhbGlkX0FJVDErIixpc1ZhbGlkX0FJVDM6Iitpc1ZhbGlkX0FJVDMrIixpc1ZhbGlkX0FJVDU6Iitpc1ZhbGlkX0FJVDUpDQogICAgICAgICAgLy9BZGQgb3IgdXBkYXRlIHJlY29yZCB0byBDQUNDU1QNCiAgICAgICAgICBpZihpc1ZhbGlkX0FJVDEgJiYgaXNWYWxpZF9BSVQzICYmIGlzVmFsaWRfQUlUNSl7DQogICAgICAgICAgICAgYWRkUmVjb3JkKCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgfWVsc2V7DQogICAgIG1pLmVycm9yKCJJbnZhbGlkIFR5cGUiKQ0KICAgICByZXR1cm4NCiAgIH0NCiAgDQogIH0NCiAgDQogIC8qDQogICogIFZhbGlkYXRlIGl0ZW0gbnVtYmVyDQogKi8NCiAgcHJpdmF0ZSBib29sZWFuIHZhbGlkSXRlbShpbnQgaW5DT05PLCBTdHJpbmcgaW5JVE5PKXsNCiAgICBEQkFjdGlvbiBkYkFjdGlvbiA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1NQ09OTyIsIk1NSVROTyIsIk1NSVRHUiIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBNSVRNQVMgPSBkYkFjdGlvbi5nZXRDb250YWluZXIoKQ0KICAgIA0KICAgIE1JVE1BUy5zZXQoIk1NQ09OTyIsIGluQ09OTykNCiAgICBNSVRNQVMuc2V0KCJNTUlUTk8iLCBpbklUTk8pDQogICAgaWYgKGRiQWN0aW9uLnJlYWQoTUlUTUFTKSkgew0KICAgICAgICBJVEdSID0gTUlUTUFTLmdldCgiTU1JVEdSIikgDQogICAgICAgIGxvZ2dlci5kZWJ1ZygiSVRHUiBpczoiK0lUR1IpDQogICAgICAgIHJldHVybiB0cnVlDQogICAgfQ0KICAgICAgcmV0dXJuIGZhbHNlDQogIH0NCiAgDQogIC8qDQogICpWYWxpZGF0ZSByZWNvcmQgZnJvbSBNUE9QTFAgdGFibGUgdG8gY2hlY2sgaWYgY29ycmVzcG9uZGluZyBpdGVtIGlzIGNvcnJlY3Qgb3Igbm90DQogICovDQogIHByaXZhdGUgYm9vbGVhbiB2YWxpZE1QT1BMUERhdGEoaW50IGluUFVOTyxpbnQgaW5QTkxJKXsNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHByZXNzaW9uID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIk1QT1BMUCIpDQogICAgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uZXEoIlBPSVROTyIsIGlJVE5PLnRyaW0oKSkNCiAgICBEQkFjdGlvbiBkYkFjdGlvbiA9IGRhdGFiYXNlLnRhYmxlKCJNUE9QTFAiKS5pbmRleCgiMDAiKS5tYXRjaGluZyhleHByZXNzaW9uKS5zZWxlY3Rpb24oIlBPSVROTyIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBNUE9QTFAgPSBkYkFjdGlvbi5nZXRDb250YWluZXIoKQ0KICANCiAgICBNUE9QTFAuc2V0KCJQT0NPTk8iLGlDT05PKQ0KICAgIE1QT1BMUC5zZXQoIlBPUExQTiIsaW5QVU5PKQ0KICAgIE1QT1BMUC5zZXQoIlBPUExQUyIsaW5QTkxJKQ0KICAgIE1QT1BMUC5zZXQoIlBPUExQMiIsMCkNCiAgICANCiAgICBpZiAoZGJBY3Rpb24ucmVhZChNUE9QTFApKSB7DQogICAgcmV0dXJuIHRydWUNCiAgIH1lbHNlDQogICByZXR1cm4gZmFsc2UNCn0NCg0KDQogIA0KICAvKg0KICAqVmFsaWRhdGUgYWNjb3VudGluZyBkaW1lbnN0aW9uIDEgLDMgYW5kIDUgdG8gZW5zdXJlIGNvcnJlY3QgZGF0YSBpbnNlcnRpb24gaW4gQ0FDQ1NUDQogICovDQogIHByaXZhdGUgdm9pZCB2YWxpZGF0ZUFjY291bnRpbmdEaW1lbnNpb24oKXsNCiAgICBsb2dnZXIuZGVidWcoIkluIHZhbGlkYXRlQWNjb3VudGluZ0RpbWVuc2lvbiIpDQogICAgDQogICAgLy9Gb3IgQUlUMSBhbmQgQUlUNyBBY2NvdW50aW5nIGRpbWVuc2lvbiANCiAgICBpZihpQUlUMS50b1N0cmluZygpLnRyaW0oKSE9JycgJiYgaUFJVDcudG9TdHJpbmcoKS50cmltKCkhPScnICl7DQogICAgICBFeHByZXNzaW9uRmFjdG9yeSBleHByZXNzaW9uID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkNBRVhFTCIpDQogICAgICBpZihJVEdSLnRyaW0oKSAhPSAiIikgeyBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5lcSgiQ1hPQlYxIixJVEdSLnRyaW0oKSl9DQogICAgDQogICAgICBEQkFjdGlvbiBkYkFjdGlvbiA9IGRhdGFiYXNlLnRhYmxlKCJDQUVYRUwiKS5pbmRleCgiMDAiKS5tYXRjaGluZyhleHByZXNzaW9uKS5zZWxlY3RBbGxGaWVsZHMoKS5idWlsZCgpDQogICAgICBEQkNvbnRhaW5lciBDQUVYRUwgPSBkYkFjdGlvbi5nZXRDb250YWluZXIoKQ0KICAgICAgDQogICAgICBDQUVYRUwuc2V0KCJDWENPTk8iLGlDT05PKSANCiAgICAgIENBRVhFTC5zZXQoIkNYRElWSSIsRElWSSkNCiAgICAgICAgCQ0KCQlDbG9zdXJlPD8+IHJlYWRBbGxSZWNvcmRDQUVYRUwgPSB7DQogICAgICAgIERCQ29udGFpbmVyIHJlc3VsdENvbnRhaW5lciAtPg0KICAgICAgICBTdHJpbmcgaW5PVkEyID0gcmVzdWx0Q29udGFpbmVyLmdldFN0cmluZygiQ1hPVkEyIikNCiAgICAgICAgbG9nZ2VyLmRlYnVnKCJSZXN1bHQgaXM6IityZXN1bHRDb250YWluZXIuZ2V0U3RyaW5nKCJDWE9CVjEiKSsiLCIraW5PVkEyKQ0KICAgICAgICBpZihpbk9WQTI9PSdQT0ZBQ0knKXsNCiAgICAgICAgICAgIGlBSVQxID0gcmVzdWx0Q29udGFpbmVyLmdldFN0cmluZygiQ1hBSVQxIikNCiAgICAgICAgICAgIGlBSVQ3ID0gcmVzdWx0Q29udGFpbmVyLmdldFN0cmluZygiQ1hBSVQ3IikNCiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiQUlUMSA6IitpQUlUMSsiLEFJVDc6IitpQUlUNykNCiAgICAgICAgICAgIGlzVmFsaWRfQUlUMSA9IHRydWUNCiAgICAgICAgICB9ICAgICAgICAgICANCiAgICAgICAgfQ0KICAgICAgaWYoIWRiQWN0aW9uLnJlYWRBbGwoQ0FFWEVMLDIsIHJlYWRBbGxSZWNvcmRDQUVYRUwpKSB7DQogICAgICAgICAgaXNWYWxpZF9BSVQxID0gZmFsc2UNCiAgICAgICAgICByZXR1cm4gDQogICAgICAgIH0NCiAgICAgIA0KICAgIH1lbHNlIA0KICAgIGlzVmFsaWRfQUlUMSA9IHRydWUNCiAgICANCiAgICAvL0ZvciBBSVQzIEFjY291bnRpbmcgZGltZW5zaW9uIDMNCiAgICAgaWYoaUFJVDMudG9TdHJpbmcoKS50cmltKCkhPScnKXsNCiAgICBEQkFjdGlvbiBkYkZDSEFDQ19BSVQzID0gZGF0YWJhc2UudGFibGUoIkZDSEFDQyIpLmluZGV4KCIwMCIpYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIEZDSEFDQ19BSVQzID0gZGJGQ0hBQ0NfQUlUMy5nZXRDb250YWluZXIoKQ0KICAgIA0KICAgIEZDSEFDQ19BSVQzLnNldCgiRUFDT05PIiwgaUNPTk8pDQogICAgRkNIQUNDX0FJVDMuc2V0KCJFQURJVkkiLCAiIikNCiAgICBGQ0hBQ0NfQUlUMy5zZXQoIkVBQUlUUCIsIDMpDQogICAgRkNIQUNDX0FJVDMuc2V0KCJFQUFJVE0iLCBpQUlUMy50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgbG9nZ2VyLmRlYnVnKCJBSVQgMyAiK2lBSVQzLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgIA0KICAgIGlmKGRiRkNIQUNDX0FJVDMucmVhZChGQ0hBQ0NfQUlUMykpew0KICAgICAgbG9nZ2VyLmRlYnVnKCJBSVQgMyBmb3VuZCIpDQogICAgICBpc1ZhbGlkX0FJVDMgPSB0cnVlDQogICAgfWVsc2V7DQogICAgICAgaXNWYWxpZF9BSVQzID0gZmFsc2UNCiAgICAgICBtaS5lcnJvcigiUmVjb3JkIGRvZXMgbm90IGV4aXN0IGluIEZDSEFDQyxjaGVjayBkaW1lbnNpb24gMyIpDQogICAgICAgcmV0dXJuDQogICAgfQ0KICB9ZWxzZQ0KICAgIGlzVmFsaWRfQUlUMyA9IHRydWUNCiAgICANCiAgIC8vRm9yIEFJVDUgQWNjb3VudGluZyBkaW1lbnNpb24gNQ0KICAgIGlmKGlBSVQ1LnRvU3RyaW5nKCkudHJpbSgpIT0nJyl7DQogICAgREJBY3Rpb24gZGJGQ0hBQ0NfQUlUNSA9IGRhdGFiYXNlLnRhYmxlKCJGQ0hBQ0MiKS5pbmRleCgiMDAiKS5idWlsZCgpDQogICAgREJDb250YWluZXIgRkNIQUNDX0FJVDUgPSBkYkZDSEFDQ19BSVQ1LmdldENvbnRhaW5lcigpDQogICAgDQogICAgRkNIQUNDX0FJVDUuc2V0KCJFQUNPTk8iLCBpQ09OTykNCiAgICBGQ0hBQ0NfQUlUNS5zZXQoIkVBRElWSSIsICIiKQ0KICAgIEZDSEFDQ19BSVQ1LnNldCgiRUFBSVRQIiwgNSkNCiAgICBGQ0hBQ0NfQUlUNS5zZXQoIkVBQUlUTSIsIGlBSVQ1LnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgIGxvZ2dlci5kZWJ1ZygiQUlUIDUgIitpQUlUNS50b1N0cmluZygpLnRyaW0oKSkNCiAgICANCiAgICBpZihkYkZDSEFDQ19BSVQ1LnJlYWQoRkNIQUNDX0FJVDUpKXsNCiAgICAgICBpc1ZhbGlkX0FJVDUgPSB0cnVlDQogICAgICAgbG9nZ2VyLmRlYnVnKCJBSVQgNSBmb3VuZCIpDQogICAgfWVsc2V7DQogICAgICAgaXNWYWxpZF9BSVQ1ID0gZmFsc2UNCiAgICAgICBtaS5lcnJvcigiUmVjb3JkIGRvZXMgbm90IGV4aXN0IGluIEZDSEFDQyxjaGVjayBkaW1lbnNpb24gNSIpDQogICAgICAgcmV0dXJuDQogICAgfQ0KICB9ZWxzZQ0KICAgaXNWYWxpZF9BSVQ1ID0gdHJ1ZQ0KICAgDQogIH0NCiAgDQogIHByaXZhdGUgdm9pZCAgdmFsaWRhdGVEYXRhUHJlcGFpZE9yZGVyKCl7DQogICAgIGxvZ2dlci5kZWJ1ZygiSW4gdmFsaWRhdGVEYXRhUHJlcGFpZE9yZGVyIikNCiAgICAgDQogICAgICAvL0ZvciBBSVQxIEFjY291bnRpbmcgZGltZW5zaW9uIDENCiAgICBpZihpQUlUMS50b1N0cmluZygpLnRyaW0oKSE9Jycpew0KICAgICAgICBEQkFjdGlvbiBkYkZDSEFDQ19BSVQxID0gZGF0YWJhc2UudGFibGUoIkZDSEFDQyIpLmluZGV4KCIwMCIpYnVpbGQoKQ0KICAgICAgICBEQkNvbnRhaW5lciBGQ0hBQ0NfQUlUMSA9IGRiRkNIQUNDX0FJVDEuZ2V0Q29udGFpbmVyKCkNCiAgICAgICAgDQogICAgICAgIEZDSEFDQ19BSVQxLnNldCgiRUFDT05PIiwgaUNPTk8pDQogICAgICAgIEZDSEFDQ19BSVQxLnNldCgiRUFESVZJIiwgIiIpDQogICAgICAgIEZDSEFDQ19BSVQxLnNldCgiRUFBSVRQIiwgMSkNCiAgICAgICAgRkNIQUNDX0FJVDEuc2V0KCJFQUFJVE0iLCBpQUlUMS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICANCiAgICAgICAgaWYoZGJGQ0hBQ0NfQUlUMS5yZWFkKEZDSEFDQ19BSVQxKSl7DQogICAgICAgICAgbG9nZ2VyLmRlYnVnKCJBSVQgMSBmb3VuZCA6IitpQUlUMS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICBpc1ZhbGlkX0FJVDEgPSB0cnVlDQogICAgICAgIH1lbHNlew0KICAgICAgICAgICBpc1ZhbGlkX0FJVDEgPSBmYWxzZQ0KICAgICAgICAgICBtaS5lcnJvcigiUmVjb3JkIGRvZXMgbm90IGV4aXN0IGluIEZDSEFDQyxjaGVjayBkaW1lbnNpb24gMSIpDQogICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogIH1lbHNlDQogICAgaXNWYWxpZF9BSVQxID0gdHJ1ZQ0KICAgIA0KICAgICAgIC8vRm9yIEFJVDMgQWNjb3VudGluZyBkaW1lbnNpb24gMw0KICAgICAgaWYoaUFJVDMudG9TdHJpbmcoKS50cmltKCkhPScnKXsNCiAgICAgICAgREJBY3Rpb24gZGJGQ0hBQ0NfQUlUMyA9IGRhdGFiYXNlLnRhYmxlKCJGQ0hBQ0MiKS5pbmRleCgiMDAiKWJ1aWxkKCkNCiAgICAgICAgREJDb250YWluZXIgRkNIQUNDX0FJVDMgPSBkYkZDSEFDQ19BSVQzLmdldENvbnRhaW5lcigpDQogICAgICAgIA0KICAgICAgICBGQ0hBQ0NfQUlUMy5zZXQoIkVBQ09OTyIsIGlDT05PKQ0KICAgICAgICBGQ0hBQ0NfQUlUMy5zZXQoIkVBRElWSSIsICIiKQ0KICAgICAgICBGQ0hBQ0NfQUlUMy5zZXQoIkVBQUlUUCIsIDMpDQogICAgICAgIEZDSEFDQ19BSVQzLnNldCgiRUFBSVRNIiwgaUFJVDMudG9TdHJpbmcoKS50cmltKCkpDQogICAgICAgIA0KICAgICAgICBpZihkYkZDSEFDQ19BSVQzLnJlYWQoRkNIQUNDX0FJVDMpKXsNCiAgICAgICAgICBsb2dnZXIuZGVidWcoIkFJVCAzIGZvdW5kIDoiK2lBSVQzLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgIGlzVmFsaWRfQUlUMyA9IHRydWUNCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgIGlzVmFsaWRfQUlUMyA9IGZhbHNlDQogICAgICAgICAgIG1pLmVycm9yKCJSZWNvcmQgZG9lcyBub3QgZXhpc3QgaW4gRkNIQUNDLGNoZWNrIGRpbWVuc2lvbiAzIikNCiAgICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCiAgICAgIH1lbHNlDQogICAgaXNWYWxpZF9BSVQzID0gdHJ1ZQ0KICAgICANCiAgfQ0KICANCiAgLyoNCiAgKiBBZGQgcmVjb3JkIGluIENBQ0NTVA0KICAqLw0KICBwcml2YXRlIHZvaWQgYWRkUmVjb3JkKCl7DQogICAgbG9nZ2VyLmRlYnVnKCJJbiBhZGRSZWNvcmQiKQ0KDQogICAgREJBY3Rpb24gZGJBY3Rpb24gPSBkYXRhYmFzZS50YWJsZSgiQ0FDQ1NUIikuaW5kZXgoIjAwIikuYnVpbGQoKQ0KCQlEQkNvbnRhaW5lciBDQUNDU1QgPSBkYkFjdGlvbi5nZXRDb250YWluZXIoKQ0KICAgDQoJCUNBQ0NTVC5zZXQoIlNDQ09OTyIsIGlDT05PKQ0KCQlDQUNDU1Quc2V0KCJTQ1JJRE4iLCBvdXRfUFVOTykNCiAgICBDQUNDU1Quc2V0KCJTQ1JJREwiLCBpUE5MSSkNCiAgICBDQUNDU1Quc2V0KCJTQ1JJRFgiLCAwKQ0KICAgIENBQ0NTVC5zZXQoIlNDT1JDQSIsICcyNTAnKQ0KICAgIENBQ0NTVC5zZXQoIlNDRVZFTiIsICdQUDA1JykgDQogICAgQ0FDQ1NULnNldCgiU0NBQ1RZIiwgJzkwMycpDQogICAgQ0FDQ1NULnNldCgiU0NBSVQxIiwgaUFJVDEpIA0KCQlDQUNDU1Quc2V0KCJTQ0FJVDIiLCBpQUlUMikNCgkJQ0FDQ1NULnNldCgiU0NBSVQzIiwgaUFJVDMpIA0KCQlDQUNDU1Quc2V0KCJTQ0FJVDQiLCBpQUlUNCkgDQoJCUNBQ0NTVC5zZXQoIlNDQUlUNSIsIGlBSVQ1KSANCgkJQ0FDQ1NULnNldCgiU0NBSVQ2IiwgaUFJVDYpIA0KCQlDQUNDU1Quc2V0KCJTQ0FJVDciLCBpQUlUNykgDQoJCQ0KCQlDQUNDU1Quc2V0KCJTQ1JHRFQiLCAgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQ0KCQlDQUNDU1Quc2V0KCJTQ1JHVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkNCgkJQ0FDQ1NULnNldCgiU0NMTURUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQ0KCQlDQUNDU1Quc2V0KCJTQ0NITk8iLCAxKQ0KCQlDQUNDU1Quc2V0KCJTQ0NISUQiLCBwcm9ncmFtLmdldFVzZXIoKSkNCgkJDQoJCWxvZ2dlci5kZWJ1ZygiQUlUMToiK2lBSVQxKyIsIitpQUlUMysiLCIraUFJVDUrIiwiK2lBSVQ3KQ0KCQkNCgkJaWYoZGJBY3Rpb24ucmVhZChDQUNDU1QpKXsNCiAgICAJCXVwZGF0ZVJlY29yZCgpDQogIAkgIH1lbHNlew0KICAJICAgIGRiQWN0aW9uLmluc2VydChDQUNDU1QscmVjb3JkRXhpc3RzKQ0KICAJICB9DQogIH0NCiAgDQogIAlDbG9zdXJlIHJlY29yZEV4aXN0cyA9IHsNCiAgICAgDQoJfQ0KCQ0KCS8qDQoJKiBVcGRhdGUgdGhlIHJlY29yZCBpbiBDQUNDU1QgaWYgYWxyZWFkeSBhdmFpbGFibGUNCgkqLw0KCXByaXZhdGUgdm9pZCB1cGRhdGVSZWNvcmQoKXsNCgkgIGxvZ2dlci5kZWJ1ZygiSW4gdXBkYXRlUmVjb3JkIikNCgkJREJBY3Rpb24gZGJBY3Rpb24gPSBkYXRhYmFzZS50YWJsZSgiQ0FDQ1NUIikuaW5kZXgoIjAwIikuYnVpbGQoKQ0KCQlEQkNvbnRhaW5lciBDQUNDU1QgPSBkYkFjdGlvbi5nZXRDb250YWluZXIoKQ0KDQoJICBDQUNDU1Quc2V0KCJTQ0NPTk8iLCBpQ09OTykNCgkJQ0FDQ1NULnNldCgiU0NSSUROIiwgb3V0X1BVTk8pDQogICAgQ0FDQ1NULnNldCgiU0NSSURMIiwgaVBOTEkpDQogICAgQ0FDQ1NULnNldCgiU0NSSURYIiwgMCkNCiAgICBDQUNDU1Quc2V0KCJTQ09SQ0EiLCAnMjUwJykNCiAgICBDQUNDU1Quc2V0KCJTQ0VWRU4iLCAnUFAwNScpIA0KICAgIENBQ0NTVC5zZXQoIlNDQUNUWSIsICc5MDMnKQ0KCQkNCgkJZGJBY3Rpb24ucmVhZExvY2soQ0FDQ1NULCB1cGRhdGVDYWxsQmFjaykNCgl9DQoJDQoJLyoqDQoJICogQ2xvc3VyZSBmb3IgQ0FDQ1NUIFVwZGF0ZQ0KCSAqLw0KCQlDbG9zdXJlPD8+IHVwZGF0ZUNhbGxCYWNrID0geyBMb2NrZWRSZXN1bHQgbG9ja2VkUmVzdWx0IC0+DQogICBsb2dnZXIuZGVidWcoIlVwZGF0ZSB0aGUgcmVjb3JkIikNCgkJDQoJCWlmKGlBSVQxLnRyaW0oKSAhPSAiIikge2xvY2tlZFJlc3VsdC5zZXQoIlNDQUlUMSIsIGlBSVQxKX0NCgkJaWYoaUFJVDIudHJpbSgpICE9ICIiKSB7bG9ja2VkUmVzdWx0LnNldCgiU0NBSVQyIiwgaUFJVDIpfQ0KCQlpZihpQUlUMy50cmltKCkgIT0gIiIpIHtsb2NrZWRSZXN1bHQuc2V0KCJTQ0FJVDMiLCBpQUlUMyl9DQoJCWlmKGlBSVQ0LnRyaW0oKSAhPSAiIikge2xvY2tlZFJlc3VsdC5zZXQoIlNDQUlUNCIsIGlBSVQ0KX0NCgkJaWYoaUFJVDUudHJpbSgpICE9ICIiKSB7bG9ja2VkUmVzdWx0LnNldCgiU0NBSVQ1IiwgaUFJVDUpfQ0KCQlpZihpQUlUNi50cmltKCkgIT0gIiIpIHtsb2NrZWRSZXN1bHQuc2V0KCJTQ0FJVDYiLCBpQUlUNil9DQoJCWlmKGlBSVQ3LnRyaW0oKSAhPSAiIikge2xvY2tlZFJlc3VsdC5zZXQoIlNDQUlUNyIsIGlBSVQ3KX0NCgkJbG9nZ2VyLmRlYnVnKCJBSVQxOiIraUFJVDErIiwiK2lBSVQzKyIsIitpQUlUNSsiLCIraUFJVDcpDQoJCQ0KCQkvLyBVcGRhdGUgY2hhbmdlZCBpbmZvcm1hdGlvbg0KCQlsb2NrZWRSZXN1bHQuc2V0KCJTQ0xNRFQiLCBMb2NhbERhdGUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpDQoJCWxvY2tlZFJlc3VsdC5zZXRJbnQoIlNDQ0hOTyIsIChsb2NrZWRSZXN1bHQuZ2V0SW50KCJTQ0NITk8iKSArIDEpKQ0KCQlsb2NrZWRSZXN1bHQuc2V0KCJTQ0NISUQiLCBwcm9ncmFtLmdldFVzZXIoKSkNCgkJbG9ja2VkUmVzdWx0LnVwZGF0ZSgpDQogIA0KICB9DQoJDQp9"}}}