{"utilities":{},"programModules":{"EXT370MI":{"program":"EXT370MI","triggers":{},"transactions":{"AddAccString":{"sourceUuid":"b35c69b1-905f-4fdc-8d8b-ce5a5781635b","name":"AddAccString","program":"EXT370MI","description":"Add accounting String","active":true,"multi":false,"modified":1675084547242,"modifiedBy":"900071","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":true,"type":"N"},{"name":"PUNO","description":"Purchase order number","length":10,"mandatory":true,"type":"N"},{"name":"PNLI","description":"Purchase order line","length":3,"mandatory":true,"type":"N"},{"name":"ITNO","description":"Item Number","length":15,"mandatory":true,"type":"A"},{"name":"TYPE","description":"Type","length":30,"mandatory":true,"type":"A"},{"name":"AIT1","description":"Accounting Dimension 1","length":10,"mandatory":false,"type":"A"},{"name":"AIT2","description":"Accounting Dimension 2","length":10,"mandatory":false,"type":"A"},{"name":"AIT3","description":"Accounting Dimension 3","length":10,"mandatory":false,"type":"A"},{"name":"AIT4","description":"Accounting Dimension 4 ","length":10,"mandatory":false,"type":"A"},{"name":"AIT5","description":"Accounting Dimension 5","length":10,"mandatory":false,"type":"A"},{"name":"AIT6","description":"Accounting Dimension 6","length":10,"mandatory":false,"type":"A"},{"name":"AIT7","description":"Accounting Dimension 7","length":10,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{}}},"sources":{"b35c69b1-905f-4fdc-8d8b-ce5a5781635b":{"uuid":"b35c69b1-905f-4fdc-8d8b-ce5a5781635b","updated":1675084534404,"updatedBy":"900071","created":1672835693263,"createdBy":"900071","apiVersion":"0.9","beVersion":"16.0.0.20221110165806","codeHash":"D84A33E199FCC922E0EBF585887FE74646755F74117AEE68DE88BE24426663D6","code":"LyoqDQogKiBSRUFETUUNCiAqIFRoaXMgZXh0ZW5zaW9uIGlzIGJlaW5nIHVzZWQgdG8gQWRkIHJlY29yZHMgdG8gQ0FDQ1NUIHRhYmxlIGZvciBhZGRpbmcgYWNjb3VudGluZyBzdHJpbmcNCiAqDQogKiBOYW1lOiBFWFQzNzBNSS5BZGRBY2NTdHJpbmcNCiAqIERlc2NyaXB0aW9uOiBBZGRpbmcgYWNjb3VudGluZyBTdHJpbmcgdG8gQ0FDQ1NUIHRhYmxlDQogKiBEYXRlCSAgICAgIENoYW5nZWQgQnkgICAgICAgICAgICBEZXNjcmlwdGlvbg0KICogMjAyMzAxMDQJICBQcmFub3RpIEtoYXRhdmthciAgICAgQWRkaW5nIHJlY29yZHMgdG8gQ0FDQ1NUIHRhYmxlDQogKi8NCiANCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlDQppbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWUNCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyDQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZVBhcnNlRXhjZXB0aW9uDQogDQoNCnB1YmxpYyBjbGFzcyBBZGRBY2NTdHJpbmcgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsNCiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQ0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlDQoJcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyDQoJcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0NCg0KCQ0KCXByaXZhdGUgaW50IGlDT05PLGlQTkxJLGlQVU5PDQoJcHJpdmF0ZSBTdHJpbmcgaUlUTk8saUFJVDEsaUFJVDIsaUFJVDMsaUFJVDQsaUFJVDUsaUFJVDYsaUFJVDcsb3V0X1BVTk8saVRZUEUsaW5QVU5PDQoJcHJpdmF0ZSBib29sZWFuIGlzVmFsaWRfQUlUMSxpc1ZhbGlkX0FJVDMsaXNWYWxpZF9BSVQ1DQoJDQogIHB1YmxpYyBBZGRBY2NTdHJpbmcoTUlBUEkgbWksRGF0YWJhc2VBUEkgZGF0YWJhc2UsIExvZ2dlckFQSSBsb2dnZXIsIFByb2dyYW1BUEkgcHJvZ3JhbSkgew0KICAgIHRoaXMubWkgPSBtaQ0KICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZQ0KCQl0aGlzLmxvZ2dlciA9IGxvZ2dlcg0KCQl0aGlzLnByb2dyYW0gPSBwcm9ncmFtDQogIH0NCiAgDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7DQogICAgbG9nZ2VyLmRlYnVnKCJpbiBtYWluIikNCiAgICBpQ09OTyA9IG1pLmluRGF0YS5nZXQoIkNPTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNPTk8iKSA9PSAwID8gKEludGVnZXIpcHJvZ3JhbS5MREFaRC5DT05PIDogbWkuaW5EYXRhLmdldCgiQ09OTyIpIGFzIEludGVnZXINCgkJaVBVTk8gPSBtaS5pbkRhdGEuZ2V0KCJQVU5PIikgPT0gbnVsbCA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJQVU5PIikgYXMgSW50ZWdlcg0KCQlpUE5MSSA9IG1pLmluRGF0YS5nZXQoIlBOTEkiKSA9PSBudWxsID8gMCA6IG1pLmluRGF0YS5nZXQoIlBOTEkiKSBhcyBJbnRlZ2VyDQogICAgaUFJVDEgPSBtaS5pbkRhdGEuZ2V0KCJBSVQxIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUMSIpDQogICAgaUFJVDIgPSBtaS5pbkRhdGEuZ2V0KCJBSVQyIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUMiIpDQogICAgaUFJVDMgPSBtaS5pbkRhdGEuZ2V0KCJBSVQzIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUMyIpDQogICAgaUFJVDQgPSBtaS5pbkRhdGEuZ2V0KCJBSVQ0IikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUNCIpDQogICAgaUFJVDUgPSBtaS5pbkRhdGEuZ2V0KCJBSVQ1IikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUNSIpDQogICAgaUFJVDYgPSBtaS5pbkRhdGEuZ2V0KCJBSVQ2IikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUNiIpDQogICAgaUFJVDcgPSBtaS5pbkRhdGEuZ2V0KCJBSVQ3IikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQUlUNyIpDQogICAgaUlUTk8gPSBtaS5pbkRhdGEuZ2V0KCJJVE5PIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiSVROTyIpDQogICAgaVRZUEUgPSBtaS5pbkRhdGEuZ2V0KCJUWVBFIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiVFlQRSIpDQogICAgDQogICAgaW5QVU5PID0gKFN0cmluZylpUFVOTy50b1N0cmluZygpDQogICAgaWYoaW5QVU5PLmxlbmd0aCgpPT01KXsNCiAgICAgIGxvZ2dlci5kZWJ1ZygiTGVuZ3RoIGlzIDoiK2luUFVOTy5sZW5ndGgoKSkNCiAgICAgIG91dF9QVU5PID0gJzAwJysoU3RyaW5nKWlQVU5PLnRvU3RyaW5nKCkNCiAgICB9ZWxzZXsNCiAgICAgIGxvZ2dlci5kZWJ1ZygiTGVuZ3RoIGlzIDoiK2luUFVOTy5sZW5ndGgoKSkNCiAgICAgIG91dF9QVU5PID0gKFN0cmluZylpUFVOTy50b1N0cmluZygpDQogICAgfQ0KDQogICAgDQogICAgLy8gVmFsaWRhdGlvbiBDaGVja3MNCiAgICBpZiAoIXZhbGlkSXRlbShpQ09OTywgaUlUTk8pKSB7DQogICAgICBtaS5lcnJvcigiSXRlbSBudW1iZXIgZG9lcyBub3QgZXhpc3QiKQ0KICAgICAgcmV0dXJuDQogICAgfQ0KICAgIA0KICAgIGlmKCF2YWxpZE1QT1BMUERhdGEoaVBVTk8saVBOTEkpKXsNCiAgICAgICBtaS5lcnJvcigiSW52YWxpZCBJdGVtIG51bWJlciIpDQogICAgICByZXR1cm4NCiAgICB9DQogICAgDQogICAgaWYoaVRZUEUudG9TdHJpbmcoKS50cmltKCkuZXF1YWxzKCdJbmRpcmVjdFByb2N1cmVtZW50T25seScpKXsNCiAgICAgICAgdmFsaWRhdGVBY2NvdW50aW5nRGltZW5zaW9uKCkNCiAgICAgICAgbG9nZ2VyLmRlYnVnKCJpc1ZhbGlkX0FJVDE6Iitpc1ZhbGlkX0FJVDErIixpc1ZhbGlkX0FJVDM6Iitpc1ZhbGlkX0FJVDMrIixpc1ZhbGlkX0FJVDU6Iitpc1ZhbGlkX0FJVDUpDQogICAgICAgIA0KICAgICAgICAvL0FkZCBvciB1cGRhdGUgcmVjb3JkIHRvIENBQ0NTVA0KICAgICAgICBpZihpc1ZhbGlkX0FJVDEgJiYgaXNWYWxpZF9BSVQzICYmIGlzVmFsaWRfQUlUNSl7DQogICAgICAgICAgIGFkZFJlY29yZCgpDQogICAgICAgIH0NCiAgIH1lbHNlew0KICAgICBtaS5lcnJvcigiSW52YWxpZCBUeXBlIikNCiAgICAgcmV0dXJuDQogICB9DQogIA0KICB9DQogIA0KICAvKg0KICAqICBWYWxpZGF0ZSBpdGVtIG51bWJlcg0KICovDQogIHByaXZhdGUgYm9vbGVhbiB2YWxpZEl0ZW0oaW50IGluQ09OTywgU3RyaW5nIGluSVROTyl7DQogICAgREJBY3Rpb24gZGJBY3Rpb24gPSBkYXRhYmFzZS50YWJsZSgiTUlUTUFTIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCkuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIE1JVE1BUyA9IGRiQWN0aW9uLmdldENvbnRhaW5lcigpDQogICAgDQogICAgTUlUTUFTLnNldCgiTU1DT05PIiwgaW5DT05PKQ0KICAgIE1JVE1BUy5zZXQoIk1NSVROTyIsIGluSVROTykNCiAgICBpZiAoIWRiQWN0aW9uLnJlYWQoTUlUTUFTKSkgew0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfQ0KICAgIHJldHVybiB0cnVlDQogIH0NCiAgDQogIC8qDQogICpWYWxpZGF0ZSByZWNvcmQgZnJvbSBNUE9QTFAgdGFibGUgdG8gY2hlY2sgaWYgY29ycmVzcG9uZGluZyBpdGVtIGlzIGNvcnJlY3Qgb3Igbm90DQogICovDQogIHByaXZhdGUgYm9vbGVhbiB2YWxpZE1QT1BMUERhdGEoaW50IGluUFVOTyxpbnQgaW5QTkxJKXsNCiAgICBEQkFjdGlvbiBkYkFjdGlvbiA9IGRhdGFiYXNlLnRhYmxlKCJNUE9QTFAiKS5pbmRleCgiMDAiKS5zZWxlY3RBbGxGaWVsZHMoKS5idWlsZCgpDQogICAgREJDb250YWluZXIgTVBPUExQID0gZGJBY3Rpb24uZ2V0Q29udGFpbmVyKCkNCiAgICANCiAgICBNUE9QTFAuc2V0KCJQT0NPTk8iLGlDT05PKQ0KICAgIE1QT1BMUC5zZXQoIlBPUExQTiIsaW5QVU5PKQ0KICAgIE1QT1BMUC5zZXQoIlBPUExQUyIsaW5QTkxJKQ0KICAgIE1QT1BMUC5zZXQoIlBPUExQMiIsMCkNCiAgICANCiAgICAgaWYgKGRiQWN0aW9uLnJlYWQoTVBPUExQKSkgew0KICAgICAgU3RyaW5nIEl0ZW1OdW1iZXIgID0gTVBPUExQLmdldCgiUE9JVE5PIikNCiAgICAgDQogICAgICBpZihJdGVtTnVtYmVyLmVxdWFscyhpSVROTykpew0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgfWVsc2V7DQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICB9DQogIH0gDQogIA0KICAvKg0KICAqVmFsaWRhdGUgYWNjb3VudGluZyBkaW1lbnN0aW9uIDEgLDMgYW5kIDUgdG8gZW5zdXJlIGNvcnJlY3QgZGF0YSBpbnNlcnRpb24gaW4gQ0FDQ1NUDQogICovDQogIHByaXZhdGUgdm9pZCB2YWxpZGF0ZUFjY291bnRpbmdEaW1lbnNpb24oKXsNCiAgICBsb2dnZXIuZGVidWcoIkluIHZhbGlkYXRlQWNjb3VudGluZ0RpbWVuc2lvbiIpDQogICAgDQogICAgLy9Gb3IgQUlUMSBBY2NvdW50aW5nIGRpbWVuc2lvbiAxDQogICAgaWYoaUFJVDEudG9TdHJpbmcoKS50cmltKCkhPScnKXsNCiAgICBEQkFjdGlvbiBkYkZDSEFDQ19BSVQxID0gZGF0YWJhc2UudGFibGUoIkZDSEFDQyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBGQ0hBQ0NfQUlUMSA9IGRiRkNIQUNDX0FJVDEuZ2V0Q29udGFpbmVyKCkNCiAgICANCiAgICBGQ0hBQ0NfQUlUMS5zZXQoIkVBQ09OTyIsIGlDT05PKQ0KICAgIEZDSEFDQ19BSVQxLnNldCgiRUFESVZJIiwgIiIpDQogICAgRkNIQUNDX0FJVDEuc2V0KCJFQUFJVFAiLCAxKQ0KICAgIEZDSEFDQ19BSVQxLnNldCgiRUFBSVRNIiwgaUFJVDEudG9TdHJpbmcoKS50cmltKCkpDQogICAgDQogICAgaWYoZGJGQ0hBQ0NfQUlUMS5yZWFkKEZDSEFDQ19BSVQxKSl7DQogICAgICBpbnQgaW5BSVRQID0gRkNIQUNDX0FJVDEuZ2V0KCJFQUFJVFAiKQ0KICAgICAgU3RyaW5nIGluQUlUTSA9IEZDSEFDQ19BSVQxLmdldFN0cmluZygiRUFBSVRNIikgIA0KICAgICAgbG9nZ2VyLmRlYnVnKCJBSVQxOiIraW5BSVRQKyIsIitpbkFJVE0pIA0KICAgICAgaXNWYWxpZF9BSVQxID0gdHJ1ZQ0KICAgIH1lbHNlew0KICAgICAgIGlzVmFsaWRfQUlUMSA9IGZhbHNlDQogICAgICAgbWkuZXJyb3IoIlJlY29yZCBkb2VzIG5vdCBleGlzdCBpbiBGQ0hBQ0MsQ2hlY2sgZGltZW5zaW9uIDEiKQ0KICAgICAgIHJldHVybg0KICAgIH0NCiAgfQ0KICAgIA0KICAgIC8vRm9yIEFJVDMgQWNjb3VudGluZyBkaW1lbnNpb24gMw0KICAgICBpZihpQUlUMy50b1N0cmluZygpLnRyaW0oKSE9Jycpew0KICAgIERCQWN0aW9uIGRiRkNIQUNDX0FJVDMgPSBkYXRhYmFzZS50YWJsZSgiRkNIQUNDIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCkuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIEZDSEFDQ19BSVQzID0gZGJGQ0hBQ0NfQUlUMy5nZXRDb250YWluZXIoKQ0KICAgIA0KICAgIEZDSEFDQ19BSVQzLnNldCgiRUFDT05PIiwgaUNPTk8pDQogICAgRkNIQUNDX0FJVDMuc2V0KCJFQURJVkkiLCAiIikNCiAgICBGQ0hBQ0NfQUlUMy5zZXQoIkVBQUlUUCIsIDMpDQogICAgRkNIQUNDX0FJVDMuc2V0KCJFQUFJVE0iLCBpQUlUMy50b1N0cmluZygpLnRyaW0oKSkNCiAgICANCiAgICANCiAgICBpZihkYkZDSEFDQ19BSVQzLnJlYWQoRkNIQUNDX0FJVDMpKXsNCiAgICAgICBpbnQgaW5BSVRQID0gRkNIQUNDX0FJVDMuZ2V0KCJFQUFJVFAiKQ0KICAgICAgIFN0cmluZyBpbkFJVE0gPSBGQ0hBQ0NfQUlUMy5nZXRTdHJpbmcoIkVBQUlUTSIpICANCiAgICAgICBsb2dnZXIuZGVidWcoIkFJVDM6IitpbkFJVFArIiwiK2luQUlUTSkNCiAgICAgIGlzVmFsaWRfQUlUMyA9IHRydWUNCiAgICB9ZWxzZXsNCiAgICAgICBpc1ZhbGlkX0FJVDMgPSBmYWxzZQ0KICAgICAgIG1pLmVycm9yKCJSZWNvcmQgZG9lcyBub3QgZXhpc3QgaW4gRkNIQUNDLGNoZWNrIGRpbWVuc2lvbiAzIikNCiAgICAgICByZXR1cm4NCiAgICB9DQogIH0NCiAgICANCiAgIC8vRm9yIEFJVDUgQWNjb3VudGluZyBkaW1lbnNpb24gNQ0KICAgIGlmKGlBSVQ1LnRvU3RyaW5nKCkudHJpbSgpIT0nJyl7DQogICAgREJBY3Rpb24gZGJGQ0hBQ0NfQUlUNSA9IGRhdGFiYXNlLnRhYmxlKCJGQ0hBQ0MiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oKS5idWlsZCgpDQogICAgREJDb250YWluZXIgRkNIQUNDX0FJVDUgPSBkYkZDSEFDQ19BSVQ1LmdldENvbnRhaW5lcigpDQogICAgDQogICAgRkNIQUNDX0FJVDUuc2V0KCJFQUNPTk8iLCBpQ09OTykNCiAgICBGQ0hBQ0NfQUlUNS5zZXQoIkVBRElWSSIsICIiKQ0KICAgIEZDSEFDQ19BSVQ1LnNldCgiRUFBSVRQIiwgNSkNCiAgICBGQ0hBQ0NfQUlUNS5zZXQoIkVBQUlUTSIsIGlBSVQ1LnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgIA0KICAgIGlmKGRiRkNIQUNDX0FJVDUucmVhZChGQ0hBQ0NfQUlUNSkpew0KICAgICAgIGludCBpbkFJVFAgPSBGQ0hBQ0NfQUlUNS5nZXQoIkVBQUlUUCIpDQogICAgICAgU3RyaW5nIGluQUlUTSA9IEZDSEFDQ19BSVQ1LmdldFN0cmluZygiRUFBSVRNIikgIA0KICAgICAgIGxvZ2dlci5kZWJ1ZygiQUlUNToiK2luQUlUUCsiLCIraW5BSVRNKQ0KICAgICAgIGlzVmFsaWRfQUlUNSA9IHRydWUNCiAgICB9ZWxzZXsNCiAgICAgICBpc1ZhbGlkX0FJVDUgPSBmYWxzZQ0KICAgICAgIG1pLmVycm9yKCJSZWNvcmQgZG9lcyBub3QgZXhpc3QgaW4gRkNIQUNDLGNoZWNrIGRpbWVuc2lvbiA1IikNCiAgICAgICByZXR1cm4NCiAgICB9DQogIH0NCiAgIA0KICB9DQogIA0KICAvKg0KICAqIEFkZCByZWNvcmQgaW4gQ0FDQ1NUDQogICovDQogIHByaXZhdGUgdm9pZCBhZGRSZWNvcmQoKXsNCiAgICBsb2dnZXIuZGVidWcoIkluIGFkZFJlY29yZCIpDQogICAgDQogICAgREJBY3Rpb24gZGJBY3Rpb24gPSBkYXRhYmFzZS50YWJsZSgiQ0FDQ1NUIikuaW5kZXgoIjAwIikuc2VsZWN0QWxsRmllbGRzKCkuYnVpbGQoKQ0KCQlEQkNvbnRhaW5lciBDQUNDU1QgPSBkYkFjdGlvbi5nZXRDb250YWluZXIoKQ0KICAgDQoJCUNBQ0NTVC5zZXQoIlNDQ09OTyIsIGlDT05PKQ0KCQlDQUNDU1Quc2V0KCJTQ1JJRE4iLCBvdXRfUFVOTykNCiAgICBDQUNDU1Quc2V0KCJTQ1JJREwiLCBpUE5MSSkNCiAgICBDQUNDU1Quc2V0KCJTQ1JJRFgiLCAwKQ0KICAgIENBQ0NTVC5zZXQoIlNDT1JDQSIsICcyNTAnKQ0KICAgIENBQ0NTVC5zZXQoIlNDRVZFTiIsICdQUDA1JykgDQogICAgQ0FDQ1NULnNldCgiU0NBQ1RZIiwgJzkwMycpDQogICAgQ0FDQ1NULnNldCgiU0NBSVQxIiwgaUFJVDEpIA0KCQlDQUNDU1Quc2V0KCJTQ0FJVDIiLCBpQUlUMikNCgkJQ0FDQ1NULnNldCgiU0NBSVQzIiwgaUFJVDMpIA0KCQlDQUNDU1Quc2V0KCJTQ0FJVDQiLCBpQUlUNCkgDQoJCUNBQ0NTVC5zZXQoIlNDQUlUNSIsIGlBSVQ1KSANCgkJQ0FDQ1NULnNldCgiU0NBSVQ2IiwgaUFJVDYpIA0KCQlDQUNDU1Quc2V0KCJTQ0FJVDciLCBpQUlUNykgDQoJCQ0KCQlDQUNDU1Quc2V0KCJTQ1JHRFQiLCAgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQ0KCQlDQUNDU1Quc2V0KCJTQ1JHVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkNCgkJQ0FDQ1NULnNldCgiU0NMTURUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQ0KCQlDQUNDU1Quc2V0KCJTQ0NITk8iLCAxKQ0KCQlDQUNDU1Quc2V0KCJTQ0NISUQiLCBwcm9ncmFtLmdldFVzZXIoKSkNCgkJDQoJCWxvZ2dlci5kZWJ1ZygiQUlUMToiK2lBSVQxKyIsIitpQUlUMysiLCIraUFJVDUrIiwiK2lBSVQ3KyIsIisgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQ0KCQkNCgkJaWYoZGJBY3Rpb24ucmVhZChDQUNDU1QpKXsNCiAgICAJCXVwZGF0ZVJlY29yZCgpDQogIAkgIH1lbHNlew0KICAJICAgIGRiQWN0aW9uLmluc2VydChDQUNDU1QscmVjb3JkRXhpc3RzKQ0KICAJICB9DQogIH0NCiAgDQogIAlDbG9zdXJlIHJlY29yZEV4aXN0cyA9IHsNCiAgICAgDQoJfQ0KCQ0KCS8qDQoJKiBVcGRhdGUgdGhlIHJlY29yZCBpbiBDQUNDU1QgaWYgYWxyZWFkeSBhdmFpbGFibGUNCgkqLw0KCXByaXZhdGUgdm9pZCB1cGRhdGVSZWNvcmQoKXsNCgkgIGxvZ2dlci5kZWJ1ZygiSW4gdXBkYXRlUmVjb3JkIikNCgkgIA0KCSAgREJBY3Rpb24gZGJBY3Rpb24gPSBkYXRhYmFzZS50YWJsZSgiQ0FDQ1NUIikuaW5kZXgoIjAwIikuc2VsZWN0QWxsRmllbGRzKCkuYnVpbGQoKQ0KCQlEQkNvbnRhaW5lciBDQUNDU1QgPSBkYkFjdGlvbi5nZXRDb250YWluZXIoKQ0KDQoJICBDQUNDU1Quc2V0KCJTQ0NPTk8iLCBpQ09OTykNCgkJQ0FDQ1NULnNldCgiU0NSSUROIiwgb3V0X1BVTk8pDQogICAgQ0FDQ1NULnNldCgiU0NSSURMIiwgaVBOTEkpDQogICAgQ0FDQ1NULnNldCgiU0NSSURYIiwgMCkNCiAgICBDQUNDU1Quc2V0KCJTQ09SQ0EiLCAnMjUwJykNCiAgICBDQUNDU1Quc2V0KCJTQ0VWRU4iLCAnUFAwNScpIA0KICAgIENBQ0NTVC5zZXQoIlNDQUNUWSIsICc5MDMnKQ0KCQkNCgkJZGJBY3Rpb24ucmVhZExvY2soQ0FDQ1NULCB1cGRhdGVDYWxsQmFjaykNCgl9DQoJDQoJLyoqDQoJICogQ2xvc3VyZSBmb3IgQ0FDQ1NUIFVwZGF0ZQ0KCSAqLw0KCQlDbG9zdXJlPD8+IHVwZGF0ZUNhbGxCYWNrID0geyBMb2NrZWRSZXN1bHQgbG9ja2VkUmVzdWx0IC0+DQogICBsb2dnZXIuZGVidWcoIlVwZGF0ZSB0aGUgcmVjb3JkIikNCgkJDQoJCWlmKGlBSVQxLnRyaW0oKSAhPSAiIikge2xvY2tlZFJlc3VsdC5zZXQoIlNDQUlUMSIsIGlBSVQxKX0NCgkJaWYoaUFJVDIudHJpbSgpICE9ICIiKSB7bG9ja2VkUmVzdWx0LnNldCgiU0NBSVQyIiwgaUFJVDIpfQ0KCQlpZihpQUlUMy50cmltKCkgIT0gIiIpIHtsb2NrZWRSZXN1bHQuc2V0KCJTQ0FJVDMiLCBpQUlUMyl9DQoJCWlmKGlBSVQ0LnRyaW0oKSAhPSAiIikge2xvY2tlZFJlc3VsdC5zZXQoIlNDQUlUNCIsIGlBSVQ0KX0NCgkJaWYoaUFJVDUudHJpbSgpICE9ICIiKSB7bG9ja2VkUmVzdWx0LnNldCgiU0NBSVQ1IiwgaUFJVDUpfQ0KCQlpZihpQUlUNi50cmltKCkgIT0gIiIpIHtsb2NrZWRSZXN1bHQuc2V0KCJTQ0FJVDYiLCBpQUlUNil9DQoJCWlmKGlBSVQ3LnRyaW0oKSAhPSAiIikge2xvY2tlZFJlc3VsdC5zZXQoIlNDQUlUNyIsIGlBSVQ3KX0NCgkJbG9nZ2VyLmRlYnVnKCJBSVQxOiIraUFJVDErIiwiK2lBSVQzKyIsIitpQUlUNSsiLCIraUFJVDcpDQoJCQ0KCQkvLyBVcGRhdGUgY2hhbmdlZCBpbmZvcm1hdGlvbg0KCQlsb2NrZWRSZXN1bHQuc2V0KCJTQ0xNRFQiLCBMb2NhbERhdGUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpDQoJCWxvY2tlZFJlc3VsdC5zZXRJbnQoIlNDQ0hOTyIsIChsb2NrZWRSZXN1bHQuZ2V0SW50KCJTQ0NITk8iKSArIDEpKQ0KCQlsb2NrZWRSZXN1bHQuc2V0KCJTQ0NISUQiLCBwcm9ncmFtLmdldFVzZXIoKSkNCgkJbG9ja2VkUmVzdWx0LnVwZGF0ZSgpDQogIA0KICB9DQoJDQp9"}}}