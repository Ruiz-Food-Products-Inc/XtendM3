{"utilities":{},"programModules":{"EXT050MI":{"program":"EXT050MI","triggers":{},"transactions":{"AddSalesTaxExmp":{"sourceUuid":"f2b3f25e-1b72-42df-a36a-e1ae270ecfba","name":"AddSalesTaxExmp","program":"EXT050MI","description":"Add Sales Tax Exmp","active":true,"multi":false,"modified":1668708108122,"modifiedBy":"900066","outputFields":[],"inputFields":[{"name":"CONO","description":"Company","length":3,"mandatory":true,"type":"N"},{"name":"DIVI","description":"Division","length":3,"mandatory":true,"type":"A"},{"name":"TYPE","description":"Transaction type","length":1,"mandatory":true,"type":"N"},{"name":"PRIO","description":"Priority","length":2,"mandatory":true,"type":"N"},{"name":"OBV1","description":"Start value 1 or Item Number","length":15,"mandatory":true,"type":"A"},{"name":"OBV2","description":"Start value 2 or State Id","length":15,"mandatory":true,"type":"A"},{"name":"OBV3","description":"Start value 3","length":15,"mandatory":false,"type":"A"},{"name":"OBV4","description":"Start value 4","length":15,"mandatory":false,"type":"A"},{"name":"FRDT","description":"From date","length":8,"mandatory":false,"type":"N"},{"name":"TODT","description":"To date","length":8,"mandatory":false,"type":"N"},{"name":"RTXC","description":"Tax code customer/address","length":3,"mandatory":true,"type":"A"},{"name":"TXID","description":"Text identity","length":13,"mandatory":false,"type":"N"}],"utilities":[]}},"batches":{}}},"sources":{"f2b3f25e-1b72-42df-a36a-e1ae270ecfba":{"uuid":"f2b3f25e-1b72-42df-a36a-e1ae270ecfba","updated":1675763758636,"updatedBy":"900049","created":1668360657220,"createdBy":"900066","apiVersion":"0.9","beVersion":"16.0.0.20221110165806","codeHash":"ED58B5C07416A7867732F850A217ABB5DFC0F70697F0DE2FC7764FEC51EA321D","code":"LyoNCiAqIFJFQURNRQ0KICogVGhpcyBleHRlbnNpb24gaXMgYmVpbmcgdXNlZCB0byBhZGQgU2FsZXMgVGF4IEV4ZW1wdGlvbiBmcm9tIEZUWFRYQw0KICogDQogKiBOYW1lOiBFWFQwNTBNSS5BZGRTYWxlc1RheEV4bXANCiAqIERlc2NyaXB0aW9uOiBhZGQgU2FsZXMgVGF4IEV4ZW1wdGlvbg0KICogDQogKiBEYXRlCSAgICAgIENoYW5nZWQgQnkgICAgICBEZXNjcmlwdGlvbg0KICogMjAyMjExMDkJICBHaXJpc2ggSG9zYW1hbmkgICAgYWRkIFNhbGVzIFRheCBFeGVtcHRpb24NCiAqDQogKi8NCg0KaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGUNCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZQ0KaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXINCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lUGFyc2VFeGNlcHRpb24NCg0KcHVibGljIGNsYXNzIEFkZFNhbGVzVGF4RXhtcCBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pDQoJcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQ0KCXByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtDQogIA0KICAvL0lucHV0IGZpZWxkcw0KCXByaXZhdGUgaW50IGlDT05PLCBpVFlQRSwgaVBSSU8sIGlGUkRULCBpVE9EVCwgaVRYSUQNCglwcml2YXRlIFN0cmluZyBpRElWSSwgaU9CVjEsIGlPQlYyLCBpT0JWMywgaU9CVjQsIGlSVFhDDQoJDQogIHB1YmxpYyBBZGRTYWxlc1RheEV4bXAoTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBQcm9ncmFtQVBJIHByb2dyYW0pIHsNCiAgICB0aGlzLm1pID0gbWkNCgkJdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlDQoJCXRoaXMucHJvZ3JhbSA9IHByb2dyYW0NCiAgfQ0KICANCiAgLyoNCiAgICogTWFpbiBtZXRob2QNCiAgICogQHBhcmFtDQogICAqIEByZXR1cm4NCiAgKi8NCiAgcHVibGljIHZvaWQgbWFpbigpIHsNCiAgICBpQ09OTyA9IG1pLmluRGF0YS5nZXQoIkNPTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNPTk8iKSA9PSAwID8gKEludGVnZXIpcHJvZ3JhbS5MREFaRC5DT05PIDogbWkuaW5EYXRhLmdldCgiQ09OTyIpIGFzIEludGVnZXINCiAgICBpVFlQRSA9IG1pLmluRGF0YS5nZXQoIlRZUEUiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlRZUEUiKS50cmltKCkgaW4gWyIiLCAiPyJdID8gMCA6IG1pLmluRGF0YS5nZXQoIlRZUEUiKS50cmltKCkudG9JbnRlZ2VyKCkNCiAgICBpUFJJTyA9IG1pLmluRGF0YS5nZXQoIlBSSU8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBSSU8iKS50cmltKCkgaW4gWyIiLCAiPyJdID8gMCA6IG1pLmluRGF0YS5nZXQoIlBSSU8iKS50cmltKCkudG9JbnRlZ2VyKCkNCiAgICBpRlJEVCA9IG1pLmluRGF0YS5nZXQoIkZSRFQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkZSRFQiKS50cmltKCkgaW4gWyIiLCAiPyJdID8gMCA6IG1pLmluRGF0YS5nZXQoIkZSRFQiKS50cmltKCkudG9JbnRlZ2VyKCkNCiAgICBpVE9EVCA9IG1pLmluRGF0YS5nZXQoIlRPRFQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlRPRFQiKS50cmltKCkgaW4gWyIiLCAiPyJdID8gMCA6IG1pLmluRGF0YS5nZXQoIlRPRFQiKS50cmltKCkudG9JbnRlZ2VyKCkNCiAgICBpVFhJRCA9IG1pLmluRGF0YS5nZXQoIlRYSUQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlRYSUQiKS50cmltKCkgaW4gWyIiLCAiPyJdID8gMCA6IG1pLmluRGF0YS5nZXQoIlRYSUQiKS50cmltKCkudG9JbnRlZ2VyKCkNCiAgICBpRElWSSA9IG1pLmluRGF0YS5nZXQoIkRJVkkiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRJVkkiKS50cmltKCkgPT0gIj8iID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJESVZJIikudHJpbSgpDQogICAgaU9CVjEgPSBtaS5pbkRhdGEuZ2V0KCJPQlYxIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPQlYxIikudHJpbSgpID09ICI/IiA/ICIiIDogbWkuaW5EYXRhLmdldCgiT0JWMSIpLnRyaW0oKQ0KICAgIGlPQlYyID0gbWkuaW5EYXRhLmdldCgiT0JWMiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT0JWMiIpLnRyaW0oKSA9PSAiPyIgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk9CVjIiKS50cmltKCkNCiAgICBpT0JWMyA9IG1pLmluRGF0YS5nZXQoIk9CVjMiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIk9CVjMiKS50cmltKCkgPT0gIj8iID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJPQlYzIikudHJpbSgpDQogICAgaU9CVjQgPSBtaS5pbkRhdGEuZ2V0KCJPQlY0IikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPQlY0IikudHJpbSgpID09ICI/IiA/ICIiIDogbWkuaW5EYXRhLmdldCgiT0JWNCIpLnRyaW0oKQ0KICAgIGlSVFhDID0gbWkuaW5EYXRhLmdldCgiUlRYQyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUlRYQyIpLnRyaW0oKSA9PSAiPyIgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlJUWEMiKS50cmltKCkNCiAgICANCiAgICBpZiAoaVRPRFQgIT0gMCB8fCBpRlJEVCAhPSAwKSB7DQogICAgICBtaS5lcnJvcigiRnJvbSBhbmQgVG8gZGF0ZSBzaG91bGQgYmUgYmxhbmsiKSANCgkJCXJldHVybg0KICAgIH0NCiAgICANCiAgICBpZiAoaUZSRFQgPT0gMCkgew0KICAgICAgaUZSRFQgPSAtOTk5OTk5OTkNCiAgICB9IA0KICAgIA0KICAgIGlmIChpVE9EVCA9PSAwKSB7DQogICAgICBpVE9EVCA9IDk5OTk5OTk5DQogICAgfQ0KICAgIA0KICAgIC8vIFZhbGlkYXRlIFR5cGUNCiAgICBpZiAoaVRZUEUgIT0gMSAmJiBpVFlQRSAhPSAyKSB7DQogICAgICBtaS5lcnJvcigiVFlQRSBzaG91bGQgYmUgMSBvciAyIikNCiAgICAgIHJldHVybg0KICAgIH0NCiAgICANCiAgICAvLyBWYWxpZGF0ZSBQcmlvcml0eQ0KCSAgaWYoaVBSSU8gIT0gMSAmJiBpUFJJTyAhPSAyICYmIGlQUklPICE9IDUpew0KCSAgICBtaS5lcnJvcigiUHJpb3JpdHkgIiArIGlQUklPICsgIiBpcyBpbnZhbGlkIikNCgkgICAgcmV0dXJuDQoJICB9DQogICAgDQogICAgYm9vbGVhbiBJbnB1dHNWYWxpZCA9IHZhbGlkYXRlSW5wdXREYXRhKCkNCiAgICBpZihJbnB1dHNWYWxpZCl7DQoJCSAgaW5zZXJ0ZGF0YSgpDQoJCX0NCiAgfQ0KICANCiAgLyoNCgkgKiBWYWxpZGF0aW5nIHRoZSBNSSBpbnB1dCANCgkgKi8NCglwcml2YXRlIGJvb2xlYW4gdmFsaWRhdGVJbnB1dERhdGEoKXsNCgkgIC8vIFZhbGlkYXRlIGlESVZJc2lvbg0KCSAgREJBY3Rpb24gYWN0aW9uY21uZGl2ID0gZGF0YWJhc2UudGFibGUoIkNNTkRJViIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjbW5kaXYgPSBhY3Rpb25jbW5kaXYuZ2V0Q29udGFpbmVyKCkNCgkgIGNtbmRpdi5zZXQoIkNDQ09OTyIsaUNPTk8pDQoJICBjbW5kaXYuc2V0KCJDQ0RJVkkiLGlESVZJKQ0KCSAgaWYoIWFjdGlvbmNtbmRpdi5yZWFkKGNtbmRpdikpew0KCSAgICBtaS5lcnJvcigiaURJVklzaW9uICIgKyBpRElWSSArICIgaXMgaW52YWxpZCIpDQogICAgICByZXR1cm4gZmFsc2UNCgkgIH0gDQoJICAgIA0KCSAgaWYgKGlQUklPID09IDEgJiYgaVRZUEUgPT0gMikgew0KCSAgICAvLyBWYWxpZGF0ZSBJdGVtIE51bWJlcg0KCSAgICBEQkFjdGlvbiBhY3Rpb25taXRtYXMgPSBkYXRhYmFzZS50YWJsZSgiTUlUTUFTIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCkuYnVpbGQoKQ0KICAgICAgREJDb250YWluZXIgTUlUTUFTID0gYWN0aW9ubWl0bWFzLmdldENvbnRhaW5lcigpDQogICAgICBNSVRNQVMuc2V0KCJNTUNPTk8iLCBpQ09OTykNCiAgICAgIE1JVE1BUy5zZXQoIk1NSVROTyIsIGlPQlYxLnRyaW0oKSkNCiAgICAgIGlmICghYWN0aW9ubWl0bWFzLnJlYWQoTUlUTUFTKSkgew0KICAgICAgbWkuZXJyb3IoIkl0ZW0gbnVtYmVyICIraU9CVjErICIgZG9lcyBub3QgZXhpc3QiKQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgICANCiAgICAgIC8vIFZhbGlkYXRlIFN0YXRlIGNvZGUNCiAgICAgIERCQWN0aW9uIGFjdGlvbmNzeXN0cyA9IGRhdGFiYXNlLnRhYmxlKCJDU1lTVFMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oKS5idWlsZCgpDQogICAgICBEQkNvbnRhaW5lciBjc3lzdHMgPSBhY3Rpb25jc3lzdHMuZ2V0Q29udGFpbmVyKCkNCgkgICAgY3N5c3RzLnNldCgiQ0tDT05PIixpQ09OTykNCgkgICAgY3N5c3RzLnNldCgiQ0tFQ0FSIixpT0JWMikNCgkgICAgY3N5c3RzLnNldCgiQ0tDU0NEIiwiVVMiKQ0KCSAgICBpZighYWN0aW9uY3N5c3RzLnJlYWQoY3N5c3RzKSl7DQoJICAgICAgbWkuZXJyb3IoIlN0YXRlICIgKyBpT0JWMiArICIgaXMgaW52YWxpZCIpDQogICAgICAgIHJldHVybiBmYWxzZQ0KCSAgICB9DQoJICAgIA0KCSAgICAvLyBWYWxpZGF0ZSBUYXggY29kZQ0KCSAgICBEQkFjdGlvbiBhY3Rpb25jeXN0YWIzID0gZGF0YWJhc2UudGFibGUoIkNTWVRBQiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigpLmJ1aWxkKCkNCiAgICAgIERCQ29udGFpbmVyIGN5c3RhYjMgPSBhY3Rpb25jeXN0YWIzLmdldENvbnRhaW5lcigpDQoJICAgIGN5c3RhYjMuc2V0KCJDVENPTk8iLCBpQ09OTykNCgkJICBjeXN0YWIzLnNldCgiQ1RTVENPIiwgIlRBWEMiKQ0KCSAgICBjeXN0YWIzLnNldCgiQ1RTVEtZIiwgaVJUWEMpDQoJICAgIGN5c3RhYjMuc2V0KCJDVERJVkkiLCAiIikNCgkgICAgaWYoIWFjdGlvbmN5c3RhYjMucmVhZChjeXN0YWIzKSl7DQoJICAgICAgbWkuZXJyb3IoIlRheCBjb2RlICIgKyBpUlRYQyArICIgaXMgaW52YWxpZCIpDQogICAgICAgIHJldHVybiBmYWxzZQ0KCSAgICB9CQkNCgkgICAgDQoJICAgIGlmIChpT0JWMyAhPSAiIiB8fCBpT0JWNCAhPSAiIikgew0KCSAgICAgIG1pLmVycm9yKCJPQlYzICYmIE9CVjQgc2hvdWxkIGJlIGJsYW5rIikNCiAgICAgICAgcmV0dXJuIGZhbHNlDQoJICAgIH0NCgkgICAgDQoJICB9IGVsc2UgaWYgKGlQUklPID09IDIgJiYgaVRZUEUgPT0gMikgew0KCSAgICAvLyBWYWxpZGF0ZSBJdGVtIE51bWJlcg0KCSAgICBEQkFjdGlvbiBhY3Rpb25taXRtYXMgPSBkYXRhYmFzZS50YWJsZSgiTUlUTUFTIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCkuYnVpbGQoKQ0KICAgICAgREJDb250YWluZXIgTUlUTUFTID0gYWN0aW9ubWl0bWFzLmdldENvbnRhaW5lcigpDQogICAgICBNSVRNQVMuc2V0KCJNTUNPTk8iLCBpQ09OTykNCiAgICAgIE1JVE1BUy5zZXQoIk1NSVROTyIsIGlPQlYzLnRyaW0oKSkNCiAgICAgIGlmICghYWN0aW9ubWl0bWFzLnJlYWQoTUlUTUFTKSkgew0KICAgICAgbWkuZXJyb3IoIkl0ZW0gbnVtYmVyICIraU9CVjMrICIgZG9lcyBub3QgZXhpc3QiKQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgICANCiAgICAgIC8vIFZhbGlkYXRlIFN0YXRlIGNvZGUNCiAgICAgIERCQWN0aW9uIGFjdGlvbmNzeXN0cyA9IGRhdGFiYXNlLnRhYmxlKCJDU1lTVFMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oKS5idWlsZCgpDQogICAgICBEQkNvbnRhaW5lciBjc3lzdHMgPSBhY3Rpb25jc3lzdHMuZ2V0Q29udGFpbmVyKCkNCgkgICAgY3N5c3RzLnNldCgiQ0tDT05PIixpQ09OTykNCgkgICAgY3N5c3RzLnNldCgiQ0tFQ0FSIixpT0JWMSkNCgkgICAgY3N5c3RzLnNldCgiQ0tDU0NEIiwiVVMiKQ0KCSAgICBpZighYWN0aW9uY3N5c3RzLnJlYWQoY3N5c3RzKSl7DQoJICAgICAgbWkuZXJyb3IoIlN0YXRlICIgKyBpT0JWMSArICIgaXMgaW52YWxpZCIpDQogICAgICAgIHJldHVybiBmYWxzZQ0KCSAgICB9IA0KCSAgICANCgkgICAgLy8gVmFsaWRhdGUgU3VwcGxpZXIgbnVtYmVyDQoJICAgIERCQWN0aW9uIGFjdGlvbmNpZG1hcyA9IGRhdGFiYXNlLnRhYmxlKCJDSURNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oKS5idWlsZCgpDQogICAgICBEQkNvbnRhaW5lciBjaWRtYXMgPSBhY3Rpb25jaWRtYXMuZ2V0Q29udGFpbmVyKCkNCgkgICAgY2lkbWFzLnNldCgiSURDT05PIixpQ09OTykNCgkgICAgY2lkbWFzLnNldCgiSURTVU5PIixpT0JWMikNCgkgICAgaWYoIWFjdGlvbmNpZG1hcy5yZWFkKGNpZG1hcykpew0KCSAgICAgIG1pLmVycm9yKCJTdXBwbGllciAiICsgaU9CVjIgKyAiIGlzIGludmFsaWQiKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCgkgICAgfSANCgkgICAgDQoJICAgIC8vIFZhbGlkYXRlIFRheCBjb2RlDQoJICAgIERCQWN0aW9uIGFjdGlvbmN5c3RhYiA9IGRhdGFiYXNlLnRhYmxlKCJDU1lUQUIiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oKS5idWlsZCgpDQogICAgICBEQkNvbnRhaW5lciBjeXN0YWIgPSBhY3Rpb25jeXN0YWIuZ2V0Q29udGFpbmVyKCkNCgkgICAgY3lzdGFiLnNldCgiQ1RDT05PIiwgaUNPTk8pDQoJCSAgY3lzdGFiLnNldCgiQ1RTVENPIiwgIlRBWEMiKQ0KCSAgICBjeXN0YWIuc2V0KCJDVFNUS1kiLCBpUlRYQykNCgkgICAgY3lzdGFiLnNldCgiQ1RESVZJIiwgIiIpDQoJICAgIGlmKCFhY3Rpb25jeXN0YWIucmVhZChjeXN0YWIpKXsNCgkgICAgICBtaS5lcnJvcigiVGF4IGNvZGUgIiArIGlSVFhDICsgIiBpcyBpbnZhbGlkIikNCiAgICAgICAgcmV0dXJuIGZhbHNlDQoJICAgIH0JDQoJICAgIA0KCSAgICBpZiAoaU9CVjQgIT0gIiIpIHsNCgkgICAgICBtaS5lcnJvcigiT0JWNCBzaG91bGQgYmUgYmxhbmsiKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCgkgICAgfQ0KCSAgICANCgkgIH0gZWxzZSBpZiAoaVBSSU8gPT0gNSAmJiBpVFlQRSA9PSAyKSB7DQoJICAgIC8vIFZhbGlkYXRlIFRheCBjb2RlDQoJICAgIERCQWN0aW9uIGFjdGlvbmN5c3RhYjEgPSBkYXRhYmFzZS50YWJsZSgiQ1NZVEFCIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCkuYnVpbGQoKQ0KICAgICAgREJDb250YWluZXIgY3lzdGFiID0gYWN0aW9uY3lzdGFiMS5nZXRDb250YWluZXIoKQ0KICAgICAgY3lzdGFiLnNldCgiQ1RDT05PIiwgaUNPTk8pDQogICAgICBjeXN0YWIuc2V0KCJDVFNUQ08iLCAiVEFYQyIpDQoJICAgIGN5c3RhYi5zZXQoIkNUU1RLWSIsIGlPQlYxKQ0KCSAgICBjeXN0YWIuc2V0KCJDVERJVkkiLCAiIikNCiAgICAgIGlmICghYWN0aW9uY3lzdGFiMS5yZWFkKGN5c3RhYikpIHsNCiAgICAgIG1pLmVycm9yKCJUYXggY29kZSAiK2lPQlYxKyAiIGRvZXMgbm90IGV4aXN0IikNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgICAgDQogICAgICAvLyBWYWxpZGF0ZSBUYXggY29kZQ0KICAgICAgREJBY3Rpb24gYWN0aW9uY3lzdGFiMiA9IGRhdGFiYXNlLnRhYmxlKCJDU1lUQUIiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oKS5idWlsZCgpDQogICAgICBEQkNvbnRhaW5lciBjeXN0YWIyID0gYWN0aW9uY3lzdGFiMi5nZXRDb250YWluZXIoKQ0KCSAgICBjeXN0YWIyLnNldCgiQ1RDT05PIiwgaUNPTk8pDQoJCSAgY3lzdGFiMi5zZXQoIkNUU1RDTyIsICJUQVhDIikNCgkgICAgY3lzdGFiMi5zZXQoIkNUU1RLWSIsIGlPQlYyKQ0KCSAgICBjeXN0YWIyLnNldCgiQ1RESVZJIiwgIiIpDQoJICAgIGlmKCFhY3Rpb25jeXN0YWIyLnJlYWQoY3lzdGFiMikpew0KCSAgICAgIG1pLmVycm9yKCJUYXggY29kZSAiICsgaU9CVjIgKyAiIGlzIGludmFsaWQiKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCgkgICAgfQ0KCQkgIA0KCQkgIC8vIFZhbGlkYXRlIFRheCBjb2RlDQogICAgICBEQkFjdGlvbiBhY3Rpb25jeXN0YWIzID0gZGF0YWJhc2UudGFibGUoIkNTWVRBQiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigpLmJ1aWxkKCkNCiAgICAgIERCQ29udGFpbmVyIGN5c3RhYjMgPSBhY3Rpb25jeXN0YWIzLmdldENvbnRhaW5lcigpDQoJICAgIGN5c3RhYjMuc2V0KCJDVENPTk8iLCBpQ09OTykNCgkJICBjeXN0YWIzLnNldCgiQ1RTVENPIiwgIlRBWEMiKQ0KCSAgICBjeXN0YWIzLnNldCgiQ1RTVEtZIiwgaVJUWEMpDQoJICAgIGN5c3RhYjMuc2V0KCJDVERJVkkiLCAiIikNCgkgICAgaWYoIWFjdGlvbmN5c3RhYjMucmVhZChjeXN0YWIzKSl7DQoJICAgICAgbWkuZXJyb3IoIlRheCBjb2RlICIgKyBpUlRYQyArICIgaXMgaW52YWxpZCIpDQogICAgICAgIHJldHVybiBmYWxzZQ0KCSAgICB9CQkNCgkgICAgDQoJICAgIGlmIChpT0JWMyAhPSAiIiB8fCBpT0JWNCAhPSAiIikgew0KCSAgICAgIG1pLmVycm9yKCJPQlYzICYmIE9CVjQgc2hvdWxkIGJlIGJsYW5rIikNCiAgICAgICAgcmV0dXJuIGZhbHNlDQoJICAgIH0NCgkNCgkgIH0NCgkgIA0KCSAgcmV0dXJuIHRydWUNCgl9DQoJDQoJLyoNCgkgKiBJbnNlcnRzIHJlY29yZCBpbiB0aGUgRlRYVFhDIHRhYmxlDQoJICoNCgkgKi8NCglwcml2YXRlIHZvaWQgaW5zZXJ0ZGF0YSgpew0KCQlEQkFjdGlvbiBhY3Rpb25mdHh0eGMgPSBkYXRhYmFzZS50YWJsZSgiRlRYVFhDIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCkuYnVpbGQoKQ0KCQlEQkNvbnRhaW5lciBGVFhUWEMgPSBhY3Rpb25mdHh0eGMuZ2V0Q29udGFpbmVyKCkNCg0KCQlGVFhUWEMuc2V0KCJUQ0NPTk8iLCBpQ09OTykNCgkJRlRYVFhDLnNldCgiVENESVZJIiwgaURJVkkpDQogICAgRlRYVFhDLnNldCgiVENUWVBFIiwgaVRZUEUpDQogICAgRlRYVFhDLnNldCgiVENQUklPIiwgaVBSSU8pDQoJCUZUWFRYQy5zZXQoIlRDRlJEVCIsIGlGUkRUKQ0KICAgIEZUWFRYQy5zZXQoIlRDVE9EVCIsIGlUT0RUKQ0KICAgIEZUWFRYQy5zZXQoIlRDT0JWMSIsIGlPQlYxKSANCiAgICBGVFhUWEMuc2V0KCJUQ1JUWEMiLCBpUlRYQykNCiAgICBGVFhUWEMuc2V0KCJUQ1RYSUQiLCBpVFhJRCkgDQoJCUZUWFRYQy5zZXQoIlRDT0JWMiIsIGlPQlYyKQ0KCQlGVFhUWEMuc2V0KCJUQ09CVjMiLCBpT0JWMykgDQoJCUZUWFRYQy5zZXQoIlRDT0JWNCIsIGlPQlY0KQ0KCQkNCgkJRlRYVFhDLnNldCgiVENSR0RUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQ0KCQlGVFhUWEMuc2V0KCJUQ1JHVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkNCgkJRlRYVFhDLnNldCgiVENMTURUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQ0KCQlGVFhUWEMuc2V0KCJUQ0NITk8iLCAxKQ0KCQlGVFhUWEMuc2V0KCJUQ0NISUQiLCBwcm9ncmFtLmdldFVzZXIoKSkNCgkJDQoJCWFjdGlvbmZ0eHR4Yy5pbnNlcnQoRlRYVFhDLHJlY29yZEV4aXN0cykNCg0KCX0JDQoJDQoJQ2xvc3VyZSByZWNvcmRFeGlzdHMgPSB7DQoJCW1pLmVycm9yKCJSZWNvcmQgQWxyZWFkeSBFeGlzdHMiKQ0KCQlyZXR1cm4NCgl9DQp9"}}}