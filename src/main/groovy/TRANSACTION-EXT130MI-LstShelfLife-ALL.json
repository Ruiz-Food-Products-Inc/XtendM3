{"programModules":{"EXT130MI":{"program":"EXT130MI","triggers":{},"transactions":{"LstShelfLife":{"sourceUuid":"c0fd7554-7a9c-4dd4-bd8f-48853da3363c","name":"LstShelfLife","program":"EXT130MI","description":"List Shelf Life","active":true,"multi":true,"modified":1721771263674,"modifiedBy":"900046","outputFields":[{"name":"ITNO","description":"item number","length":15,"mandatory":false,"type":"A"},{"name":"BANO","description":"lot number","length":20,"mandatory":false,"type":"A"},{"name":"CAMU","description":"container","length":20,"mandatory":false,"type":"A"},{"name":"WHLO","description":"warehouse","length":3,"mandatory":false,"type":"A"},{"name":"WHSL","description":"location","length":10,"mandatory":false,"type":"A"},{"name":"ITDS","description":"name","length":60,"mandatory":false,"type":"A"},{"name":"QTST","description":"test","length":10,"mandatory":false,"type":"A"},{"name":"STQT","description":"on-hand balance approved","length":15,"mandatory":false,"type":"N"},{"name":"STAS","description":"status - balance ID","length":1,"mandatory":false,"type":"A"},{"name":"EXPI","description":"expiration date","length":8,"mandatory":false,"type":"N"},{"name":"MFDT","description":"manufacturing date","length":8,"mandatory":false,"type":"N"},{"name":"REDA","description":"receipt date","length":8,"mandatory":false,"type":"N"},{"name":"SEDT","description":"sales date","length":8,"mandatory":false,"type":"N"},{"name":"QRID","description":"QI request ID","length":8,"mandatory":false,"type":"A"},{"name":"QSTA","description":"QI request status","length":1,"mandatory":false,"type":"N"},{"name":"STAT","description":"status","length":2,"mandatory":false,"type":"A"},{"name":"FACI","description":"facility","length":3,"mandatory":false,"type":"A"},{"name":"ITTY","description":"item type","length":3,"mandatory":false,"type":"A"}],"inputFields":[{"name":"CONO","description":"Company","length":3,"mandatory":true,"type":"A"}],"utilities":["DateUtil"],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"c0fd7554-7a9c-4dd4-bd8f-48853da3363c":{"uuid":"c0fd7554-7a9c-4dd4-bd8f-48853da3363c","updated":1721774106858,"updatedBy":"900046","created":1719929959538,"createdBy":"900046","apiVersion":"0.21","beVersion":"16.0.0.20240418165458.8","language":"GROOVY","codeHash":"FCD11152EE8CB9E4C12E790926F8551223510EA5966BFD17B57D320572B8066A","code":"IC8qKg0KICoNCiAqIFJFQURNRQ0KICogVGhpcyBjbGFzcyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gYW5kIGxpc3RzIHJlY29yZHMgcmVsYXRlZCB0byBzaGVsZiBsaWZlIGluZm9ybWF0aW9uIGluIHRoZSBRTVMgYXBwLg0KICoNCiAqIE5hbWU6IEVYVDEzME1JLkxzdFNoZWxmTGlmZQ0KICogRGVzY3JpcHRpb246IFRoaXMgY2xhc3MgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIGFuZCBsaXN0cyByZWNvcmRzIHJlbGF0ZWQgdG8gc2hlbGYgbGlmZSBpbmZvcm1hdGlvbiBpbiB0aGUgUU1TIGFwcC4NCiAqIERhdGUJICAgICAgICAgIENoYW5nZWQgQnkgICAgICBEZXNjcmlwdGlvbg0KICogMjAyNDAyMTkJICAgICAgQUpBWVkgICAgICAgICAgIGhpcyBjbGFzcyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gYW5kIGxpc3RzIHJlY29yZHMgcmVsYXRlZCB0byBzaGVsZiBsaWZlIGluZm9ybWF0aW9uIGluIHRoZSBRTVMgYXBwLg0KICogMjAyNDA3MjMJICAgICAgQUpBWVkgICAgICAgICAgIENvZGUgY2xlYW51cA0KICoNCiAqICovDQogDQpwdWJsaWMgY2xhc3MgTHN0U2hlbGZMaWZlIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7DQogICAgDQogICAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaTsNCiAgICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlOyANCiAgICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbTsNCiAgICBwcml2YXRlIGZpbmFsIExvZ2dlckFQSSBsb2dnZXI7ICAgICANCiAgICBwcml2YXRlIGZpbmFsIFV0aWxpdHlBUEkgdXRpbGl0eTsgDQoNCiAgICBwcml2YXRlIFN0cmluZyBpQ09OTzsgICAvLyBDb21wYW55IG51bWJlcg0KICAgIHByaXZhdGUgTGlzdDxEQkNvbnRhaW5lcj4gbWl0bWFzTGlzdCA9IG5ldyBBcnJheUxpc3Q8PigpOyAgIC8vIExpc3Qgb2YgY29udGFpbmVycyBmcm9tIE1JVE1BUyB0YWJsZQ0KICAgIHByaXZhdGUgTGlzdDxEQkNvbnRhaW5lcj4gbWlsb21hTGlzdCA9IG5ldyBBcnJheUxpc3Q8PigpOyAgIC8vIExpc3Qgb2YgY29udGFpbmVycyBmcm9tIE1JTE9NQSB0YWJsZQ0KICAgIHByaXZhdGUgTGlzdDxEQkNvbnRhaW5lcj4gcW1zcnFoTGlzdCA9IG5ldyBBcnJheUxpc3Q8PigpOyAgIC8vIExpc3Qgb2YgY29udGFpbmVycyBmcm9tIFFNU1JRSCB0YWJsZQ0KICAgIHByaXZhdGUgTGlzdDxEQkNvbnRhaW5lcj4gcW1zdHJzTGlzdCA9IG5ldyBBcnJheUxpc3Q8PigpOyAgIC8vIExpc3Qgb2YgY29udGFpbmVycyBmcm9tIFFNU1RSUyB0YWJsZQ0KDQogICAgLyoqDQogICAgICogQ29uc3RydWN0b3IgZm9yIExzdFNoZWxmTGlmZSBjbGFzcy4NCiAgICAgKg0KICAgICAqIEBwYXJhbSBtaSAgICAgICBNSUFQSSBvYmplY3QNCiAgICAgKiBAcGFyYW0gZGF0YWJhc2UgRGF0YWJhc2VBUEkgb2JqZWN0DQogICAgICogQHBhcmFtIHByb2dyYW0gIFByb2dyYW1BUEkgb2JqZWN0DQogICAgICogQHBhcmFtIHV0aWxpdHkgIFV0aWxpdHlBUEkgb2JqZWN0DQogICAgICovDQogICAgcHVibGljIExzdFNoZWxmTGlmZShNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIFByb2dyYW1BUEkgcHJvZ3JhbSwgVXRpbGl0eUFQSSB1dGlsaXR5KSB7DQogICAgICAgIHRoaXMubWkgPSBtaTsNCiAgICAgICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlOw0KICAgICAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtOw0KICAgICAgICB0aGlzLnV0aWxpdHkgPSB1dGlsaXR5Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIE1haW4gbWV0aG9kIHRoYXQgcGVyZm9ybXMgdGhlIGxpc3Rpbmcgb3BlcmF0aW9uIGZvciBzaGVsZiBsaWZlIHJlY29yZHMuDQogICAgICovDQogICAgcHVibGljIHZvaWQgbWFpbigpIHsNCiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBjb21wYW55IG51bWJlciBmcm9tIGlucHV0IG9yIHByb2dyYW0gZGVmYXVsdHMNCiAgICAgICAgaUNPTk8gPSBtaS5pbi5nZXQoIkNPTk8iKS50b1N0cmluZygpID09IG51bGwgPyBwcm9ncmFtLkxEQVpELkNPTk8gOiBtaS5pbi5nZXQoIkNPTk8iKS50b1N0cmluZygpLnRyaW0oKTsNCg0KICAgICAgICAvLyBDYWxjdWxhdGUgY3VycmVudCBlcG9jaCB0aW1lIG1pbnVzIDEgZGF5DQogICAgICAgIGxvbmcgY3VycmVudEVwb2NoTWlsbGlzZWNvbmRzID0gdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsICJjdXJyZW50RXBvY2hNaWxsaXNlY29uZHMiKSBhcyBsb25nOw0KICAgICAgICBjdXJyZW50RXBvY2hNaWxsaXNlY29uZHMgPSBjdXJyZW50RXBvY2hNaWxsaXNlY29uZHMgLSAoMSAqIDI0ICogNjAgKiA2MCAqIDEwMDBMKTsNCg0KICAgICAgICAvLyBDcmVhdGUgZXhwcmVzc2lvbiBmb3IgcXVlcnlpbmcgdGhlIE1JVExPQyB0YWJsZSB3aXRoIGEgdGltZXN0YW1wIGNvbmRpdGlvbg0KICAgICAgICBFeHByZXNzaW9uRmFjdG9yeSBleHByZXNzaW9uID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIk1JVExPQyIpOw0KICAgICAgICBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5nZSgiTUxMTVRTIiwgTG9uZy50b1N0cmluZyhjdXJyZW50RXBvY2hNaWxsaXNlY29uZHMpKTsNCg0KICAgICAgICAvLyBDcmVhdGUgYWN0aW9uIGZvciBxdWVyeWluZyBNSVRMT0MgdGFibGUNCiAgICAgICAgREJBY3Rpb24gYWN0aW9uTUlUTE9DID0gZGF0YWJhc2UudGFibGUoIk1JVExPQyIpLmluZGV4KCIwMCIpLm1hdGNoaW5nKGV4cHJlc3Npb24pDQogICAgICAgICAgICAgICAgLnNlbGVjdGlvbigiTUxXSExPIiwgIk1MSVROTyIsICJNTFdIU0wiLCAiTUxCQU5PIiwgIk1MQ0FNVSIsICJNTFNUUVQiLCAiTUxTVEFTIiwgIk1MRkFDSSIsICJNTFFSSUQiKS5idWlsZCgpOw0KICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSVRMT0MgPSBhY3Rpb25NSVRMT0MuZ2V0Q29udGFpbmVyKCk7DQoNCiAgICAgICAgY29udGFpbmVyTUlUTE9DLnNldEludCgiTUxDT05PIiwgaUNPTk8gYXMgaW50KTsNCg0KICAgICAgICAvLyBDbG9zdXJlIHRvIHByb2Nlc3MgYWxsIHJlY29yZHMgZmV0Y2hlZCBmcm9tIE1JVExPQw0KICAgICAgICBDbG9zdXJlPD8+IHJlYWRBbGxSZWNvcmRzTUlUTE9DID0gew0KICAgICAgICAgICAgREJDb250YWluZXIgcmVzdWx0Q29udGFpbmVyTUlUTE9DIC0+DQogICAgICAgICAgICAgICAgU3RyaW5nIElUTk8gPSByZXN1bHRDb250YWluZXJNSVRMT0MuZ2V0KCJNTElUTk8iKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICBTdHJpbmcgQkFOTyA9IHJlc3VsdENvbnRhaW5lck1JVExPQy5nZXQoIk1MQkFOTyIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgICAgICAgICAgIFN0cmluZyBGQUNJID0gcmVzdWx0Q29udGFpbmVyTUlUTE9DLmdldCgiTUxGQUNJIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICAgICAgICAgICAgU3RyaW5nIFFSSUQgPSByZXN1bHRDb250YWluZXJNSVRMT0MuZ2V0KCJNTFFSSUQiKS50b1N0cmluZygpLnRyaW0oKTsNCg0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJJVE5PIiwgSVROTyk7DQogICAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIkJBTk8iLCBCQU5PKTsNCiAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiQ0FNVSIsIHJlc3VsdENvbnRhaW5lck1JVExPQy5nZXQoIk1MQ0FNVSIpLnRvU3RyaW5nKCkudHJpbSgpKTsNCiAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiV0hMTyIsIHJlc3VsdENvbnRhaW5lck1JVExPQy5nZXQoIk1MV0hMTyIpLnRvU3RyaW5nKCkudHJpbSgpKTsNCiAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiV0hTTCIsIHJlc3VsdENvbnRhaW5lck1JVExPQy5nZXQoIk1MV0hTTCIpLnRvU3RyaW5nKCkudHJpbSgpKTsNCiAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiU1RRVCIsIHJlc3VsdENvbnRhaW5lck1JVExPQy5nZXQoIk1MU1RRVCIpLnRvU3RyaW5nKCkudHJpbSgpKTsNCiAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiU1RBUyIsIHJlc3VsdENvbnRhaW5lck1JVExPQy5nZXQoIk1MU1RBUyIpLnRvU3RyaW5nKCkudHJpbSgpKTsNCg0KICAgICAgICAgICAgICAgIC8vIEZpbmQgY29ycmVzcG9uZGluZyByZWNvcmQgaW4gTUlUTUFTIGxpc3QNCiAgICAgICAgICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSVRNQVMgPSBtaXRtYXNMaXN0LmZpbmQgew0KICAgICAgICAgICAgICAgICAgICBpdC5nZXRTdHJpbmcoIk1NSVROTyIpID09IElUTk87DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGlmIChjb250YWluZXJNSVRNQVMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBEQkFjdGlvbiBhY3Rpb25NSVRNQVMgPSBkYXRhYmFzZS50YWJsZSgiTUlUTUFTIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNTUlURFMiLCAiTU1JVFRZIiwgIk1NU1RBVCIpLmJ1aWxkKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lck1JVE1BUyA9IGFjdGlvbk1JVE1BUy5nZXRDb250YWluZXIoKTsNCg0KICAgICAgICAgICAgICAgICAgICBjb250YWluZXJNSVRNQVMuc2V0SW50KCJNTUNPTk8iLCBwcm9ncmFtLkxEQVpELkNPTk8gYXMgaW50KTsNCiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyTUlUTUFTLnNldCgiTU1JVE5PIiwgcmVzdWx0Q29udGFpbmVyTUlUTE9DLmdldCgiTUxJVE5PIikudG9TdHJpbmcoKS50cmltKCkpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb25NSVRNQVMucmVhZChjb250YWluZXJNSVRNQVMpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgSVREUyA9IGNvbnRhaW5lck1JVE1BUy5nZXQoIk1NSVREUyIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIElUVFkgPSBjb250YWluZXJNSVRNQVMuZ2V0KCJNTUlUVFkiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBTVEFUID0gY29udGFpbmVyTUlUTUFTLmdldCgiTU1TVEFUIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiSVREUyIsIElURFMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIklUVFkiLCBJVFRZKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJTVEFUIiwgU1RBVCk7DQogICAgICAgICAgICAgICAgICAgICAgICBtaXRtYXNMaXN0LmFkZChjb250YWluZXJNSVRNQVMuY3JlYXRlQ29weSgpKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJJVERTIiwgY29udGFpbmVyTUlUTUFTLmdldCgiTU1JVERTIikudG9TdHJpbmcoKS50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiSVRUWSIsIGNvbnRhaW5lck1JVE1BUy5nZXQoIk1NSVRUWSIpLnRvU3RyaW5nKCkudHJpbSgpKTsNCiAgICAgICAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIlNUQVQiLCBjb250YWluZXJNSVRNQVMuZ2V0KCJNTVNUQVQiKS50b1N0cmluZygpLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gRmluZCBjb3JyZXNwb25kaW5nIHJlY29yZCBpbiBNSUxPTUEgbGlzdA0KICAgICAgICAgICAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1JTE9NQSA9IG1pbG9tYUxpc3QuZmluZCB7DQogICAgICAgICAgICAgICAgICAgIGl0LmdldFN0cmluZygiTE1JVE5PIikgPT0gSVROTyAmJiBpdC5nZXRTdHJpbmcoIkxNQkFOTyIpID09IEJBTk87DQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIGlmIChjb250YWluZXJNSUxPTUEgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBTdHJpbmcgRVhQSSA9IGNvbnRhaW5lck1JTE9NQS5nZXQoIkxNRVhQSSIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBTdHJpbmcgTUZEVCA9IGNvbnRhaW5lck1JTE9NQS5nZXQoIkxNTUZEVCIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBTdHJpbmcgUkVEQSA9IGNvbnRhaW5lck1JTE9NQS5nZXQoIkxNUkVEQSIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICBTdHJpbmcgU0VEVCA9IGNvbnRhaW5lck1JTE9NQS5nZXQoIkxNU0VEVCIpLnRvU3RyaW5nKCkudHJpbSgpOw0KDQogICAgICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJFWFBJIiwgRVhQSSk7DQogICAgICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJNRkRUIiwgTUZEVCk7DQogICAgICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJSRURBIiwgUkVEQSk7DQogICAgICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJTRURUIiwgU0VEVCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgREJBY3Rpb24gYWN0aW9uTUlMT01BID0gZGF0YWJhc2UudGFibGUoIk1JTE9NQSIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTE1FWFBJIiwgIkxNTUZEVCIsICJMTVJFREEiLCAiTE1TRURUIikuYnVpbGQoKTsNCiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyTUlMT01BID0gYWN0aW9uTUlMT01BLmdldENvbnRhaW5lcigpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lck1JTE9NQS5zZXRJbnQoIkxNQ09OTyIsIHByb2dyYW0uTERBWkQuQ09OTyBhcyBpbnQpOw0KICAgICAgICAgICAgICAgICAgICBjb250YWluZXJNSUxPTUEuc2V0KCJMTUlUTk8iLCByZXN1bHRDb250YWluZXJNSVRMT0MuZ2V0KCJNTElUTk8iKS50b1N0cmluZygpLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lck1JTE9NQS5zZXQoIkxNQkFOTyIsIHJlc3VsdENvbnRhaW5lck1JVExPQy5nZXQoIk1MQkFOTyIpLnRvU3RyaW5nKCkudHJpbSgpKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uTUlMT01BLnJlYWQoY29udGFpbmVyTUlMT01BKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIEVYUEkgPSBjb250YWluZXJNSUxPTUEuZ2V0KCJMTUVYUEkiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBNRkRUID0gY29udGFpbmVyTUlMT01BLmdldCgiTE1NRkRUIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgUkVEQSA9IGNvbnRhaW5lck1JTE9NQS5nZXQoIkxNUkVEQSIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIFNFRFQgPSBjb250YWluZXJNSUxPTUEuZ2V0KCJMTVNFRFQiKS50b1N0cmluZygpLnRyaW0oKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIkVYUEkiLCBFWFBJKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJNRkRUIiwgTUZEVCk7DQogICAgICAgICAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUkVEQSIsIFJFREEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIlNFRFQiLCBTRURUKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgbWlsb21hTGlzdC5hZGQoY29udGFpbmVyTUlMT01BLmNyZWF0ZUNvcHkoKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBGaW5kIGNvcnJlc3BvbmRpbmcgcmVjb3JkIGluIFFNU1JRSCBsaXN0DQogICAgICAgICAgICAgICAgREJDb250YWluZXIgY29udGFpbmVyUU1TUlFIID0gcW1zcnFoTGlzdC5maW5kIHsNCiAgICAgICAgICAgICAgICAgICAgaXQuZ2V0U3RyaW5nKCJSSElUTk8iKSA9PSBJVE5PICYmIGl0LmdldFN0cmluZygiUkhCQU5PIikgPT0gQkFOTzsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lclFNU1JRSCAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIFN0cmluZyBRTVNSUUhfUVJJRCA9IGNvbnRhaW5lclFNU1JRSC5nZXQoIlJIUVJJRCIpOw0KICAgICAgICAgICAgICAgICAgICBTdHJpbmcgUU1TUlFIX1FTVEEgPSBjb250YWluZXJRTVNSUUguZ2V0KCJSSFFTVEEiKTsNCiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIFFNU1JRSF9GQUNJID0gY29udGFpbmVyUU1TUlFILmdldCgiUkhGQUNJIik7DQoNCiAgICAgICAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIlFSSUQiLCBRTVNSUUhfUVJJRCk7DQogICAgICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJRU1RBIiwgUU1TUlFIX1FTVEEpOw0KICAgICAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiRkFDSSIsIFFNU1JRSF9GQUNJKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBEQkFjdGlvbiBhY3Rpb25RTVNSUUggPSBkYXRhYmFzZS50YWJsZSgiUU1TUlFIIikuaW5kZXgoIjMwIikuc2VsZWN0aW9uKCJSSFFSSUQiLCAiUkhRU1RBIiwgIlJIRkFDSSIpLnJldmVyc2UoKS5idWlsZCgpOw0KICAgICAgICAgICAgICAgICAgICBjb250YWluZXJRTVNSUUggPSBhY3Rpb25RTVNSUUguZ2V0Q29udGFpbmVyKCk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyUU1TUlFILnNldEludCgiUkhDT05PIiwgcHJvZ3JhbS5MREFaRC5DT05PIGFzIGludCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lclFNU1JRSC5zZXQoIlJISVROTyIsIElUTk8pOw0KICAgICAgICAgICAgICAgICAgICBjb250YWluZXJRTVNSUUguc2V0KCJSSEJBTk8iLCBCQU5PKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBDbG9zdXJlIHRvIHByb2Nlc3MgYWxsIHJlY29yZHMgZmV0Y2hlZCBmcm9tIFFNU1JRSA0KICAgICAgICAgICAgICAgICAgICBDbG9zdXJlPD8+IHJlYWRBbGxSZWNvcmRzUU1TUlFIID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgREJDb250YWluZXIgcmVzdWx0Q29udGFpbmVyUU1TUlFIIC0+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIFFNU1JRSF9RUklEID0gcmVzdWx0Q29udGFpbmVyUU1TUlFILmdldCgiUkhRUklEIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIFFNU1JRSF9RU1RBID0gcmVzdWx0Q29udGFpbmVyUU1TUlFILmdldCgiUkhRU1RBIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIFFNU1JRSF9GQUNJID0gcmVzdWx0Q29udGFpbmVyUU1TUlFILmdldCgiUkhGQUNJIik7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUVJJRCIsIFFNU1JRSF9RUklEKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUVNUQSIsIFFNU1JRSF9RU1RBKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiRkFDSSIsIFFNU1JRSF9GQUNJKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHFtc3JxaExpc3QuYWRkKHJlc3VsdENvbnRhaW5lclFNU1JRSC5jcmVhdGVDb3B5KCkpOw0KICAgICAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAgICAgICAgIGFjdGlvblFNU1JRSC5yZWFkQWxsKGNvbnRhaW5lclFNU1JRSCwgMywgMSwgcmVhZEFsbFJlY29yZHNRTVNSUUgpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIEZpbmQgY29ycmVzcG9uZGluZyByZWNvcmQgaW4gUU1TVFJTIGxpc3QNCiAgICAgICAgICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXJRTVNUUlMgPSBxbXN0cnNMaXN0LmZpbmQgew0KICAgICAgICAgICAgICAgICAgICBpdC5nZXRTdHJpbmcoIlJSRkFDSSIpID09IEZBQ0kgJiYgaXQuZ2V0U3RyaW5nKCJSUlFSSUQiKSA9PSBRUklEOw0KICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyUU1TVFJTICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIlFUU1QiLCBjb250YWluZXJRTVNUUlMuZ2V0KCJSUlFUU1QiKS50b1N0cmluZygpLnRyaW0oKSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgREJBY3Rpb24gYWN0aW9uUU1TVFJTID0gZGF0YWJhc2UudGFibGUoIlFNU1RSUyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiUlJRVFNUIikuYnVpbGQoKTsNCiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyUU1TVFJTID0gYWN0aW9uUU1TVFJTLmdldENvbnRhaW5lcigpOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lclFNU1RSUy5zZXRJbnQoIlJSQ09OTyIsIHByb2dyYW0uTERBWkQuQ09OTyBhcyBpbnQpOw0KICAgICAgICAgICAgICAgICAgICBjb250YWluZXJRTVNUUlMuc2V0KCJSUkZBQ0kiLCBGQUNJKTsNCiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyUU1TVFJTLnNldCgiUlJRUklEIiwgUVJJRCk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gQ2xvc3VyZSB0byBwcm9jZXNzIGFsbCByZWNvcmRzIGZldGNoZWQgZnJvbSBRTVNUUlMNCiAgICAgICAgICAgICAgICAgICAgQ2xvc3VyZTw/PiByZWFkQWxsUmVjb3Jkc1FNU1RSUyA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIERCQ29udGFpbmVyIHJlc3VsdENvbnRhaW5lclFNU1RSUyAtPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJRVFNUIiwgcmVzdWx0Q29udGFpbmVyUU1TVFJTLmdldCgiUlJRVFNUIikudG9TdHJpbmcoKS50cmltKCkpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcW1zdHJzTGlzdC5hZGQocmVzdWx0Q29udGFpbmVyUU1TVFJTLmNyZWF0ZUNvcHkoKSk7DQogICAgICAgICAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uUU1TVFJTLnJlYWRBbGwoY29udGFpbmVyUU1TVFJTLCAzLCAxLCByZWFkQWxsUmVjb3Jkc1FNU1RSUyk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gV3JpdGUgcHJvY2Vzc2VkIGRhdGEgdG8gb3V0cHV0DQogICAgICAgICAgICAgICAgbWkud3JpdGUoKTsNCiAgICAgICAgfTsNCg0KICAgICAgICAvLyBSZWFkIGFsbCByZWNvcmRzIGZyb20gTUlUTE9DIHRhYmxlDQogICAgICAgIGFjdGlvbk1JVExPQy5yZWFkQWxsKGNvbnRhaW5lck1JVExPQywgMSwgMTAwMDAsIHJlYWRBbGxSZWNvcmRzTUlUTE9DKTsNCiAgICB9DQp9DQo="}}}