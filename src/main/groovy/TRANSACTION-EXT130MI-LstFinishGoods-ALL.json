{"programModules":{"EXT130MI":{"program":"EXT130MI","triggers":{},"transactions":{"LstFinishGoods":{"sourceUuid":"26f1e050-a265-4af6-b81d-9c43636d81b2","name":"LstFinishGoods","program":"EXT130MI","description":"List Finish Goods","active":true,"multi":true,"modified":1727622909388,"modifiedBy":"900073","outputFields":[{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"ITNO","description":"Item number","length":15,"mandatory":false,"type":"A"},{"name":"ITDS","description":"Name","length":60,"mandatory":false,"type":"A"},{"name":"QMGP","description":"Quality group","length":10,"mandatory":false,"type":"A"},{"name":"BANO","description":"Lot number","length":20,"mandatory":false,"type":"A"},{"name":"CAMU","description":"Container","length":20,"mandatory":false,"type":"A"},{"name":"STAS","description":"Status - balance ID","length":1,"mandatory":false,"type":"A"},{"name":"QSTA","description":"QI request status","length":1,"mandatory":false,"type":"N"},{"name":"MFDT","description":"Manufacturing date","length":8,"mandatory":false,"type":"N"},{"name":"REDA","description":"Receipt date","length":8,"mandatory":false,"type":"N"},{"name":"PLGR","description":"Work center","length":8,"mandatory":false,"type":"A"},{"name":"EXPI","description":"Expiration date","length":8,"mandatory":false,"type":"N"},{"name":"AGDY","description":"Aging days","length":5,"mandatory":false,"type":"N"},{"name":"AGHO","description":"Aging hours","length":4,"mandatory":false,"type":"N"},{"name":"AGMI","description":"Aging minutes","length":2,"mandatory":false,"type":"N"},{"name":"MWHL","description":"Manufacturing Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"BREM","description":"Remark","length":20,"mandatory":false,"type":"A"},{"name":"QAPR","description":"QI request approval status","length":1,"mandatory":false,"type":"N"},{"name":"RFTX","description":"Reference text","length":40,"mandatory":false,"type":"A"},{"name":"STQT","description":"On-hand balance approved","length":15,"mandatory":false,"type":"N"},{"name":"QRID","description":"QI request ID","length":8,"mandatory":false,"type":"A"},{"name":"QIAD","description":"Quality inspection approval date","length":8,"mandatory":false,"type":"N"},{"name":"PRDT","description":"Priority date","length":8,"mandatory":false,"type":"N"}],"inputFields":[{"name":"CONO","description":"Company","length":3,"mandatory":true,"type":"A"},{"name":"HOUR","description":"Hours","length":2,"mandatory":true,"type":"N"}],"utilities":["DateUtil"],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"26f1e050-a265-4af6-b81d-9c43636d81b2":{"uuid":"26f1e050-a265-4af6-b81d-9c43636d81b2","updated":1726697927257,"updatedBy":"900073","created":1727622859972,"createdBy":"900073","apiVersion":"UNKNOWN","beVersion":"16.0.0.20240717001700.11","language":"GROOVY","codeHash":"0ED292EB13CE008C1C20932AE0C4AA3CD77B621397E0957EDF0B67B68E541611","code":"LyoqDQogKiBSRUFETUUNCiAqIExpc3QgcmVjb3JkcyBmb3IgRmluaXNoZWQgR29vZHMgcGFuZWwgaW4gdGhlIFFNUyBhcHANCiAqDQogKiBOYW1lOiBFWFQxMzBNSS5Mc3RGaW5pc2hlZEdvb2RzDQogKiBEZXNjcmlwdGlvbjogTGlzdCByZWNvcmRzIGZvciBGaW5pc2hlZCBHb29kcyBwYW5lbCBpbiB0aGUgUU1TIGFwcA0KICogRGF0ZSAgICAgICAgIENoYW5nZWQgQnkgICAgICBEZXNjcmlwdGlvbg0KICogMjAyNDA3MjAJICAgIEFKQVlZICAgICAgICAJICBMaXN0IHJlY29yZHMgZm9yIEZpbmlzaGVkIEdvb2RzIHBhbmVsIGluIHRoZSBRTVMgYXBwDQogKiAyMDI0MDcyMwkgICAgQUpBWVkgICAgICAgIAkgIENvZGUgY2xlYW51cA0KICogMjAyNDA5MDQJICAgIEFKQVlZICAgICAgICAJICBGaXhlZCB0aGUgaXNzdWUgd2l0aCB0aGUgUU1TUlFIIHJlYWQuIE5vdyByZWFkaW5nIHdpdGggMyBrZXlzKENPTk8sIElUTk8sIEJBTk8pDQogKiAyMDI0MDkxMCAgICAgQUpBWVkgICAgICAgICAgIEFkZGVkIEhPVVIgaW5wdXQgZmllbGQNCiAqIDIwMjQwOTE3ICAgICBBSkFZWSAgICAgICAgICAgUmVhZCBNSUxPTUEgd2l0aCBiYXNlIGxvdA0KICovDQoNCnB1YmxpYyBjbGFzcyBMc3RGaW5pc2hHb29kcyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pDQogIHByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2UNCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0NCiAgcHJpdmF0ZSBmaW5hbCBVdGlsaXR5QVBJIHV0aWxpdHkNCg0KICAvLyBJbnB1dCBmaWVsZHMNCiAgcHJpdmF0ZSBTdHJpbmcgaUNPTk8NCiAgcHJpdmF0ZSBTdHJpbmcgaUhPVVINCiAgcHJpdmF0ZSBTdHJpbmcgRkFDSQ0KDQogIC8vIExpc3RzIHRvIHN0b3JlIGRhdGFiYXNlIHF1ZXJ5IHJlc3VsdHMNCiAgcHJpdmF0ZSBMaXN0PERCQ29udGFpbmVyPiBtaXRtYXNMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCkNCiAgcHJpdmF0ZSBMaXN0PERCQ29udGFpbmVyPiBxbXNycWhMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCkNCiAgcHJpdmF0ZSBMaXN0PERCQ29udGFpbmVyPiBtaWxvbWFMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCkNCiAgcHJpdmF0ZSBMaXN0PERCQ29udGFpbmVyPiBtaXRiYWxMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCkNCiAgcHJpdmF0ZSBMaXN0PERCQ29udGFpbmVyPiBtaXRwbG9MaXN0ID0gbmV3IEFycmF5TGlzdDw+KCkNCiAgcHJpdmF0ZSBMaXN0PERCQ29udGFpbmVyPiBtaXR0cmFMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCkNCiAgcHJpdmF0ZSBMaXN0PERCQ29udGFpbmVyPiBtaXR3aGxMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCkNCiAgcHJpdmF0ZSBMaXN0PERCQ29udGFpbmVyPiBtd29oZWRMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCkNCiAgcHJpdmF0ZSBMaXN0PERCQ29udGFpbmVyPiBtd29vcGVMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCkNCg0KICAvKioNCiAgICogQ29uc3RydWN0b3IgZm9yIExzdEZpbmlzaEdvb2RzIGNsYXNzLg0KICAgKg0KICAgKiBAcGFyYW0gbWkgICAgICAgTUlBUEkgaW5zdGFuY2UgZm9yIGludGVyYWN0aW5nIHdpdGggTTMgQVBJDQogICAqIEBwYXJhbSBkYXRhYmFzZSBEYXRhYmFzZUFQSSBpbnN0YW5jZSBmb3IgZGF0YWJhc2Ugb3BlcmF0aW9ucw0KICAgKiBAcGFyYW0gcHJvZ3JhbSAgUHJvZ3JhbUFQSSBpbnN0YW5jZSBmb3IgcHJvZ3JhbW1hdGljIG9wZXJhdGlvbnMNCiAgICogQHBhcmFtIHV0aWxpdHkgIFV0aWxpdHlBUEkgaW5zdGFuY2UgZm9yIHV0aWxpdHkgb3BlcmF0aW9ucw0KICAgKi8NCiAgcHVibGljIExzdEZpbmlzaEdvb2RzKE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBVdGlsaXR5QVBJIHV0aWxpdHkpIHsNCiAgICB0aGlzLm1pID0gbWkNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UNCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtDQogICAgdGhpcy51dGlsaXR5ID0gdXRpbGl0eQ0KICB9DQoNCiAgLyoqDQogICAqIE1haW4gbWV0aG9kIHRvIHBlcmZvcm0gdGhlIHJldHJpZXZhbCBhbmQgcHJvY2Vzc2luZyBvZiBmaW5pc2hlZCBnb29kcyBkYXRhLg0KICAgKi8NCiAgcHVibGljIHZvaWQgbWFpbigpIHsNCiAgICAvLyBSZXRyaWV2ZSBDT05PIGZyb20gaW5wdXQgb3IgcHJvZ3JhbSBjb250ZXh0DQogICAgaUNPTk8gPSBtaS5pbi5nZXQoIkNPTk8iKS50b1N0cmluZygpID09IG51bGwgPyBwcm9ncmFtLkxEQVpELkNPTk8gOiBtaS5pbi5nZXQoIkNPTk8iKS50b1N0cmluZygpLnRyaW0oKQ0KICAgIGlIT1VSID0gbWkuaW4uZ2V0KCJIT1VSIikudG9TdHJpbmcoKSA9PSBudWxsID8gIjAiIDogbWkuaW4uZ2V0KCJIT1VSIikudG9TdHJpbmcoKS50cmltKCkNCiAgICANCiAgICBpbnQgaG91cnMgPSBpSE9VUi50b0RvdWJsZSgpIGFzIGludA0KICAgIA0KICAgIGlmKGhvdXJzIDw9IDAgfHwgaG91cnMgPj0gMjQpIHsNCiAgICAgIG1pLmVycm9yKCJIb3VycyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMjQiKQ0KICAgICAgcmV0dXJuDQogICAgfQ0KDQogICAgLy8gUmV0cmlldmUgbGlzdCBvZiB2YWxpZCBpdGVtcyBmcm9tIE1JVE1BUyB0YWJsZQ0KICAgIG1pdG1hc0xpc3QgPSBsaXN0TUlUTUFTKCkNCg0KICAgIC8vIENhbGN1bGF0ZSB0aGUgdGltZXN0YW1wIGZvciAxIGRheSBhZ28NCiAgICBsb25nIGN1cnJlbnRFcG9jaE1pbGxpc2Vjb25kcyA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiY3VycmVudEVwb2NoTWlsbGlzZWNvbmRzIikgYXMgbG9uZw0KICAgIGN1cnJlbnRFcG9jaE1pbGxpc2Vjb25kcyA9IGN1cnJlbnRFcG9jaE1pbGxpc2Vjb25kcyAtICgxICogaG91cnMgKiA2MCAqIDYwICogMTAwMEwpDQoNCiAgICAvLyBDcmVhdGUgZXhwcmVzc2lvbiBmb3IgZmlsdGVyaW5nIHJlY29yZHMgaW4gTUlUTE9DIHRhYmxlDQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwcmVzc2lvbiA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJNSVRMT0MiKQ0KICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLmdlKCJNTExNVFMiLCBjdXJyZW50RXBvY2hNaWxsaXNlY29uZHMudG9TdHJpbmcoKSkNCg0KICAgIC8vIERlZmluZSBhY3Rpb24gYW5kIGNvbnRhaW5lciBmb3IgTUlUTE9DIHRhYmxlIG9wZXJhdGlvbnMNCiAgICBEQkFjdGlvbiBhY3Rpb25NSVRMT0MgPSBkYXRhYmFzZS50YWJsZSgiTUlUTE9DIikuaW5kZXgoIjEwIikubWF0Y2hpbmcoZXhwcmVzc2lvbikNCiAgICAgIC5zZWxlY3Rpb24oIk1MQ09OTyIsICJNTFdITE8iLCAiTUxJVE5PIiwgIk1MQkFOTyIsICJNTENBTVUiLCAiTUxTVEFTIiwgIk1MU1RRVCIsICJNTFBSRFQiLCAiTUxCUkVNIikuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1JVExPQyA9IGFjdGlvbk1JVExPQy5nZXRDb250YWluZXIoKQ0KDQogICAgLy8gU2V0IENPTk8gaW4gY29udGFpbmVyTUlUTE9DDQogICAgY29udGFpbmVyTUlUTE9DLnNldEludCgiTUxDT05PIiwgaUNPTk8gYXMgaW50KQ0KDQogICAgLy8gQ2xvc3VyZSB0byBwcm9jZXNzIGFsbCByZWNvcmRzIGZldGNoZWQgZnJvbSBNSVRMT0MNCiAgICBDbG9zdXJlPD8+IHJlYWRBbGxSZWNvcmRzTUlUTE9DID0gew0KICAgICAgREJDb250YWluZXIgcmVzdWx0Q29udGFpbmVyX01JVExPQyAtPg0KICAgICAgICBTdHJpbmcgSVROTyA9IHJlc3VsdENvbnRhaW5lcl9NSVRMT0MuZ2V0U3RyaW5nKCJNTElUTk8iKS50cmltKCkNCiAgICAgICAgU3RyaW5nIEJBTk8gPSByZXN1bHRDb250YWluZXJfTUlUTE9DLmdldFN0cmluZygiTUxCQU5PIikudHJpbSgpDQogICAgICAgIFN0cmluZyBiYXNlQkFOTyA9IEJBTk8uc3BsaXQoIlxcfCIpWzBdDQogICAgICAgIFN0cmluZyBDQU1VID0gcmVzdWx0Q29udGFpbmVyX01JVExPQy5nZXRTdHJpbmcoIk1MQ0FNVSIpLnRyaW0oKQ0KICAgICAgICBTdHJpbmcgV0hMTyA9IHJlc3VsdENvbnRhaW5lcl9NSVRMT0MuZ2V0U3RyaW5nKCJNTFdITE8iKS50cmltKCkNCg0KICAgICAgICAvLyBGaW5kIGNvcnJlc3BvbmRpbmcgaXRlbSBkZXRhaWxzIGluIE1JVE1BUyBsaXN0DQogICAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1JVE1BUyA9IG1pdG1hc0xpc3QuZmluZCB7DQogICAgICAgICAgaXQuZ2V0U3RyaW5nKCJNTUlUTk8iKSA9PSBJVE5PDQogICAgICAgIH0NCg0KICAgICAgICBpZiAoY29udGFpbmVyTUlUTUFTICE9IG51bGwpIHsNCiAgICAgICAgICBTdHJpbmcgRkFDSSA9ICIiDQogICAgICAgICAgDQogICAgICAgICAgLy8gU2V0IG91dHB1dCBkYXRhIGZvciB0aGUgY3VycmVudCByZWNvcmQNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiV0hMTyIsIHJlc3VsdENvbnRhaW5lcl9NSVRMT0MuZ2V0U3RyaW5nKCJNTFdITE8iKS50cmltKCkpDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIklUTk8iLCBJVE5PKQ0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJCQU5PIiwgQkFOTykNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiU1RBUyIsIHJlc3VsdENvbnRhaW5lcl9NSVRMT0MuZ2V0KCJNTFNUQVMiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiU1RRVCIsIHJlc3VsdENvbnRhaW5lcl9NSVRMT0MuZ2V0KCJNTFNUUVQiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUFJEVCIsIHJlc3VsdENvbnRhaW5lcl9NSVRMT0MuZ2V0KCJNTFBSRFQiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiQlJFTSIsIHJlc3VsdENvbnRhaW5lcl9NSVRMT0MuZ2V0KCJNTEJSRU0iKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiQ0FNVSIsIHJlc3VsdENvbnRhaW5lcl9NSVRMT0MuZ2V0KCJNTENBTVUiKS50b1N0cmluZygpLnRyaW0oKSkNCg0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJJVERTIiwgY29udGFpbmVyTUlUTUFTLmdldFN0cmluZygiTU1JVERTIikudHJpbSgpKQ0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJRTUdQIiwgY29udGFpbmVyTUlUTUFTLmdldFN0cmluZygiTU1RTUdQIikudHJpbSgpKQ0KDQogICAgICAgICAgLy8gRmluZCBjb3JyZXNwb25kaW5nIHJlY29yZCBpbiBRTVNSUUggbGlzdA0KICAgICAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lclFNU1JRSCA9IHFtc3JxaExpc3QuZmluZCB7DQogICAgICAgICAgICBpdC5nZXRTdHJpbmcoIlJISVROTyIpID09IElUTk8gJiYgaXQuZ2V0U3RyaW5nKCJSSEJBTk8iKSA9PSBiYXNlQkFOTw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChjb250YWluZXJRTVNSUUggPT0gbnVsbCkgew0KICAgICAgICAgICAgLy8gUmVhZCByZWNvcmQgZnJvbSBRTVNSUUggdGFibGUgaWYgbm90IGZvdW5kDQogICAgICAgICAgICBEQkFjdGlvbiBhY3Rpb25RTVNSUUggPSBkYXRhYmFzZS50YWJsZSgiUU1TUlFIIikuaW5kZXgoIjMwIikuc2VsZWN0aW9uKCJSSFFTVEEiLCAiUkhRQVBSIiwgIlJIUVJJRCIpLmJ1aWxkKCkNCiAgICAgICAgICAgIGNvbnRhaW5lclFNU1JRSCA9IGFjdGlvblFNU1JRSC5nZXRDb250YWluZXIoKQ0KDQogICAgICAgICAgICBjb250YWluZXJRTVNSUUguc2V0KCJSSENPTk8iLCBpQ09OTyBhcyBpbnQpDQogICAgICAgICAgICBjb250YWluZXJRTVNSUUguc2V0KCJSSElUTk8iLCBJVE5PKQ0KICAgICAgICAgICAgY29udGFpbmVyUU1TUlFILnNldCgiUkhCQU5PIiwgYmFzZUJBTk8pDQoNCiAgICAgICAgICAgIC8vIENsb3N1cmUgdG8gcHJvY2VzcyBhbGwgcmVjb3JkcyBmZXRjaGVkIGZyb20gUU1TUlFIDQogICAgICAgICAgICBDbG9zdXJlPD8+IHJlYWRBbGxSZWNvcmRRTVNSUUggPSB7DQogICAgICAgICAgICAgIERCQ29udGFpbmVyIHJlc3VsdENvbnRhaW5lcl9RTVNSUUggLT4NCiAgICAgICAgICAgICAgICBxbXNycWhMaXN0LmFkZChyZXN1bHRDb250YWluZXJfUU1TUlFILmNyZWF0ZUNvcHkoKSkNCiAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUVNUQSIsIHJlc3VsdENvbnRhaW5lcl9RTVNSUUguZ2V0KCJSSFFTVEEiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUUFQUiIsIHJlc3VsdENvbnRhaW5lcl9RTVNSUUguZ2V0KCJSSFFBUFIiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUVJJRCIsIHJlc3VsdENvbnRhaW5lcl9RTVNSUUguZ2V0KCJSSFFSSUQiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgYWN0aW9uUU1TUlFILnJlYWRBbGwoY29udGFpbmVyUU1TUlFILCAzLCAxLCByZWFkQWxsUmVjb3JkUU1TUlFIKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBTZXQgb3V0cHV0IGRhdGEgZnJvbSBmb3VuZCBjb250YWluZXJRTVNSUUgNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJRU1RBIiwgY29udGFpbmVyUU1TUlFILmdldCgiUkhRU1RBIikudG9TdHJpbmcoKS50cmltKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUUFQUiIsIGNvbnRhaW5lclFNU1JRSC5nZXQoIlJIUUFQUiIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIlFSSUQiLCBjb250YWluZXJRTVNSUUguZ2V0KCJSSFFSSUQiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvLyBGaW5kIGNvcnJlc3BvbmRpbmcgcmVjb3JkIGluIE1JTE9NQSBsaXN0DQogICAgICAgICAgREJDb250YWluZXIgY29udGFpbmVyTUlMT01BID0gbWlsb21hTGlzdC5maW5kIHsNCiAgICAgICAgICAgIGl0LmdldFN0cmluZygiTE1JVE5PIikgPT0gSVROTyAmJiBpdC5nZXRTdHJpbmcoIkxNQkFOTyIpID09IGJhc2VCQU5PDQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKGNvbnRhaW5lck1JTE9NQSA9PSBudWxsKSB7DQogICAgICAgICAgICAvLyBSZWFkIHJlY29yZCBmcm9tIE1JTE9NQSB0YWJsZSBpZiBub3QgZm91bmQNCiAgICAgICAgICAgIERCQWN0aW9uIGFjdGlvbk1JTE9NQSA9IGRhdGFiYXNlLnRhYmxlKCJNSUxPTUEiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkxNTUZEVCIsICJMTVJFREEiLCAiTE1FWFBJIiwgIkxNRkFDSSIpLmJ1aWxkKCkNCiAgICAgICAgICAgIGNvbnRhaW5lck1JTE9NQSA9IGFjdGlvbk1JTE9NQS5nZXRDb250YWluZXIoKQ0KDQogICAgICAgICAgICBjb250YWluZXJNSUxPTUEuc2V0KCJMTUNPTk8iLCBpQ09OTyBhcyBpbnQpDQogICAgICAgICAgICBjb250YWluZXJNSUxPTUEuc2V0KCJMTUlUTk8iLCBJVE5PKQ0KICAgICAgICAgICAgY29udGFpbmVyTUlMT01BLnNldCgiTE1CQU5PIiwgYmFzZUJBTk8pDQoNCiAgICAgICAgICAgIC8vIENsb3N1cmUgdG8gcHJvY2VzcyBhbGwgcmVjb3JkcyBmZXRjaGVkIGZyb20gTUlMT01BDQogICAgICAgICAgICBDbG9zdXJlPD8+IHJlYWRBbGxSZWNvcmRNSUxPTUEgPSB7DQogICAgICAgICAgICAgIERCQ29udGFpbmVyIHJlc3VsdENvbnRhaW5lcl9NSUxPTUEgLT4NCiAgICAgICAgICAgICAgICBtaWxvbWFMaXN0LmFkZChyZXN1bHRDb250YWluZXJfTUlMT01BLmNyZWF0ZUNvcHkoKSkNCiAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiTUZEVCIsIHJlc3VsdENvbnRhaW5lcl9NSUxPTUEuZ2V0KCJMTU1GRFQiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUkVEQSIsIHJlc3VsdENvbnRhaW5lcl9NSUxPTUEuZ2V0KCJMTVJFREEiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiRVhQSSIsIHJlc3VsdENvbnRhaW5lcl9NSUxPTUEuZ2V0KCJMTUVYUEkiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICAgICAgICBGQUNJID0gcmVzdWx0Q29udGFpbmVyX01JTE9NQS5nZXRTdHJpbmcoIkxNRkFDSSIpLnRyaW0oKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBhY3Rpb25NSUxPTUEucmVhZEFsbChjb250YWluZXJNSUxPTUEsIDMsIDEsIHJlYWRBbGxSZWNvcmRNSUxPTUEpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIFNldCBvdXRwdXQgZGF0YSBmcm9tIGZvdW5kIGNvbnRhaW5lck1JTE9NQQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIk1GRFQiLCBjb250YWluZXJNSUxPTUEuZ2V0KCJMTU1GRFQiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJSRURBIiwgY29udGFpbmVyTUlMT01BLmdldCgiTE1SRURBIikudG9TdHJpbmcoKS50cmltKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiRVhQSSIsIGNvbnRhaW5lck1JTE9NQS5nZXQoIkxNRVhQSSIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgRkFDSSA9IGNvbnRhaW5lck1JTE9NQS5nZXRTdHJpbmcoIkxNRkFDSSIpLnRyaW0oKQ0KICAgICAgICAgIH0NCiAgICAgICAgICANCiAgICAgICAgICANCg0KICAgICAgICAgIC8vIEZpbmQgY29ycmVzcG9uZGluZyByZWNvcmQgaW4gTUlUQkFMIGxpc3QNCiAgICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSVRCQUwgPSBtaXRiYWxMaXN0LmZpbmQgew0KICAgICAgICAgICAgaXQuZ2V0U3RyaW5nKCJNQldITE8iKSA9PSBXSExPICYmIGl0LmdldFN0cmluZygiTUJJVE5PIikgPT0gSVROTw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChjb250YWluZXJNSVRCQUwgPT0gbnVsbCkgew0KICAgICAgICAgICAgLy8gUmVhZCByZWNvcmQgZnJvbSBNSVRCQUwgdGFibGUgaWYgbm90IGZvdW5kDQogICAgICAgICAgICBEQkFjdGlvbiBhY3Rpb25NSVRCQUwgPSBkYXRhYmFzZS50YWJsZSgiTUlUQkFMIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNQkFHRFkiLCAiTUJBR0hPIiwgIk1CQUdNSSIpLmJ1aWxkKCkNCiAgICAgICAgICAgIGNvbnRhaW5lck1JVEJBTCA9IGFjdGlvbk1JVEJBTC5nZXRDb250YWluZXIoKQ0KDQogICAgICAgICAgICBjb250YWluZXJNSVRCQUwuc2V0KCJNQkNPTk8iLCBpQ09OTyBhcyBpbnQpDQogICAgICAgICAgICBjb250YWluZXJNSVRCQUwuc2V0KCJNQldITE8iLCBXSExPKQ0KICAgICAgICAgICAgY29udGFpbmVyTUlUQkFMLnNldCgiTUJJVE5PIiwgSVROTykNCg0KICAgICAgICAgICAgLy8gQ2xvc3VyZSB0byBwcm9jZXNzIGFsbCByZWNvcmRzIGZldGNoZWQgZnJvbSBNSVRCQUwNCiAgICAgICAgICAgIENsb3N1cmU8Pz4gcmVhZEFsbFJlY29yZE1JVEJBTCA9IHsNCiAgICAgICAgICAgICAgREJDb250YWluZXIgcmVzdWx0Q29udGFpbmVyX01JTE9NQSAtPg0KICAgICAgICAgICAgICAgIG1pdGJhbExpc3QuYWRkKHJlc3VsdENvbnRhaW5lcl9NSUxPTUEuY3JlYXRlQ29weSgpKQ0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJBR0RZIiwgcmVzdWx0Q29udGFpbmVyX01JTE9NQS5nZXQoIk1CQUdEWSIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJBR0hPIiwgcmVzdWx0Q29udGFpbmVyX01JTE9NQS5nZXQoIk1CQUdITyIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJBR01JIiwgcmVzdWx0Q29udGFpbmVyX01JTE9NQS5nZXQoIk1CQUdNSSIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBhY3Rpb25NSVRCQUwucmVhZEFsbChjb250YWluZXJNSVRCQUwsIDMsIDEsIHJlYWRBbGxSZWNvcmRNSVRCQUwpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIFNldCBvdXRwdXQgZGF0YSBmcm9tIGZvdW5kIGNvbnRhaW5lck1JVEJBTA0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIkFHRFkiLCBjb250YWluZXJNSVRCQUwuZ2V0KCJNQkFHRFkiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJBR0hPIiwgY29udGFpbmVyTUlUQkFMLmdldCgiTUJBR0hPIikudG9TdHJpbmcoKS50cmltKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiQUdNSSIsIGNvbnRhaW5lck1JVEJBTC5nZXQoIk1CQUdNSSIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIEZpbmQgY29ycmVzcG9uZGluZyByZWNvcmQgaW4gTUlUUExPIGxpc3QNCiAgICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSVRQTE8gPSBtaXRwbG9MaXN0LmZpbmQgew0KICAgICAgICAgICAgaXQuZ2V0U3RyaW5nKCJNT1dITE8iKSA9PSBXSExPICYmIGl0LmdldFN0cmluZygiTU9JVE5PIikgPT0gSVROTw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChjb250YWluZXJNSVRQTE8gPT0gbnVsbCkgew0KICAgICAgICAgICAgLy8gUmVhZCByZWNvcmQgZnJvbSBNSVRQTE8gdGFibGUgaWYgbm90IGZvdW5kDQogICAgICAgICAgICBEQkFjdGlvbiBhY3Rpb25NSVRQTE8gPSBkYXRhYmFzZS50YWJsZSgiTUlUUExPIikuaW5kZXgoIjIwIikuc2VsZWN0aW9uKCJNT1JGVFgiKS5idWlsZCgpDQogICAgICAgICAgICBjb250YWluZXJNSVRQTE8gPSBhY3Rpb25NSVRQTE8uZ2V0Q29udGFpbmVyKCkNCg0KICAgICAgICAgICAgY29udGFpbmVyTUlUUExPLnNldCgiTU9DT05PIiwgaUNPTk8gYXMgaW50KQ0KICAgICAgICAgICAgY29udGFpbmVyTUlUUExPLnNldCgiTU9XSExPIiwgV0hMTykNCiAgICAgICAgICAgIGNvbnRhaW5lck1JVFBMTy5zZXQoIk1PSVROTyIsIElUTk8pDQogICAgICAgICAgICBjb250YWluZXJNSVRQTE8uc2V0KCJNT09SQ0EiLCAnOTYxJykNCg0KICAgICAgICAgICAgLy8gQ2xvc3VyZSB0byBwcm9jZXNzIGFsbCByZWNvcmRzIGZldGNoZWQgZnJvbSBNSVRQTE8NCiAgICAgICAgICAgIENsb3N1cmU8Pz4gcmVhZEFsbFJlY29yZE1JVFBMTyA9IHsNCiAgICAgICAgICAgICAgREJDb250YWluZXIgcmVzdWx0Q29udGFpbmVyX01JVFBMTyAtPg0KICAgICAgICAgICAgICAgIG1pdHBsb0xpc3QuYWRkKHJlc3VsdENvbnRhaW5lcl9NSVRQTE8uY3JlYXRlQ29weSgpKQ0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJSRlRYIiwgcmVzdWx0Q29udGFpbmVyX01JVFBMTy5nZXRTdHJpbmcoIk1PUkZUWCIpLnRyaW0oKSkNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgYWN0aW9uTUlUUExPLnJlYWRBbGwoY29udGFpbmVyTUlUUExPLCA0LCAxLCByZWFkQWxsUmVjb3JkTUlUUExPKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBTZXQgb3V0cHV0IGRhdGEgZnJvbSBmb3VuZCBjb250YWluZXJNSVRQTE8NCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJSRlRYIiwgY29udGFpbmVyTUlUUExPLmdldFN0cmluZygiTU9SRlRYIikudHJpbSgpKQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIEZpbmQgY29ycmVzcG9uZGluZyByZWNvcmQgaW4gTUlUVFJBIGxpc3QNCiAgICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSVRUUkEgPSBtaXR0cmFMaXN0LmZpbmQgew0KICAgICAgICAgICAgaXQuZ2V0U3RyaW5nKCJNVElUTk8iKSA9PSBJVE5PICYmIGl0LmdldFN0cmluZygiTVRCQU5PIikgPT0gQkFOTyAmJiBpdC5nZXRJbnQoIk1UVFRZUCIpID09IDE3DQogICAgICAgICAgfQ0KDQogICAgICAgICAgU3RyaW5nIFJJRE4gPSAiIg0KICAgICAgICAgIFN0cmluZyBNSVRUUkFfV0hMTyA9ICIiDQoNCiAgICAgICAgICBpZiAoY29udGFpbmVyTUlUVFJBID09IG51bGwpIHsNCiAgICAgICAgICAgIC8vIFJlYWQgcmVjb3JkIGZyb20gTUlUVFJBIHRhYmxlIGlmIG5vdCBmb3VuZA0KICAgICAgICAgICAgREJBY3Rpb24gYWN0aW9uTUlUVFJBID0gZGF0YWJhc2UudGFibGUoIk1JVFRSQSIpLmluZGV4KCIyMCIpLnNlbGVjdGlvbigiTVRSSUROIiwgIk1UV0hMTyIpLmJ1aWxkKCkNCiAgICAgICAgICAgIGNvbnRhaW5lck1JVFRSQSA9IGFjdGlvbk1JVFRSQS5nZXRDb250YWluZXIoKQ0KDQogICAgICAgICAgICBjb250YWluZXJNSVRUUkEuc2V0KCJNVENPTk8iLCBpQ09OTyBhcyBpbnQpDQogICAgICAgICAgICBjb250YWluZXJNSVRUUkEuc2V0KCJNVElUTk8iLCBJVE5PKQ0KICAgICAgICAgICAgY29udGFpbmVyTUlUVFJBLnNldCgiTVRCQU5PIiwgYmFzZUJBTk8pDQogICAgICAgICAgICBjb250YWluZXJNSVRUUkEuc2V0KCJNVFRUWVAiLCAxNykNCg0KICAgICAgICAgICAgLy8gQ2xvc3VyZSB0byBwcm9jZXNzIGFsbCByZWNvcmRzIGZldGNoZWQgZnJvbSBNSVRUUkENCiAgICAgICAgICAgIENsb3N1cmU8Pz4gcmVhZEFsbFJlY29yZE1JVFRSQSA9IHsNCiAgICAgICAgICAgICAgREJDb250YWluZXIgcmVzdWx0Q29udGFpbmVyX01JVFRSQSAtPg0KICAgICAgICAgICAgICAgIG1pdHRyYUxpc3QuYWRkKHJlc3VsdENvbnRhaW5lcl9NSVRUUkEuY3JlYXRlQ29weSgpKQ0KDQogICAgICAgICAgICAgICAgUklETiA9IHJlc3VsdENvbnRhaW5lcl9NSVRUUkEuZ2V0U3RyaW5nKCJNVFJJRE4iKS50cmltKCkNCiAgICAgICAgICAgICAgICBNSVRUUkFfV0hMTyA9IHJlc3VsdENvbnRhaW5lcl9NSVRUUkEuZ2V0U3RyaW5nKCJNVFdITE8iKS50cmltKCkNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgYWN0aW9uTUlUVFJBLnJlYWRBbGwoY29udGFpbmVyTUlUVFJBLCA0LCAxLCByZWFkQWxsUmVjb3JkTUlUVFJBKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBTZXQgUklETiBhbmQgTUlUVFJBX1dITE8gZnJvbSBmb3VuZCBjb250YWluZXJNSVRUUkENCiAgICAgICAgICAgIFJJRE4gPSBjb250YWluZXJNSVRUUkEuZ2V0U3RyaW5nKCJNVFJJRE4iKS50cmltKCkNCiAgICAgICAgICAgIE1JVFRSQV9XSExPID0gY29udGFpbmVyTUlUVFJBLmdldFN0cmluZygiTVRXSExPIikudHJpbSgpDQogICAgICAgICAgfQ0KDQogICAgICAgICAgDQoNCiAgICAgICAgICAvLyBGaW5kIGNvcnJlc3BvbmRpbmcgcmVjb3JkIGluIE1JVFdITCBsaXN0DQogICAgICAgICAgREJDb250YWluZXIgY29udGFpbmVyTUlUV0hMID0gbWl0d2hsTGlzdC5maW5kIHsNCiAgICAgICAgICAgIGl0LmdldFN0cmluZygiTVdXSExPIikgPT0gTUlUVFJBX1dITE8NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoY29udGFpbmVyTUlUV0hMID09IG51bGwpIHsNCiAgICAgICAgICAgIC8vIFJlYWQgcmVjb3JkIGZyb20gTUlUV0hMIHRhYmxlIGlmIG5vdCBmb3VuZA0KICAgICAgICAgICAgREJBY3Rpb24gYWN0aW9uTUlUV0hMID0gZGF0YWJhc2UudGFibGUoIk1JVFdITCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTVdGQUNJIikuYnVpbGQoKQ0KICAgICAgICAgICAgY29udGFpbmVyTUlUV0hMID0gYWN0aW9uTUlUV0hMLmdldENvbnRhaW5lcigpDQoNCiAgICAgICAgICAgIGNvbnRhaW5lck1JVFdITC5zZXQoIk1XQ09OTyIsIGlDT05PIGFzIGludCkNCiAgICAgICAgICAgIGNvbnRhaW5lck1JVFdITC5zZXQoIk1XV0hMTyIsIE1JVFRSQV9XSExPKQ0KDQogICAgICAgICAgICAvLyBDaGVjayBpZiByZWFkaW5nIE1JVFdITCByZWNvcmQgaXMgc3VjY2Vzc2Z1bCBhbmQgYWRkIHRvIGxpc3QNCiAgICAgICAgICAgIGlmIChhY3Rpb25NSVRXSEwucmVhZChjb250YWluZXJNSVRXSEwpKSB7DQogICAgICAgICAgICAgIG1pdHdobExpc3QuYWRkKGNvbnRhaW5lck1JVFdITCkNCiAgICAgICAgICAgICAgRkFDSSA9IGNvbnRhaW5lck1JVFdITC5nZXRTdHJpbmcoIk1XRkFDSSIpLnRyaW0oKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBTZXQgRkFDSSBmcm9tIGZvdW5kIGNvbnRhaW5lck1JVFdITA0KICAgICAgICAgICAgRkFDSSA9IGNvbnRhaW5lck1JVFdITC5nZXRTdHJpbmcoIk1XRkFDSSIpLnRyaW0oKQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIEZpbmQgY29ycmVzcG9uZGluZyByZWNvcmQgaW4gTVdPSEVEIGxpc3QNCiAgICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXJNV09IRUQgPSBtd29oZWRMaXN0LmZpbmQgew0KICAgICAgICAgICAgaXQuZ2V0U3RyaW5nKCJWSEZBQ0kiKSA9PSBGQUNJICYmIGl0LmdldFN0cmluZygiVkhQUk5PIikgPT0gSVROTyAmJiBpdC5nZXRTdHJpbmcoIlZITUZOTyIpID09IFJJRE4NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBTdHJpbmcgTUZOTyA9ICIiDQoNCiAgICAgICAgICBpZiAoY29udGFpbmVyTVdPSEVEID09IG51bGwpIHsNCiAgICAgICAgICAgIC8vIFJlYWQgcmVjb3JkIGZyb20gTVdPSEVEIHRhYmxlIGlmIG5vdCBmb3VuZA0KICAgICAgICAgICAgREJBY3Rpb24gYWN0aW9uTVdPSEVEID0gZGF0YWJhc2UudGFibGUoIk1XT0hFRCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiVkhXSExPIiwgIlZITUZOTyIpLmJ1aWxkKCkNCiAgICAgICAgICAgIGNvbnRhaW5lck1XT0hFRCA9IGFjdGlvbk1XT0hFRC5nZXRDb250YWluZXIoKQ0KDQogICAgICAgICAgICBjb250YWluZXJNV09IRUQuc2V0KCJWSENPTk8iLCBpQ09OTyBhcyBpbnQpDQogICAgICAgICAgICBjb250YWluZXJNV09IRUQuc2V0KCJWSEZBQ0kiLCBGQUNJKQ0KICAgICAgICAgICAgY29udGFpbmVyTVdPSEVELnNldCgiVkhQUk5PIiwgSVROTykNCiAgICAgICAgICAgIGNvbnRhaW5lck1XT0hFRC5zZXQoIlZITUZOTyIsIFJJRE4pDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmKGFjdGlvbk1XT0hFRC5yZWFkKGNvbnRhaW5lck1XT0hFRCkpIHsNCiAgICAgICAgICAgICAgbXdvaGVkTGlzdC5hZGQoY29udGFpbmVyTVdPSEVEKQ0KICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiTVdITCIsIGNvbnRhaW5lck1XT0hFRC5nZXRTdHJpbmcoIlZIV0hMTyIpLnRyaW0oKSkNCiAgICAgICAgICAgICAgTUZOTyA9IGNvbnRhaW5lck1XT0hFRC5nZXRTdHJpbmcoIlZITUZOTyIpLnRyaW0oKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBTZXQgTVdITCBmcm9tIGZvdW5kIGNvbnRhaW5lck1XT0hFRA0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIk1XSEwiLCBjb250YWluZXJNV09IRUQuZ2V0U3RyaW5nKCJWSFdITE8iKS50cmltKCkpDQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8gRmluZCBjb3JyZXNwb25kaW5nIHJlY29yZCBpbiBNV09PUEUgbGlzdA0KICAgICAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1XT09QRSA9IG13b29wZUxpc3QuZmluZCB7DQogICAgICAgICAgICBpdC5nZXRTdHJpbmcoIlZPRkFDSSIpID09IEZBQ0kgJiYgaXQuZ2V0U3RyaW5nKCJWT1BSTk8iKSA9PSBJVE5PICYmIGl0LmdldFN0cmluZygiVk9NRk5PIikgPT0gTUZOTw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChjb250YWluZXJNV09PUEUgPT0gbnVsbCkgew0KICAgICAgICAgICAgLy8gUmVhZCByZWNvcmQgZnJvbSBNV09PUEUgdGFibGUgaWYgbm90IGZvdW5kDQogICAgICAgICAgICBEQkFjdGlvbiBhY3Rpb25NV09PUEUgPSBkYXRhYmFzZS50YWJsZSgiTVdPT1BFIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJWT1BMR1IiKS5idWlsZCgpDQogICAgICAgICAgICBjb250YWluZXJNV09PUEUgPSBhY3Rpb25NV09PUEUuZ2V0Q29udGFpbmVyKCkNCg0KICAgICAgICAgICAgY29udGFpbmVyTVdPT1BFLnNldCgiVk9DT05PIiwgaUNPTk8gYXMgaW50KQ0KICAgICAgICAgICAgY29udGFpbmVyTVdPT1BFLnNldCgiVk9GQUNJIiwgRkFDSSkNCiAgICAgICAgICAgIGNvbnRhaW5lck1XT09QRS5zZXQoIlZPUFJOTyIsIElUTk8pDQogICAgICAgICAgICBjb250YWluZXJNV09PUEUuc2V0KCJWT01GTk8iLCBNRk5PKQ0KDQogICAgICAgICAgICAvLyBDbG9zdXJlIHRvIHByb2Nlc3MgYWxsIHJlY29yZHMgZmV0Y2hlZCBmcm9tIE1XT09QRQ0KICAgICAgICAgICAgQ2xvc3VyZTw/PiByZWFkQWxsUmVjb3JkTVdPT1BFID0gew0KICAgICAgICAgICAgICBEQkNvbnRhaW5lciByZXN1bHRDb250YWluZXJfTVdPT1BFIC0+DQogICAgICAgICAgICAgICAgbXdvb3BlTGlzdC5hZGQocmVzdWx0Q29udGFpbmVyX01XT09QRS5jcmVhdGVDb3B5KCkpDQogICAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIlBMR1IiLCByZXN1bHRDb250YWluZXJfTVdPT1BFLmdldFN0cmluZygiVk9QTEdSIikudHJpbSgpKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBhY3Rpb25NV09PUEUucmVhZEFsbChjb250YWluZXJNV09PUEUsIDQsIDEsIHJlYWRBbGxSZWNvcmRNV09PUEUpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIFNldCBQTEdSIGZyb20gZm91bmQgY29udGFpbmVyTVdPT1BFDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUExHUiIsIGNvbnRhaW5lck1XT09QRS5nZXRTdHJpbmcoIlZPUExHUiIpLnRyaW0oKSk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8gV3JpdGUgb3V0cHV0IGRhdGEgdG8gTTMNCiAgICAgICAgICBtaS53cml0ZSgpDQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyBSZWFkIGFsbCByZWNvcmRzIGZyb20gTUlUTE9DIHRhYmxlDQogICAgYWN0aW9uTUlUTE9DLnJlYWRBbGwoY29udGFpbmVyTUlUTE9DLCAxLCAxMDAwLCByZWFkQWxsUmVjb3Jkc01JVExPQykNCiAgfQ0KDQogIC8qKg0KICAgKiBMaXN0cyB2YWxpZCBpdGVtcyBmcm9tIE1JVE1BUyB0YWJsZS4NCiAgICoNCiAgICogQHJldHVybiBMaXN0PERCQ29udGFpbmVyPiBMaXN0IG9mIGFsbCB2YWxpZCBpdGVtcyBmZXRjaGVkIGZyb20gTUlUTUFTLg0KICAgKi8NCiAgcHJpdmF0ZSBMaXN0PERCQ29udGFpbmVyPiBsaXN0TUlUTUFTKCkgew0KICAgIExpc3Q8REJDb250YWluZXI+IGl0ZW1zTGlzdCA9IG5ldyBBcnJheUxpc3Q8PigpDQoNCiAgICAvLyBEZWZpbmUgYWN0aW9uIHRvIGZldGNoIHJlY29yZHMgZnJvbSBNSVRNQVMgdGFibGUNCiAgICBEQkFjdGlvbiBhY3Rpb25NSVRNQVMgPSBkYXRhYmFzZS50YWJsZSgiTUlUTUFTIikuaW5kZXgoIjcwIikuc2VsZWN0aW9uKCJNTUlURFMiLCAiTU1JVE5PIiwgIk1NUU1HUCIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSVRNQVMgPSBhY3Rpb25NSVRNQVMuZ2V0Q29udGFpbmVyKCkNCg0KICAgIGNvbnRhaW5lck1JVE1BUy5zZXQoIk1NQ09OTyIsIGlDT05PIGFzIGludCkNCiAgICBjb250YWluZXJNSVRNQVMuc2V0KCJNTUlUVFkiLCAiRkciKQ0KDQogICAgLy8gQ2xvc3VyZSB0byBwcm9jZXNzIGFsbCByZWNvcmRzIGZldGNoZWQgZnJvbSBNSVRNQVMNCiAgICBDbG9zdXJlPD8+IHJlYWRBbGxSZWNvcmRNSVRNQVMgPSB7DQogICAgICBEQkNvbnRhaW5lciByZXN1bHRDb250YWluZXIgLT4NCiAgICAgICAgaXRlbXNMaXN0LmFkZChyZXN1bHRDb250YWluZXIuY3JlYXRlQ29weSgpKQ0KICAgIH0NCg0KICAgIC8vIFJlYWQgYWxsIHJlY29yZHMgZnJvbSBNSVRNQVMgdGFibGUNCiAgICBhY3Rpb25NSVRNQVMucmVhZEFsbChjb250YWluZXJNSVRNQVMsIDIsIDEwMDAwLCByZWFkQWxsUmVjb3JkTUlUTUFTKQ0KDQogICAgcmV0dXJuIGl0ZW1zTGlzdA0KICB9DQp9DQo="}}}