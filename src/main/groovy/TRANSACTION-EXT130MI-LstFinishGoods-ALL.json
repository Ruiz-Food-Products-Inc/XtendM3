{"programModules":{"EXT130MI":{"program":"EXT130MI","triggers":{},"transactions":{"LstFinishGoods":{"sourceUuid":"26f1e050-a265-4af6-b81d-9c43636d81b2","name":"LstFinishGoods","program":"EXT130MI","description":"List Finish Goods","active":true,"multi":true,"modified":1721770227045,"modifiedBy":"900046","outputFields":[{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"ITNO","description":"Item number","length":15,"mandatory":false,"type":"A"},{"name":"ITDS","description":"Name","length":60,"mandatory":false,"type":"A"},{"name":"QMGP","description":"Quality group","length":10,"mandatory":false,"type":"A"},{"name":"BANO","description":"Lot number","length":20,"mandatory":false,"type":"A"},{"name":"CAMU","description":"Container","length":20,"mandatory":false,"type":"A"},{"name":"STAS","description":"Status - balance ID","length":1,"mandatory":false,"type":"A"},{"name":"QSTA","description":"QI request status","length":1,"mandatory":false,"type":"N"},{"name":"MFDT","description":"Manufacturing date","length":8,"mandatory":false,"type":"N"},{"name":"REDA","description":"Receipt date","length":8,"mandatory":false,"type":"N"},{"name":"PLGR","description":"Work center","length":8,"mandatory":false,"type":"A"},{"name":"EXPI","description":"Expiration date","length":8,"mandatory":false,"type":"N"},{"name":"AGDY","description":"Aging days","length":5,"mandatory":false,"type":"N"},{"name":"AGHO","description":"Aging hours","length":4,"mandatory":false,"type":"N"},{"name":"AGMI","description":"Aging minutes","length":2,"mandatory":false,"type":"N"},{"name":"MWHL","description":"Manufacturing Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"BREM","description":"Remark","length":20,"mandatory":false,"type":"A"},{"name":"QAPR","description":"QI request approval status","length":1,"mandatory":false,"type":"N"},{"name":"RFTX","description":"Reference text","length":40,"mandatory":false,"type":"A"},{"name":"STQT","description":"On-hand balance approved","length":15,"mandatory":false,"type":"N"},{"name":"QRID","description":"QI request ID","length":8,"mandatory":false,"type":"A"},{"name":"QIAD","description":"Quality inspection approval date","length":8,"mandatory":false,"type":"N"},{"name":"PRDT","description":"Priority date","length":8,"mandatory":false,"type":"N"}],"inputFields":[{"name":"CONO","description":"Company","length":3,"mandatory":true,"type":"A"}],"utilities":["DateUtil"],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"26f1e050-a265-4af6-b81d-9c43636d81b2":{"uuid":"26f1e050-a265-4af6-b81d-9c43636d81b2","updated":1721966644646,"updatedBy":"900046","created":1720721530265,"createdBy":"900046","apiVersion":"0.21","beVersion":"16.0.0.20240418165458.8","language":"GROOVY","codeHash":"667F6986F27232FC991F54A9C0B292B5FDA7690959F2DB17D251D3EEA3EB0C0F","code":"LyoqDQogKiBSRUFETUUNCiAqIExpc3QgcmVjb3JkcyBmb3IgRmluaXNoZWQgR29vZHMgcGFuZWwgaW4gdGhlIFFNUyBhcHANCiAqDQogKiBOYW1lOiBFWFQxMzBNSS5Mc3RGaW5pc2hlZEdvb2RzDQogKiBEZXNjcmlwdGlvbjogTGlzdCByZWNvcmRzIGZvciBGaW5pc2hlZCBHb29kcyBwYW5lbCBpbiB0aGUgUU1TIGFwcA0KICogIERhdGUgICAgICBDaGFuZ2VkIEJ5ICAgICAgRGVzY3JpcHRpb24NCiAqIDIwMjQwNzIwCSAgQUpBWVkgICAgICAgIAlMaXN0IHJlY29yZHMgZm9yIEZpbmlzaGVkIEdvb2RzIHBhbmVsIGluIHRoZSBRTVMgYXBwDQogKiAyMDI0MDcyMwkgIEFKQVlZICAgICAgICAJQ29kZSBjbGVhbnVwDQogKi8NCg0KcHVibGljIGNsYXNzIExzdEZpbmlzaEdvb2RzIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7DQogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkNCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQ0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQ0KICBwcml2YXRlIGZpbmFsIFV0aWxpdHlBUEkgdXRpbGl0eQ0KDQogIC8vIElucHV0IGZpZWxkcw0KICBwcml2YXRlIFN0cmluZyBpQ09OTw0KICBwcml2YXRlIFN0cmluZyBGQUNJDQoNCiAgLy8gTGlzdHMgdG8gc3RvcmUgZGF0YWJhc2UgcXVlcnkgcmVzdWx0cw0KICBwcml2YXRlIExpc3Q8REJDb250YWluZXI+IG1pdG1hc0xpc3QgPSBuZXcgQXJyYXlMaXN0PD4oKQ0KICBwcml2YXRlIExpc3Q8REJDb250YWluZXI+IHFtc3JxaExpc3QgPSBuZXcgQXJyYXlMaXN0PD4oKQ0KICBwcml2YXRlIExpc3Q8REJDb250YWluZXI+IG1pbG9tYUxpc3QgPSBuZXcgQXJyYXlMaXN0PD4oKQ0KICBwcml2YXRlIExpc3Q8REJDb250YWluZXI+IG1pdGJhbExpc3QgPSBuZXcgQXJyYXlMaXN0PD4oKQ0KICBwcml2YXRlIExpc3Q8REJDb250YWluZXI+IG1pdHBsb0xpc3QgPSBuZXcgQXJyYXlMaXN0PD4oKQ0KICBwcml2YXRlIExpc3Q8REJDb250YWluZXI+IG1pdHRyYUxpc3QgPSBuZXcgQXJyYXlMaXN0PD4oKQ0KICBwcml2YXRlIExpc3Q8REJDb250YWluZXI+IG1pdHdobExpc3QgPSBuZXcgQXJyYXlMaXN0PD4oKQ0KICBwcml2YXRlIExpc3Q8REJDb250YWluZXI+IG13b2hlZExpc3QgPSBuZXcgQXJyYXlMaXN0PD4oKQ0KICBwcml2YXRlIExpc3Q8REJDb250YWluZXI+IG13b29wZUxpc3QgPSBuZXcgQXJyYXlMaXN0PD4oKQ0KDQogIC8qKg0KICAgKiBDb25zdHJ1Y3RvciBmb3IgTHN0RmluaXNoR29vZHMgY2xhc3MuDQogICAqDQogICAqIEBwYXJhbSBtaSAgICAgICBNSUFQSSBpbnN0YW5jZSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBNMyBBUEkNCiAgICogQHBhcmFtIGRhdGFiYXNlIERhdGFiYXNlQVBJIGluc3RhbmNlIGZvciBkYXRhYmFzZSBvcGVyYXRpb25zDQogICAqIEBwYXJhbSBwcm9ncmFtICBQcm9ncmFtQVBJIGluc3RhbmNlIGZvciBwcm9ncmFtbWF0aWMgb3BlcmF0aW9ucw0KICAgKiBAcGFyYW0gdXRpbGl0eSAgVXRpbGl0eUFQSSBpbnN0YW5jZSBmb3IgdXRpbGl0eSBvcGVyYXRpb25zDQogICAqLw0KICBwdWJsaWMgTHN0RmluaXNoR29vZHMoTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBQcm9ncmFtQVBJIHByb2dyYW0sIFV0aWxpdHlBUEkgdXRpbGl0eSkgew0KICAgIHRoaXMubWkgPSBtaQ0KICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZQ0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0NCiAgICB0aGlzLnV0aWxpdHkgPSB1dGlsaXR5DQogIH0NCg0KICAvKioNCiAgICogTWFpbiBtZXRob2QgdG8gcGVyZm9ybSB0aGUgcmV0cmlldmFsIGFuZCBwcm9jZXNzaW5nIG9mIGZpbmlzaGVkIGdvb2RzIGRhdGEuDQogICAqLw0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIC8vIFJldHJpZXZlIENPTk8gZnJvbSBpbnB1dCBvciBwcm9ncmFtIGNvbnRleHQNCiAgICBpQ09OTyA9IG1pLmluLmdldCgiQ09OTyIpLnRvU3RyaW5nKCkgPT0gbnVsbCA/IHByb2dyYW0uTERBWkQuQ09OTyA6IG1pLmluLmdldCgiQ09OTyIpLnRvU3RyaW5nKCkudHJpbSgpDQoNCiAgICAvLyBSZXRyaWV2ZSBsaXN0IG9mIHZhbGlkIGl0ZW1zIGZyb20gTUlUTUFTIHRhYmxlDQogICAgbWl0bWFzTGlzdCA9IGxpc3RNSVRNQVMoKQ0KDQogICAgLy8gQ2FsY3VsYXRlIHRoZSB0aW1lc3RhbXAgZm9yIDEgZGF5IGFnbw0KICAgIGxvbmcgY3VycmVudEVwb2NoTWlsbGlzZWNvbmRzID0gdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsICJjdXJyZW50RXBvY2hNaWxsaXNlY29uZHMiKSBhcyBsb25nDQogICAgY3VycmVudEVwb2NoTWlsbGlzZWNvbmRzID0gY3VycmVudEVwb2NoTWlsbGlzZWNvbmRzIC0gKDEgKiAyNCAqIDYwICogNjAgKiAxMDAwTCkNCg0KICAgIC8vIENyZWF0ZSBleHByZXNzaW9uIGZvciBmaWx0ZXJpbmcgcmVjb3JkcyBpbiBNSVRMT0MgdGFibGUNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHByZXNzaW9uID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIk1JVExPQyIpDQogICAgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uZ2UoIk1MTE1UUyIsIGN1cnJlbnRFcG9jaE1pbGxpc2Vjb25kcy50b1N0cmluZygpKQ0KDQogICAgLy8gRGVmaW5lIGFjdGlvbiBhbmQgY29udGFpbmVyIGZvciBNSVRMT0MgdGFibGUgb3BlcmF0aW9ucw0KICAgIERCQWN0aW9uIGFjdGlvbk1JVExPQyA9IGRhdGFiYXNlLnRhYmxlKCJNSVRMT0MiKS5pbmRleCgiMTAiKS5tYXRjaGluZyhleHByZXNzaW9uKQ0KICAgICAgLnNlbGVjdGlvbigiTUxDT05PIiwgIk1MV0hMTyIsICJNTElUTk8iLCAiTUxCQU5PIiwgIk1MQ0FNVSIsICJNTFNUQVMiLCAiTUxTVFFUIiwgIk1MUFJEVCIsICJNTEJSRU0iKS5idWlsZCgpDQogICAgREJDb250YWluZXIgY29udGFpbmVyTUlUTE9DID0gYWN0aW9uTUlUTE9DLmdldENvbnRhaW5lcigpDQoNCiAgICAvLyBTZXQgQ09OTyBpbiBjb250YWluZXJNSVRMT0MNCiAgICBjb250YWluZXJNSVRMT0Muc2V0SW50KCJNTENPTk8iLCBpQ09OTyBhcyBpbnQpDQoNCiAgICAvLyBDbG9zdXJlIHRvIHByb2Nlc3MgYWxsIHJlY29yZHMgZmV0Y2hlZCBmcm9tIE1JVExPQw0KICAgIENsb3N1cmU8Pz4gcmVhZEFsbFJlY29yZHNNSVRMT0MgPSB7DQogICAgICBEQkNvbnRhaW5lciByZXN1bHRDb250YWluZXJfTUlUTE9DIC0+DQogICAgICAgIFN0cmluZyBJVE5PID0gcmVzdWx0Q29udGFpbmVyX01JVExPQy5nZXRTdHJpbmcoIk1MSVROTyIpLnRyaW0oKQ0KICAgICAgICBTdHJpbmcgQkFOTyA9IHJlc3VsdENvbnRhaW5lcl9NSVRMT0MuZ2V0U3RyaW5nKCJNTEJBTk8iKS50cmltKCkNCiAgICAgICAgU3RyaW5nIENBTVUgPSByZXN1bHRDb250YWluZXJfTUlUTE9DLmdldFN0cmluZygiTUxDQU1VIikudHJpbSgpDQogICAgICAgIFN0cmluZyBXSExPID0gcmVzdWx0Q29udGFpbmVyX01JVExPQy5nZXRTdHJpbmcoIk1MV0hMTyIpLnRyaW0oKQ0KDQogICAgICAgIC8vIEZpbmQgY29ycmVzcG9uZGluZyBpdGVtIGRldGFpbHMgaW4gTUlUTUFTIGxpc3QNCiAgICAgICAgREJDb250YWluZXIgY29udGFpbmVyTUlUTUFTID0gbWl0bWFzTGlzdC5maW5kIHsNCiAgICAgICAgICBpdC5nZXRTdHJpbmcoIk1NSVROTyIpID09IElUTk8NCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChjb250YWluZXJNSVRNQVMgIT0gbnVsbCkgew0KICAgICAgICAgIC8vIFNldCBvdXRwdXQgZGF0YSBmb3IgdGhlIGN1cnJlbnQgcmVjb3JkDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIldITE8iLCByZXN1bHRDb250YWluZXJfTUlUTE9DLmdldFN0cmluZygiTUxXSExPIikudHJpbSgpKQ0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJJVE5PIiwgSVROTykNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiQkFOTyIsIEJBTk8pDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIlNUQVMiLCByZXN1bHRDb250YWluZXJfTUlUTE9DLmdldCgiTUxTVEFTIikudG9TdHJpbmcoKS50cmltKCkpDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIlNUUVQiLCByZXN1bHRDb250YWluZXJfTUlUTE9DLmdldCgiTUxTVFFUIikudG9TdHJpbmcoKS50cmltKCkpDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIlBSRFQiLCByZXN1bHRDb250YWluZXJfTUlUTE9DLmdldCgiTUxQUkRUIikudG9TdHJpbmcoKS50cmltKCkpDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIkJSRU0iLCByZXN1bHRDb250YWluZXJfTUlUTE9DLmdldCgiTUxCUkVNIikudG9TdHJpbmcoKS50cmltKCkpDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIkNBTVUiLCByZXN1bHRDb250YWluZXJfTUlUTE9DLmdldCgiTUxDQU1VIikudG9TdHJpbmcoKS50cmltKCkpDQoNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiSVREUyIsIGNvbnRhaW5lck1JVE1BUy5nZXRTdHJpbmcoIk1NSVREUyIpLnRyaW0oKSkNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUU1HUCIsIGNvbnRhaW5lck1JVE1BUy5nZXRTdHJpbmcoIk1NUU1HUCIpLnRyaW0oKSkNCg0KICAgICAgICAgIC8vIEZpbmQgY29ycmVzcG9uZGluZyByZWNvcmQgaW4gUU1TUlFIIGxpc3QNCiAgICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXJRTVNSUUggPSBxbXNycWhMaXN0LmZpbmQgew0KICAgICAgICAgICAgaXQuZ2V0U3RyaW5nKCJSSElUTk8iKSA9PSBJVE5PICYmIGl0LmdldFN0cmluZygiUkhCQU5PIikgPT0gQkFOTw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChjb250YWluZXJRTVNSUUggPT0gbnVsbCkgew0KICAgICAgICAgICAgLy8gUmVhZCByZWNvcmQgZnJvbSBRTVNSUUggdGFibGUgaWYgbm90IGZvdW5kDQogICAgICAgICAgICBEQkFjdGlvbiBhY3Rpb25RTVNSUUggPSBkYXRhYmFzZS50YWJsZSgiUU1TUlFIIikuaW5kZXgoIjMwIikuc2VsZWN0aW9uKCJSSFFTVEEiLCAiUkhRQVBSIiwgIlJIUVJJRCIpLmJ1aWxkKCkNCiAgICAgICAgICAgIGNvbnRhaW5lclFNU1JRSCA9IGFjdGlvblFNU1JRSC5nZXRDb250YWluZXIoKQ0KDQogICAgICAgICAgICBjb250YWluZXJRTVNSUUguc2V0KCJSSENPTk8iLCBpQ09OTyBhcyBpbnQpDQogICAgICAgICAgICBjb250YWluZXJRTVNSUUguc2V0KCJSSElUTk8iLCBJVE5PKQ0KICAgICAgICAgICAgY29udGFpbmVyUU1TUlFILnNldCgiUkhCQU5PIiwgQkFOTykNCg0KICAgICAgICAgICAgLy8gQ2xvc3VyZSB0byBwcm9jZXNzIGFsbCByZWNvcmRzIGZldGNoZWQgZnJvbSBRTVNSUUgNCiAgICAgICAgICAgIENsb3N1cmU8Pz4gcmVhZEFsbFJlY29yZFFNU1JRSCA9IHsNCiAgICAgICAgICAgICAgREJDb250YWluZXIgcmVzdWx0Q29udGFpbmVyX1FNU1JRSCAtPg0KICAgICAgICAgICAgICAgIHFtc3JxaExpc3QuYWRkKHJlc3VsdENvbnRhaW5lcl9RTVNSUUguY3JlYXRlQ29weSgpKQ0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJRU1RBIiwgcmVzdWx0Q29udGFpbmVyX1FNU1JRSC5nZXQoIlJIUVNUQSIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJRQVBSIiwgcmVzdWx0Q29udGFpbmVyX1FNU1JRSC5nZXQoIlJIUUFQUiIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJRUklEIiwgcmVzdWx0Q29udGFpbmVyX1FNU1JRSC5nZXQoIlJIUVJJRCIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBhY3Rpb25RTVNSUUgucmVhZEFsbChjb250YWluZXJRTVNSUUgsIDIsIDEsIHJlYWRBbGxSZWNvcmRRTVNSUUgpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIFNldCBvdXRwdXQgZGF0YSBmcm9tIGZvdW5kIGNvbnRhaW5lclFNU1JRSA0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIlFTVEEiLCBjb250YWluZXJRTVNSUUguZ2V0KCJSSFFTVEEiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJRQVBSIiwgY29udGFpbmVyUU1TUlFILmdldCgiUkhRQVBSIikudG9TdHJpbmcoKS50cmltKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUVJJRCIsIGNvbnRhaW5lclFNU1JRSC5nZXQoIlJIUVJJRCIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIEZpbmQgY29ycmVzcG9uZGluZyByZWNvcmQgaW4gTUlMT01BIGxpc3QNCiAgICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSUxPTUEgPSBtaWxvbWFMaXN0LmZpbmQgew0KICAgICAgICAgICAgaXQuZ2V0U3RyaW5nKCJMTUlUTk8iKSA9PSBJVE5PICYmIGl0LmdldFN0cmluZygiTE1CQU5PIikgPT0gQkFOTw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChjb250YWluZXJNSUxPTUEgPT0gbnVsbCkgew0KICAgICAgICAgICAgLy8gUmVhZCByZWNvcmQgZnJvbSBNSUxPTUEgdGFibGUgaWYgbm90IGZvdW5kDQogICAgICAgICAgICBEQkFjdGlvbiBhY3Rpb25NSUxPTUEgPSBkYXRhYmFzZS50YWJsZSgiTUlMT01BIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJMTU1GRFQiLCAiTE1SRURBIiwgIkxNRVhQSSIpLmJ1aWxkKCkNCiAgICAgICAgICAgIGNvbnRhaW5lck1JTE9NQSA9IGFjdGlvbk1JTE9NQS5nZXRDb250YWluZXIoKQ0KDQogICAgICAgICAgICBjb250YWluZXJNSUxPTUEuc2V0KCJMTUNPTk8iLCBpQ09OTyBhcyBpbnQpDQogICAgICAgICAgICBjb250YWluZXJNSUxPTUEuc2V0KCJMTUlUTk8iLCBJVE5PKQ0KICAgICAgICAgICAgY29udGFpbmVyTUlMT01BLnNldCgiTE1CQU5PIiwgQkFOTykNCg0KICAgICAgICAgICAgLy8gQ2xvc3VyZSB0byBwcm9jZXNzIGFsbCByZWNvcmRzIGZldGNoZWQgZnJvbSBNSUxPTUENCiAgICAgICAgICAgIENsb3N1cmU8Pz4gcmVhZEFsbFJlY29yZE1JTE9NQSA9IHsNCiAgICAgICAgICAgICAgREJDb250YWluZXIgcmVzdWx0Q29udGFpbmVyX01JTE9NQSAtPg0KICAgICAgICAgICAgICAgIG1pbG9tYUxpc3QuYWRkKHJlc3VsdENvbnRhaW5lcl9NSUxPTUEuY3JlYXRlQ29weSgpKQ0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJNRkRUIiwgcmVzdWx0Q29udGFpbmVyX01JTE9NQS5nZXQoIkxNTUZEVCIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJSRURBIiwgcmVzdWx0Q29udGFpbmVyX01JTE9NQS5nZXQoIkxNUkVEQSIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJFWFBJIiwgcmVzdWx0Q29udGFpbmVyX01JTE9NQS5nZXQoIkxNRVhQSSIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBhY3Rpb25NSUxPTUEucmVhZEFsbChjb250YWluZXJNSUxPTUEsIDIsIDEsIHJlYWRBbGxSZWNvcmRNSUxPTUEpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIFNldCBvdXRwdXQgZGF0YSBmcm9tIGZvdW5kIGNvbnRhaW5lck1JTE9NQQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIk1GRFQiLCBjb250YWluZXJNSUxPTUEuZ2V0KCJMTU1GRFQiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJSRURBIiwgY29udGFpbmVyTUlMT01BLmdldCgiTE1SRURBIikudG9TdHJpbmcoKS50cmltKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiRVhQSSIsIGNvbnRhaW5lck1JTE9NQS5nZXQoIkxNRVhQSSIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIEZpbmQgY29ycmVzcG9uZGluZyByZWNvcmQgaW4gTUlUQkFMIGxpc3QNCiAgICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSVRCQUwgPSBtaXRiYWxMaXN0LmZpbmQgew0KICAgICAgICAgICAgaXQuZ2V0U3RyaW5nKCJNQldITE8iKSA9PSBXSExPICYmIGl0LmdldFN0cmluZygiTUJJVE5PIikgPT0gSVROTw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChjb250YWluZXJNSVRCQUwgPT0gbnVsbCkgew0KICAgICAgICAgICAgLy8gUmVhZCByZWNvcmQgZnJvbSBNSVRCQUwgdGFibGUgaWYgbm90IGZvdW5kDQogICAgICAgICAgICBEQkFjdGlvbiBhY3Rpb25NSVRCQUwgPSBkYXRhYmFzZS50YWJsZSgiTUlUQkFMIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNQkFHRFkiLCAiTUJBR0hPIiwgIk1CQUdNSSIpLmJ1aWxkKCkNCiAgICAgICAgICAgIGNvbnRhaW5lck1JVEJBTCA9IGFjdGlvbk1JVEJBTC5nZXRDb250YWluZXIoKQ0KDQogICAgICAgICAgICBjb250YWluZXJNSVRCQUwuc2V0KCJNQkNPTk8iLCBpQ09OTyBhcyBpbnQpDQogICAgICAgICAgICBjb250YWluZXJNSVRCQUwuc2V0KCJNQldITE8iLCBXSExPKQ0KICAgICAgICAgICAgY29udGFpbmVyTUlUQkFMLnNldCgiTUJJVE5PIiwgSVROTykNCg0KICAgICAgICAgICAgLy8gQ2xvc3VyZSB0byBwcm9jZXNzIGFsbCByZWNvcmRzIGZldGNoZWQgZnJvbSBNSVRCQUwNCiAgICAgICAgICAgIENsb3N1cmU8Pz4gcmVhZEFsbFJlY29yZE1JVEJBTCA9IHsNCiAgICAgICAgICAgICAgREJDb250YWluZXIgcmVzdWx0Q29udGFpbmVyX01JTE9NQSAtPg0KICAgICAgICAgICAgICAgIG1pdGJhbExpc3QuYWRkKHJlc3VsdENvbnRhaW5lcl9NSUxPTUEuY3JlYXRlQ29weSgpKQ0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJBR0RZIiwgcmVzdWx0Q29udGFpbmVyX01JTE9NQS5nZXQoIk1CQUdEWSIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJBR0hPIiwgcmVzdWx0Q29udGFpbmVyX01JTE9NQS5nZXQoIk1CQUdITyIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJBR01JIiwgcmVzdWx0Q29udGFpbmVyX01JTE9NQS5nZXQoIk1CQUdNSSIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBhY3Rpb25NSVRCQUwucmVhZEFsbChjb250YWluZXJNSVRCQUwsIDIsIDEsIHJlYWRBbGxSZWNvcmRNSVRCQUwpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIFNldCBvdXRwdXQgZGF0YSBmcm9tIGZvdW5kIGNvbnRhaW5lck1JVEJBTA0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIkFHRFkiLCBjb250YWluZXJNSVRCQUwuZ2V0KCJNQkFHRFkiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJBR0hPIiwgY29udGFpbmVyTUlUQkFMLmdldCgiTUJBR0hPIikudG9TdHJpbmcoKS50cmltKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiQUdNSSIsIGNvbnRhaW5lck1JVEJBTC5nZXQoIk1CQUdNSSIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIEZpbmQgY29ycmVzcG9uZGluZyByZWNvcmQgaW4gTUlUUExPIGxpc3QNCiAgICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSVRQTE8gPSBtaXRwbG9MaXN0LmZpbmQgew0KICAgICAgICAgICAgaXQuZ2V0U3RyaW5nKCJNT1dITE8iKSA9PSBXSExPICYmIGl0LmdldFN0cmluZygiTU9JVE5PIikgPT0gSVROTw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChjb250YWluZXJNSVRQTE8gPT0gbnVsbCkgew0KICAgICAgICAgICAgLy8gUmVhZCByZWNvcmQgZnJvbSBNSVRQTE8gdGFibGUgaWYgbm90IGZvdW5kDQogICAgICAgICAgICBEQkFjdGlvbiBhY3Rpb25NSVRQTE8gPSBkYXRhYmFzZS50YWJsZSgiTUlUUExPIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNT1JGVFgiKS5idWlsZCgpDQogICAgICAgICAgICBjb250YWluZXJNSVRQTE8gPSBhY3Rpb25NSVRQTE8uZ2V0Q29udGFpbmVyKCkNCg0KICAgICAgICAgICAgY29udGFpbmVyTUlUUExPLnNldCgiTU9DT05PIiwgaUNPTk8gYXMgaW50KQ0KICAgICAgICAgICAgY29udGFpbmVyTUlUUExPLnNldCgiTU9XSExPIiwgV0hMTykNCiAgICAgICAgICAgIGNvbnRhaW5lck1JVFBMTy5zZXQoIk1PSVROTyIsIElUTk8pDQoNCiAgICAgICAgICAgIC8vIENsb3N1cmUgdG8gcHJvY2VzcyBhbGwgcmVjb3JkcyBmZXRjaGVkIGZyb20gTUlUUExPDQogICAgICAgICAgICBDbG9zdXJlPD8+IHJlYWRBbGxSZWNvcmRNSVRQTE8gPSB7DQogICAgICAgICAgICAgIERCQ29udGFpbmVyIHJlc3VsdENvbnRhaW5lcl9NSVRQTE8gLT4NCiAgICAgICAgICAgICAgICBtaXRwbG9MaXN0LmFkZChyZXN1bHRDb250YWluZXJfTUlUUExPLmNyZWF0ZUNvcHkoKSkNCiAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUkZUWCIsIHJlc3VsdENvbnRhaW5lcl9NSVRQTE8uZ2V0U3RyaW5nKCJNT1JGVFgiKS50cmltKCkpDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGFjdGlvbk1JVFBMTy5yZWFkQWxsKGNvbnRhaW5lck1JVFBMTywgMiwgMSwgcmVhZEFsbFJlY29yZE1JVFBMTykNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gU2V0IG91dHB1dCBkYXRhIGZyb20gZm91bmQgY29udGFpbmVyTUlUUExPDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUkZUWCIsIGNvbnRhaW5lck1JVFBMTy5nZXRTdHJpbmcoIk1PUkZUWCIpLnRyaW0oKSkNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvLyBGaW5kIGNvcnJlc3BvbmRpbmcgcmVjb3JkIGluIE1JVFRSQSBsaXN0DQogICAgICAgICAgREJDb250YWluZXIgY29udGFpbmVyTUlUVFJBID0gbWl0dHJhTGlzdC5maW5kIHsNCiAgICAgICAgICAgIGl0LmdldFN0cmluZygiTVRJVE5PIikgPT0gSVROTyAmJiBpdC5nZXRTdHJpbmcoIk1UQkFOTyIpID09IEJBTk8gJiYgaXQuZ2V0SW50KCJNVFRUWVAiKSA9PSAxNw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIFN0cmluZyBSSUROID0gIiINCiAgICAgICAgICBTdHJpbmcgTUlUVFJBX1dITE8gPSAiIg0KDQogICAgICAgICAgaWYgKGNvbnRhaW5lck1JVFRSQSA9PSBudWxsKSB7DQogICAgICAgICAgICAvLyBSZWFkIHJlY29yZCBmcm9tIE1JVFRSQSB0YWJsZSBpZiBub3QgZm91bmQNCiAgICAgICAgICAgIERCQWN0aW9uIGFjdGlvbk1JVFRSQSA9IGRhdGFiYXNlLnRhYmxlKCJNSVRUUkEiKS5pbmRleCgiMjAiKS5zZWxlY3Rpb24oIk1UUklETiIsICJNVFdITE8iKS5idWlsZCgpDQogICAgICAgICAgICBjb250YWluZXJNSVRUUkEgPSBhY3Rpb25NSVRUUkEuZ2V0Q29udGFpbmVyKCkNCg0KICAgICAgICAgICAgY29udGFpbmVyTUlUVFJBLnNldCgiTVRDT05PIiwgaUNPTk8gYXMgaW50KQ0KICAgICAgICAgICAgY29udGFpbmVyTUlUVFJBLnNldCgiTVRJVE5PIiwgSVROTykNCiAgICAgICAgICAgIGNvbnRhaW5lck1JVFRSQS5zZXQoIk1UQkFOTyIsIEJBTk8pDQogICAgICAgICAgICBjb250YWluZXJNSVRUUkEuc2V0KCJNVFRUWVAiLCAxNykNCg0KICAgICAgICAgICAgLy8gQ2xvc3VyZSB0byBwcm9jZXNzIGFsbCByZWNvcmRzIGZldGNoZWQgZnJvbSBNSVRUUkENCiAgICAgICAgICAgIENsb3N1cmU8Pz4gcmVhZEFsbFJlY29yZE1JVFRSQSA9IHsNCiAgICAgICAgICAgICAgREJDb250YWluZXIgcmVzdWx0Q29udGFpbmVyX01JVFRSQSAtPg0KICAgICAgICAgICAgICAgIG1pdHRyYUxpc3QuYWRkKHJlc3VsdENvbnRhaW5lcl9NSVRUUkEuY3JlYXRlQ29weSgpKQ0KDQogICAgICAgICAgICAgICAgUklETiA9IHJlc3VsdENvbnRhaW5lcl9NSVRUUkEuZ2V0U3RyaW5nKCJNVFJJRE4iKS50cmltKCkNCiAgICAgICAgICAgICAgICBNSVRUUkFfV0hMTyA9IHJlc3VsdENvbnRhaW5lcl9NSVRUUkEuZ2V0U3RyaW5nKCJNVFdITE8iKS50cmltKCkNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgYWN0aW9uTUlUVFJBLnJlYWRBbGwoY29udGFpbmVyTUlUVFJBLCA0LCAxLCByZWFkQWxsUmVjb3JkTUlUVFJBKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBTZXQgUklETiBhbmQgTUlUVFJBX1dITE8gZnJvbSBmb3VuZCBjb250YWluZXJNSVRUUkENCiAgICAgICAgICAgIFJJRE4gPSBjb250YWluZXJNSVRUUkEuZ2V0U3RyaW5nKCJNVFJJRE4iKS50cmltKCkNCiAgICAgICAgICAgIE1JVFRSQV9XSExPID0gY29udGFpbmVyTUlUVFJBLmdldFN0cmluZygiTVRXSExPIikudHJpbSgpDQogICAgICAgICAgfQ0KDQogICAgICAgICAgU3RyaW5nIEZBQ0kgPSAiIg0KDQogICAgICAgICAgLy8gRmluZCBjb3JyZXNwb25kaW5nIHJlY29yZCBpbiBNSVRXSEwgbGlzdA0KICAgICAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1JVFdITCA9IG1pdHdobExpc3QuZmluZCB7DQogICAgICAgICAgICBpdC5nZXRTdHJpbmcoIk1XV0hMTyIpID09IE1JVFRSQV9XSExPDQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKGNvbnRhaW5lck1JVFdITCA9PSBudWxsKSB7DQogICAgICAgICAgICAvLyBSZWFkIHJlY29yZCBmcm9tIE1JVFdITCB0YWJsZSBpZiBub3QgZm91bmQNCiAgICAgICAgICAgIERCQWN0aW9uIGFjdGlvbk1JVFdITCA9IGRhdGFiYXNlLnRhYmxlKCJNSVRXSEwiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1XRkFDSSIpLmJ1aWxkKCkNCiAgICAgICAgICAgIGNvbnRhaW5lck1JVFdITCA9IGFjdGlvbk1JVFdITC5nZXRDb250YWluZXIoKQ0KDQogICAgICAgICAgICBjb250YWluZXJNSVRXSEwuc2V0KCJNV0NPTk8iLCBpQ09OTyBhcyBpbnQpDQogICAgICAgICAgICBjb250YWluZXJNSVRXSEwuc2V0KCJNV1dITE8iLCBNSVRUUkFfV0hMTykNCg0KICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcmVhZGluZyBNSVRXSEwgcmVjb3JkIGlzIHN1Y2Nlc3NmdWwgYW5kIGFkZCB0byBsaXN0DQogICAgICAgICAgICBpZiAoYWN0aW9uTUlUV0hMLnJlYWQoY29udGFpbmVyTUlUV0hMKSkgew0KICAgICAgICAgICAgICBtaXR3aGxMaXN0LmFkZChjb250YWluZXJNSVRXSEwpDQogICAgICAgICAgICAgIEZBQ0kgPSBjb250YWluZXJNSVRXSEwuZ2V0U3RyaW5nKCJNV0ZBQ0kiKS50cmltKCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gU2V0IEZBQ0kgZnJvbSBmb3VuZCBjb250YWluZXJNSVRXSEwNCiAgICAgICAgICAgIEZBQ0kgPSBjb250YWluZXJNSVRXSEwuZ2V0U3RyaW5nKCJNV0ZBQ0kiKS50cmltKCkNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvLyBGaW5kIGNvcnJlc3BvbmRpbmcgcmVjb3JkIGluIE1XT0hFRCBsaXN0DQogICAgICAgICAgREJDb250YWluZXIgY29udGFpbmVyTVdPSEVEID0gbXdvaGVkTGlzdC5maW5kIHsNCiAgICAgICAgICAgIGl0LmdldFN0cmluZygiVkhGQUNJIikgPT0gRkFDSSAmJiBpdC5nZXRTdHJpbmcoIlZIQkFOTyIpID09IEJBTk8gJiYgaXQuZ2V0U3RyaW5nKCJWSFBSTk8iKSA9PSBJVE5PICYmIGl0LmdldFN0cmluZygiVkhNRk5PIikgPT0gUklETg0KICAgICAgICAgIH0NCg0KICAgICAgICAgIFN0cmluZyBNRk5PID0gIiINCiAgICAgICAgICBTdHJpbmcgTVdPSEVEX0ZBQ0kgPSAiIg0KDQogICAgICAgICAgaWYgKGNvbnRhaW5lck1XT0hFRCA9PSBudWxsKSB7DQogICAgICAgICAgICAvLyBSZWFkIHJlY29yZCBmcm9tIE1XT0hFRCB0YWJsZSBpZiBub3QgZm91bmQNCiAgICAgICAgICAgIERCQWN0aW9uIGFjdGlvbk1XT0hFRCA9IGRhdGFiYXNlLnRhYmxlKCJNV09IRUQiKS5pbmRleCgiOTciKS5zZWxlY3Rpb24oIlZIV0hMTyIsICJWSE1GTk8iLCAiVkhGQUNJIikuYnVpbGQoKQ0KICAgICAgICAgICAgY29udGFpbmVyTVdPSEVEID0gYWN0aW9uTVdPSEVELmdldENvbnRhaW5lcigpDQoNCiAgICAgICAgICAgIGNvbnRhaW5lck1XT0hFRC5zZXQoIlZIQ09OTyIsIGlDT05PIGFzIGludCkNCiAgICAgICAgICAgIGNvbnRhaW5lck1XT0hFRC5zZXQoIlZIRkFDSSIsIEZBQ0kpDQogICAgICAgICAgICBjb250YWluZXJNV09IRUQuc2V0KCJWSEJBTk8iLCBCQU5PKQ0KICAgICAgICAgICAgY29udGFpbmVyTVdPSEVELnNldCgiVkhQUk5PIiwgSVROTykNCiAgICAgICAgICAgIGNvbnRhaW5lck1XT0hFRC5zZXQoIlZITUZOTyIsIFJJRE4pDQoNCiAgICAgICAgICAgIC8vIENsb3N1cmUgdG8gcHJvY2VzcyBhbGwgcmVjb3JkcyBmZXRjaGVkIGZyb20gTVdPSEVEDQogICAgICAgICAgICBDbG9zdXJlPD8+IHJlYWRBbGxSZWNvcmRNV09IRUQgPSB7DQogICAgICAgICAgICAgIERCQ29udGFpbmVyIHJlc3VsdENvbnRhaW5lcl9NV09IRUQgLT4NCiAgICAgICAgICAgICAgICBtd29oZWRMaXN0LmFkZChyZXN1bHRDb250YWluZXJfTVdPSEVEKQ0KDQogICAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIk1XSEwiLCByZXN1bHRDb250YWluZXJfTVdPSEVELmdldFN0cmluZygiVkhXSExPIikudHJpbSgpKQ0KDQogICAgICAgICAgICAgICAgTUZOTyA9IHJlc3VsdENvbnRhaW5lcl9NV09IRUQuZ2V0U3RyaW5nKCJWSE1GTk8iKS50cmltKCkNCiAgICAgICAgICAgICAgICBNV09IRURfRkFDSSA9IHJlc3VsdENvbnRhaW5lcl9NV09IRUQuZ2V0U3RyaW5nKCJWSEZBQ0kiKS50cmltKCkNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgYWN0aW9uTVdPSEVELnJlYWRBbGwoY29udGFpbmVyTVdPSEVELCA1LCAxLCByZWFkQWxsUmVjb3JkTVdPSEVEKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBTZXQgTVdITCBmcm9tIGZvdW5kIGNvbnRhaW5lck1XT0hFRA0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIk1XSEwiLCBjb250YWluZXJNV09IRUQuZ2V0U3RyaW5nKCJWSFdITE8iKS50cmltKCkpDQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8gRmluZCBjb3JyZXNwb25kaW5nIHJlY29yZCBpbiBNV09PUEUgbGlzdA0KICAgICAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1XT09QRSA9IG13b29wZUxpc3QuZmluZCB7DQogICAgICAgICAgICBpdC5nZXRTdHJpbmcoIlZPRkFDSSIpID09IE1XT0hFRF9GQUNJICYmIGl0LmdldFN0cmluZygiVk9QUk5PIikgPT0gSVROTyAmJiBpdC5nZXRTdHJpbmcoIlZPTUZOTyIpID09IE1GTk8NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoY29udGFpbmVyTVdPT1BFID09IG51bGwpIHsNCiAgICAgICAgICAgIC8vIFJlYWQgcmVjb3JkIGZyb20gTVdPT1BFIHRhYmxlIGlmIG5vdCBmb3VuZA0KICAgICAgICAgICAgREJBY3Rpb24gYWN0aW9uTVdPT1BFID0gZGF0YWJhc2UudGFibGUoIk1XT09QRSIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiVk9QTEdSIikuYnVpbGQoKQ0KICAgICAgICAgICAgY29udGFpbmVyTVdPT1BFID0gYWN0aW9uTVdPT1BFLmdldENvbnRhaW5lcigpDQoNCiAgICAgICAgICAgIGNvbnRhaW5lck1XT09QRS5zZXQoIlZPQ09OTyIsIGlDT05PIGFzIGludCkNCiAgICAgICAgICAgIGNvbnRhaW5lck1XT09QRS5zZXQoIlZPRkFDSSIsIE1XT0hFRF9GQUNJKQ0KICAgICAgICAgICAgY29udGFpbmVyTVdPT1BFLnNldCgiVk9QUk5PIiwgSVROTykNCiAgICAgICAgICAgIGNvbnRhaW5lck1XT09QRS5zZXQoIlZPTUZOTyIsIE1GTk8pDQoNCiAgICAgICAgICAgIC8vIENsb3N1cmUgdG8gcHJvY2VzcyBhbGwgcmVjb3JkcyBmZXRjaGVkIGZyb20gTVdPT1BFDQogICAgICAgICAgICBDbG9zdXJlPD8+IHJlYWRBbGxSZWNvcmRNV09PUEUgPSB7DQogICAgICAgICAgICAgIERCQ29udGFpbmVyIHJlc3VsdENvbnRhaW5lcl9NV09PUEUgLT4NCiAgICAgICAgICAgICAgICBtd29vcGVMaXN0LmFkZChyZXN1bHRDb250YWluZXJfTVdPT1BFLmNyZWF0ZUNvcHkoKSkNCiAgICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUExHUiIsIHJlc3VsdENvbnRhaW5lcl9NV09PUEUuZ2V0U3RyaW5nKCJWT1BMR1IiKS50cmltKCkpDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGFjdGlvbk1XT09QRS5yZWFkQWxsKGNvbnRhaW5lck1XT09QRSwgNCwgMSwgcmVhZEFsbFJlY29yZE1XT09QRSkNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gU2V0IFBMR1IgZnJvbSBmb3VuZCBjb250YWluZXJNV09PUEUNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJQTEdSIiwgY29udGFpbmVyTVdPT1BFLmdldFN0cmluZygiVk9QTEdSIikudHJpbSgpKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvLyBXcml0ZSBvdXRwdXQgZGF0YSB0byBNMw0KICAgICAgICAgIG1pLndyaXRlKCkNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIFJlYWQgYWxsIHJlY29yZHMgZnJvbSBNSVRMT0MgdGFibGUNCiAgICBhY3Rpb25NSVRMT0MucmVhZEFsbChjb250YWluZXJNSVRMT0MsIDEsIDEwMDAsIHJlYWRBbGxSZWNvcmRzTUlUTE9DKQ0KICB9DQoNCiAgLyoqDQogICAqIExpc3RzIHZhbGlkIGl0ZW1zIGZyb20gTUlUTUFTIHRhYmxlLg0KICAgKg0KICAgKiBAcmV0dXJuIExpc3Q8REJDb250YWluZXI+IExpc3Qgb2YgYWxsIHZhbGlkIGl0ZW1zIGZldGNoZWQgZnJvbSBNSVRNQVMuDQogICAqLw0KICBwcml2YXRlIExpc3Q8REJDb250YWluZXI+IGxpc3RNSVRNQVMoKSB7DQogICAgTGlzdDxEQkNvbnRhaW5lcj4gaXRlbXNMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCkNCg0KICAgIC8vIERlZmluZSBhY3Rpb24gdG8gZmV0Y2ggcmVjb3JkcyBmcm9tIE1JVE1BUyB0YWJsZQ0KICAgIERCQWN0aW9uIGFjdGlvbk1JVE1BUyA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQVMiKS5pbmRleCgiNzAiKS5zZWxlY3Rpb24oIk1NSVREUyIsICJNTUlUTk8iLCAiTU1RTUdQIikuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1JVE1BUyA9IGFjdGlvbk1JVE1BUy5nZXRDb250YWluZXIoKQ0KDQogICAgY29udGFpbmVyTUlUTUFTLnNldCgiTU1DT05PIiwgaUNPTk8gYXMgaW50KQ0KICAgIGNvbnRhaW5lck1JVE1BUy5zZXQoIk1NSVRUWSIsICJGRyIpDQoNCiAgICAvLyBDbG9zdXJlIHRvIHByb2Nlc3MgYWxsIHJlY29yZHMgZmV0Y2hlZCBmcm9tIE1JVE1BUw0KICAgIENsb3N1cmU8Pz4gcmVhZEFsbFJlY29yZE1JVE1BUyA9IHsNCiAgICAgIERCQ29udGFpbmVyIHJlc3VsdENvbnRhaW5lciAtPg0KICAgICAgICBpdGVtc0xpc3QuYWRkKHJlc3VsdENvbnRhaW5lci5jcmVhdGVDb3B5KCkpDQogICAgfQ0KDQogICAgLy8gUmVhZCBhbGwgcmVjb3JkcyBmcm9tIE1JVE1BUyB0YWJsZQ0KICAgIGFjdGlvbk1JVE1BUy5yZWFkQWxsKGNvbnRhaW5lck1JVE1BUywgMiwgMTAwMDAsIHJlYWRBbGxSZWNvcmRNSVRNQVMpDQoNCiAgICByZXR1cm4gaXRlbXNMaXN0DQogIH0NCn0NCg=="}}}