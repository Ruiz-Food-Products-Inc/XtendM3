{"programModules":{"EXT130MI":{"program":"EXT130MI","triggers":{},"transactions":{"LstQATags":{"sourceUuid":"64eb14d5-94de-40a5-ba4f-5b48b7322b91","name":"LstQATags","program":"EXT130MI","description":"List QA Tags","active":true,"multi":true,"modified":1727982537878,"modifiedBy":"900073","outputFields":[{"name":"WHLO","description":"warehouse","length":3,"mandatory":false,"type":"A"},{"name":"WHSL","description":"location","length":10,"mandatory":false,"type":"A"},{"name":"ITNO","description":"item number","length":15,"mandatory":false,"type":"A"},{"name":"ITTY","description":"item type","length":3,"mandatory":false,"type":"A"},{"name":"SBAN","description":"lot number","length":20,"mandatory":false,"type":"A"},{"name":"CAMU","description":"container","length":20,"mandatory":false,"type":"A"},{"name":"STAS","description":"status - balance ID","length":1,"mandatory":false,"type":"A"},{"name":"STQT","description":"on-hand balance approved","length":15,"mandatory":false,"type":"N"},{"name":"UNMS","description":"basic unit of measure","length":3,"mandatory":false,"type":"A"},{"name":"TAGT","description":"Tag type","length":4,"mandatory":false,"type":"A"},{"name":"TAGI","description":"Tag Info","length":20,"mandatory":false,"type":"A"},{"name":"TAGN","description":"Tag number","length":3,"mandatory":false,"type":"N"},{"name":"TX40","description":"description","length":40,"mandatory":false,"type":"A"},{"name":"PRDT","description":"priority date","length":8,"mandatory":false,"type":"N"},{"name":"PRTM","description":"planned preparation time","length":7,"mandatory":false,"type":"N"},{"name":"PPST","description":"proposal status","length":2,"mandatory":false,"type":"A"},{"name":"CONF","description":"Confirm","length":1,"mandatory":false,"type":"N"},{"name":"TX41","description":"description","length":40,"mandatory":false,"type":"A"},{"name":"RESP","description":"responsible","length":10,"mandatory":false,"type":"A"}],"inputFields":[{"name":"CONO","description":"company","length":3,"mandatory":true,"type":"A"}],"utilities":["DateUtil"],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"64eb14d5-94de-40a5-ba4f-5b48b7322b91":{"uuid":"64eb14d5-94de-40a5-ba4f-5b48b7322b91","updated":1727897010708,"updatedBy":"900046","created":1727982531665,"createdBy":"900073","apiVersion":"UNKNOWN","beVersion":"16.0.0.20240717001700.11","language":"GROOVY","codeHash":"F58E187F83705B3D6778C434BC0F5CF40C59E19ADC6CDAD7C4038CDE8A202041","code":"LyoqDQogKiBSRUFETUUNCiAqIExzdFFBVGFncyBjbGFzcyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gYW5kIGxpc3RzIGRhdGEgZm9yIHRoZSBRQSBUYWdzIHBhbmVsLg0KICoNCiAqDQogKiBOYW1lOiBFWFQxMzBNSS5Mc3RRQVRhZ3MNCiAqIERlc2NyaXB0aW9uOiBMaXN0IGRhdGEgZm9yIHRoZSBRQSBUYWdzIHBhbmVsDQogKiBEYXRlCSAgICAgIENoYW5nZWQgQnkgICAgRGVzY3JpcHRpb24NCiAqIDIwMjQwODAxCSAgQUpBWVkgICAgICAgICBMc3RRQVRhZ3MgY2xhc3MgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIGFuZCBsaXN0cyBkYXRhIGZvciB0aGUgUUEgVGFncyBwYW5lbC4NCiAqIDIwMjQwOTEyCSAgQUpBWVkgICAgICAgICBBZGRlZCBUWDQxIG91dHB1dCBmaWVsZCBmb3IgQ0hJRCB1c2VyIG5hbWUgYW5kIGNoYW5nZWQgQ09OTyBhcyAwIGZvciBDTU5VU1INCiAqIDIwMjQxMDAxICAgQUpBWVkgICAgICAgICBBZGRlZCBSRVNQIG91dHB1dCBmaWVsZA0KICoqLw0KIA0KIA0KIHB1YmxpYyBjbGFzcyBMc3RRQVRhZ3MgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsNCiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaTsNCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZTsNCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW07DQogIHByaXZhdGUgZmluYWwgVXRpbGl0eUFQSSB1dGlsaXR5Ow0KDQogIC8qKg0KICAgKiBDb25zdHJ1Y3RvciBmb3IgTHN0UmVqTWF0ZXJpYWwgY2xhc3MuDQogICAqDQogICAqIEBwYXJhbSBtaSAgICAgICBNSUFQSSBvYmplY3QNCiAgICogQHBhcmFtIGRhdGFiYXNlIERhdGFiYXNlQVBJIG9iamVjdA0KICAgKiBAcGFyYW0gcHJvZ3JhbSAgUHJvZ3JhbUFQSSBvYmplY3QNCiAgICogQHBhcmFtIHV0aWxpdHkgIFV0aWxpdHlBUEkgb2JqZWN0DQogICAqLw0KICBwdWJsaWMgTHN0UUFUYWdzKE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBVdGlsaXR5QVBJIHV0aWxpdHkpIHsNCiAgICB0aGlzLm1pID0gbWk7DQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlOw0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07DQogICAgdGhpcy51dGlsaXR5ID0gdXRpbGl0eTsNCiAgfQ0KDQogIHByaXZhdGUgU3RyaW5nIGlDT05POw0KICBwcml2YXRlIExpc3QgPCBEQkNvbnRhaW5lciA+IG1pdG1hc0xpc3QgPSBbXTsNCiAgcHJpdmF0ZSBMaXN0IDwgREJDb250YWluZXIgPiBtaXR3aGxMaXN0ID0gW107DQogIHByaXZhdGUgTGlzdCA8IERCQ29udGFpbmVyID4gY3N5dGFiTGlzdCA9IFtdOw0KICBwcml2YXRlIExpc3QgPCBEQkNvbnRhaW5lciA+IGNtbnVzckxpc3QgPSBbXTsNCiAgcHJpdmF0ZSBMaXN0IDwgREJDb250YWluZXIgPiBtaXRsb2NMaXN0ID0gW107DQogIHByaXZhdGUgTGlzdCA8IERCQ29udGFpbmVyID4gbWl0dHJhTGlzdCA9IFtdOw0KDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7DQogICAgaUNPTk8gPSBtaS5pbi5nZXQoIkNPTk8iKS50b1N0cmluZygpID09IG51bGwgPyBwcm9ncmFtLkxEQVpELkNPTk8gOiBtaS5pbi5nZXQoIkNPTk8iKS50b1N0cmluZygpLnRyaW0oKTsNCg0KCS8vIENhbGN1bGF0ZSBjdXJyZW50IGVwb2NoIHRpbWUgbWludXMgMSBkYXkNCiAgICBTdHJpbmcgY3VycmVudERhdGUgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImN1cnJlbnREYXRlWThBc1N0cmluZyIpOw0KICAgIFN0cmluZyB5ZXN0ZXJkYXlzRGF0ZSA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAibW9kaWZ5RGF0ZSIsIGN1cnJlbnREYXRlLCAieXl5eU1NZGQiLCAtMik7DQoNCgkvLyBDcmVhdGUgZXhwcmVzc2lvbiBmb3IgcXVlcnlpbmcgdGhlIEVYVDQwMiB0YWJsZSB3aXRoIGEgZW50cnkgZGF0ZSBjb25kaXRpb24NCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHByZXNzaW9uID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIkVYVDQwMiIpOw0KICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLmdlKCJFWExNRFQiLCB5ZXN0ZXJkYXlzRGF0ZS50b1N0cmluZygpKTsNCg0KICAgIERCQWN0aW9uIGFjdGlvbkVYVDQwMiA9IGRhdGFiYXNlLnRhYmxlKCJFWFQ0MDIiKS5pbmRleCgiMDAiKS5tYXRjaGluZyhleHByZXNzaW9uKS5zZWxlY3RBbGxGaWVsZHMoKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lckVYVDQwMiA9IGFjdGlvbkVYVDQwMi5nZXRDb250YWluZXIoKTsNCg0KICAgIGNvbnRhaW5lckVYVDQwMi5zZXQoIkVYQ09OTyIsIGlDT05PIGFzIGludCk7DQoNCgkvLyBDbG9zdXJlIHRvIHByb2Nlc3MgYWxsIHJlY29yZHMgZmV0Y2hlZCBmcm9tIEVYVDQwMg0KICAgIENsb3N1cmUgPCA/ID4gcmVhZEFsbFJlY29yZHNFWFQ0MDIgPSB7DQogICAgICBEQkNvbnRhaW5lciByZXN1bHRDb250YWluZXJFWFQ0MDIgLT4NCiAgICAgIFN0cmluZyBJVE5PID0gcmVzdWx0Q29udGFpbmVyRVhUNDAyLmdldCgiRVhJVE5PIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICBTdHJpbmcgQ0FNVSA9IHJlc3VsdENvbnRhaW5lckVYVDQwMi5nZXQoIkVYQ0FNVSIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgU3RyaW5nIFNCQU4gPSByZXN1bHRDb250YWluZXJFWFQ0MDIuZ2V0KCJFWFNCQU4iKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgIFN0cmluZyBSRVNQID0gcmVzdWx0Q29udGFpbmVyRVhUNDAyLmdldCgiRVhSRVNQIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICBTdHJpbmcgQ0hJRCA9IHJlc3VsdENvbnRhaW5lckVYVDQwMi5nZXQoIkVYQ0hJRCIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgU3RyaW5nIG1pdHRyYVdITE8gPSAiIjsNCiAgICAgIFN0cmluZyBtaXR0cmFXSFNMID0gIiI7DQogICAgICBTdHJpbmcgbWl0dHJhU1RBUyA9ICIiOw0KICAgICAgU3RyaW5nIG1pbG9tYVdITE8gPSAiIjsNCiAgICAgIFN0cmluZyBtaWxvbWFXSFNMID0gIiI7DQogICAgICBTdHJpbmcgbWlsb21hU1RBUyA9ICIiOw0KICAgICAgU3RyaW5nIFNERVMgPSAiIjsNCg0KCSAgLy8gU2V0IG91dHB1dCBkYXRhIHRvIG1pLm91dERhdGENCiAgICAgIG1pLm91dERhdGEucHV0KCJJVE5PIiwgSVROTyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgiU0JBTiIsIFNCQU4pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoIkNBTVUiLCBDQU1VKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCJSRVNQIiwgUkVTUCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgiVEFHVCIsIHJlc3VsdENvbnRhaW5lckVYVDQwMi5nZXQoIkVYVEFHVCIpLnRvU3RyaW5nKCkudHJpbSgpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCJUQUdJIiwgcmVzdWx0Q29udGFpbmVyRVhUNDAyLmdldCgiRVhUQUdJIikudG9TdHJpbmcoKS50cmltKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoIlRBR04iLCByZXN1bHRDb250YWluZXJFWFQ0MDIuZ2V0KCJFWFRBR04iKS50b1N0cmluZygpLnRyaW0oKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgiUFJEVCIsIHJlc3VsdENvbnRhaW5lckVYVDQwMi5nZXQoIkVYUFJEVCIpLnRvU3RyaW5nKCkudHJpbSgpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCJQUlRNIiwgcmVzdWx0Q29udGFpbmVyRVhUNDAyLmdldCgiRVhQUlRNIikudG9TdHJpbmcoKS50cmltKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoIkNPTkYiLCByZXN1bHRDb250YWluZXJFWFQ0MDIuZ2V0KCJFWENPTkYiKS50b1N0cmluZygpLnRyaW0oKSk7DQoNCiAgICAgIC8vIFByb2Nlc3MgTUlUVFJBDQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSVRUUkEgPSBtaXR0cmFMaXN0LmZpbmQgew0KICAgICAgICBpdC5nZXRTdHJpbmcoIk1UQ0FNVSIpID09IENBTVUgJiYgaXQuZ2V0U3RyaW5nKCJNVElUTk8iKSA9PSBJVE5PDQogICAgICB9Ow0KDQogICAgICBpZiAoY29udGFpbmVyTUlUVFJBID09IG51bGwpIHsNCiAgICAgICAgRXhwcmVzc2lvbkZhY3RvcnkgTUlUVFJBZXhwcmVzc2lvbiA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJNSVRUUkEiKTsNCiAgICAgICAgTUlUVFJBZXhwcmVzc2lvbiA9IE1JVFRSQWV4cHJlc3Npb24uZXEoIk1UQ0FNVSIsIENBTVUpOw0KICAgICAgICBEQkFjdGlvbiBhY3Rpb25NSVRUUkEgPSBkYXRhYmFzZS50YWJsZSgiTUlUVFJBIikubWF0Y2hpbmcoTUlUVFJBZXhwcmVzc2lvbikuaW5kZXgoIjIwIikuc2VsZWN0aW9uKCJNVENBTVUiLCAiTVRXSExPIiwgIk1UV0hTTCIsICJNVFNUQVMiLCAiTVRSR0RUIiwgIk1UUkdUTSIpLmJ1aWxkKCk7DQogICAgICAgIGNvbnRhaW5lck1JVFRSQSA9IGFjdGlvbk1JVFRSQS5nZXRDb250YWluZXIoKTsNCg0KICAgICAgICBjb250YWluZXJNSVRUUkEuc2V0SW50KCJNVENPTk8iLCBpQ09OTyBhcyBpbnQpOw0KICAgICAgICBjb250YWluZXJNSVRUUkEuc2V0KCJNVElUTk8iLCBJVE5PKTsNCg0KICAgICAgICBMaXN0IDwgREJDb250YWluZXIgPiB0ZW1wTGlzdCA9IFtdOw0KDQogICAgICAgIENsb3N1cmUgPCA/ID4gcmVhZEFsbFJlY29yZHNNSVRUUkEgPSB7DQogICAgICAgICAgREJDb250YWluZXIgcmVzdWx0Q29udGFpbmVyIC0+DQogICAgICAgICAgdGVtcExpc3QuYWRkKHJlc3VsdENvbnRhaW5lci5jcmVhdGVDb3B5KCkpOw0KICAgICAgICB9DQoNCiAgICAgICAgYWN0aW9uTUlUVFJBLnJlYWRBbGwoY29udGFpbmVyTUlUVFJBLCAyLCAxMDAwMCwgcmVhZEFsbFJlY29yZHNNSVRUUkEpOw0KDQogICAgICAgIHRlbXBMaXN0LnNvcnQgew0KICAgICAgICAgIGEsDQogICAgICAgICAgYiAtPg0KICAgICAgICAgIGRlZiByZXN1bHQgPSBhLmdldCgiTVRSR0RUIikudG9TdHJpbmcoKS50cmltKCkuY29tcGFyZVRvKGIuZ2V0KCJNVFJHRFQiKS50b1N0cmluZygpLnRyaW0oKSkNCiAgICAgICAgICBpZiAocmVzdWx0ID09IDApIHsNCiAgICAgICAgICAgIHJlc3VsdCA9IGEuZ2V0KCJNVFJHVE0iKS50b1N0cmluZygpLnRyaW0oKS5jb21wYXJlVG8oYi5nZXQoIk1UUkdUTSIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgaWYgKHJlc3VsdCA9PSAwKSB7DQogICAgICAgICAgICAgIHJlc3VsdCA9IGEuZ2V0KCJNVFRNU1giKS50b1N0cmluZygpLnRyaW0oKS5jb21wYXJlVG8oYi5nZXQoIk1UVE1TWCIpLnRvU3RyaW5nKCkudHJpbSgpKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gcmVzdWx0DQogICAgICAgIH0NCg0KICAgICAgICBpZiAodGVtcExpc3Quc2l6ZSgpID4gMCkgew0KICAgICAgICAgIGludCBsYXN0SW5kZXggPSB0ZW1wTGlzdC5zaXplKCkgLSAxOw0KICAgICAgICAgIG1pdHRyYVdITE8gPSB0ZW1wTGlzdFtsYXN0SW5kZXhdLmdldCgiTVRXSExPIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICAgICAgbWl0dHJhV0hTTCA9IHRlbXBMaXN0W2xhc3RJbmRleF0uZ2V0KCJNVFdIU0wiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgICAgICBtaXR0cmFTVEFTID0gdGVtcExpc3RbbGFzdEluZGV4XS5nZXQoIk1UU1RBUyIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5vdXREYXRhLnB1dCgiQ0FNVSIsIGNvbnRhaW5lck1JVFRSQS5nZXRTdHJpbmcoIk1UQ0FNVSIpKTsNCiAgICAgICAgbWl0dHJhV0hMTyA9IGNvbnRhaW5lck1JVFRSQS5nZXRTdHJpbmcoIk1UV0hMTyIpOw0KICAgICAgICBtaXR0cmFXSFNMID0gY29udGFpbmVyTUlUVFJBLmdldFN0cmluZygiTVRXSFNMIik7DQogICAgICAgIG1pdHRyYVNUQVMgPSBjb250YWluZXJNSVRUUkEuZ2V0KCJNVFNUQVMiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgIH0NCg0KICAgICAgLy8gUHJvY2VzcyBNSVRXSEwNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1JVFdITCA9IG1pdHdobExpc3QuZmluZCB7DQogICAgICAgIGl0LmdldFN0cmluZygiTVdXSExPIikgPT0gbWl0dHJhV0hMTw0KICAgICAgfTsNCg0KICAgICAgaWYgKGNvbnRhaW5lck1JVFdITCA9PSBudWxsKSB7DQogICAgICAgIERCQWN0aW9uIGFjdGlvbk1JVFdITCA9IGRhdGFiYXNlLnRhYmxlKCJNSVRXSEwiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1XU0RFUyIpLmJ1aWxkKCk7DQogICAgICAgIGNvbnRhaW5lck1JVFdITCA9IGFjdGlvbk1JVFdITC5nZXRDb250YWluZXIoKTsNCg0KICAgICAgICBjb250YWluZXJNSVRXSEwuc2V0SW50KCJNV0NPTk8iLCBpQ09OTyBhcyBpbnQpOw0KICAgICAgICBjb250YWluZXJNSVRXSEwuc2V0KCJNV1dITE8iLCBtaXR0cmFXSExPKTsNCg0KICAgICAgICBpZiAoYWN0aW9uTUlUV0hMLnJlYWQoY29udGFpbmVyTUlUV0hMKSkgew0KICAgICAgICAgIG1pdHdobExpc3QuYWRkKGNvbnRhaW5lck1JVFdITC5jcmVhdGVDb3B5KCkpOw0KICAgICAgICAgIFNERVMgPSBjb250YWluZXJNSVRXSEwuZ2V0U3RyaW5nKCJNV1NERVMiKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgU0RFUyA9IGNvbnRhaW5lck1JVFdITC5nZXRTdHJpbmcoIk1XU0RFUyIpOw0KICAgICAgfQ0KDQogICAgICAvLyBQcm9jZXNzIENTWVRBQg0KICAgICAgREJDb250YWluZXIgY29udGFpbmVyQ1NZVEFCID0gY3N5dGFiTGlzdC5maW5kIHsNCiAgICAgICAgaXQuZ2V0U3RyaW5nKCJDVFNUS1kiKSA9PSBTREVTDQogICAgICB9Ow0KDQogICAgICBpZiAoY29udGFpbmVyQ1NZVEFCID09IG51bGwpIHsNCiAgICAgICAgREJBY3Rpb24gYWN0aW9uQ1NZVEFCID0gZGF0YWJhc2UudGFibGUoIkNTWVRBQiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiQ1RQQVJNIikuYnVpbGQoKTsNCiAgICAgICAgY29udGFpbmVyQ1NZVEFCID0gYWN0aW9uQ1NZVEFCLmdldENvbnRhaW5lcigpOw0KDQogICAgICAgIGNvbnRhaW5lckNTWVRBQi5zZXRJbnQoIkNUQ09OTyIsIGlDT05PIGFzIGludCk7DQogICAgICAgIGNvbnRhaW5lckNTWVRBQi5zZXQoIkNURElWSSIsICIiKTsNCiAgICAgICAgY29udGFpbmVyQ1NZVEFCLnNldCgiQ1RTVENPIiwgIkVERVMiKTsNCiAgICAgICAgY29udGFpbmVyQ1NZVEFCLnNldCgiQ1RTVEtZIiwgU0RFUyk7DQoNCiAgICAgICAgQ2xvc3VyZSA8ID8gPiByZWFkQWxsUmVjb3Jkc0NTWVRBQiA9IHsNCiAgICAgICAgICBEQkNvbnRhaW5lciByZXN1bHRDb250YWluZXIgLT4NCiAgICAgICAgICBjc3l0YWJMaXN0LmFkZChyZXN1bHRDb250YWluZXIuY3JlYXRlQ29weSgpKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUFBTVCIsIHJlc3VsdENvbnRhaW5lci5nZXRTdHJpbmcoIkNUUEFSTSIpLnN1YnN0cmluZygxNiwgMTgpKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGFjdGlvbkNTWVRBQi5yZWFkQWxsKGNvbnRhaW5lckNTWVRBQiwgNCwgMSwgcmVhZEFsbFJlY29yZHNDU1lUQUIpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoIlBQU1QiLCBjb250YWluZXJDU1lUQUIuZ2V0U3RyaW5nKCJDVFBBUk0iKS5zdWJzdHJpbmcoMTYsIDE4KSk7DQogICAgICB9DQoNCiAgICAgIC8vIFByb2Nlc3MgQ01OVVNSDQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXJDTU5VU1IgPSBjbW51c3JMaXN0LmZpbmQgew0KICAgICAgICBpdC5nZXRTdHJpbmcoIkpVVVNJRCIpID09IFJFU1ANCiAgICAgIH07DQoNCiAgICAgIGlmIChjb250YWluZXJDTU5VU1IgPT0gbnVsbCkgew0KICAgICAgICBEQkFjdGlvbiBhY3Rpb25DTU5VU1IgPSBkYXRhYmFzZS50YWJsZSgiQ01OVVNSIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJKVVRYNDAiKS5idWlsZCgpOw0KICAgICAgICBjb250YWluZXJDTU5VU1IgPSBhY3Rpb25DTU5VU1IuZ2V0Q29udGFpbmVyKCk7DQoNCiAgICAgICAgY29udGFpbmVyQ01OVVNSLnNldEludCgiSlVDT05PIiwgMCk7DQogICAgICAgIGNvbnRhaW5lckNNTlVTUi5zZXQoIkpVRElWSSIsICIiKTsNCiAgICAgICAgY29udGFpbmVyQ01OVVNSLnNldCgiSlVVU0lEIiwgUkVTUCk7DQoNCiAgICAgICAgaWYgKGFjdGlvbkNNTlVTUi5yZWFkKGNvbnRhaW5lckNNTlVTUikpIHsNCiAgICAgICAgICBjbW51c3JMaXN0LmFkZChjb250YWluZXJDTU5VU1IuY3JlYXRlQ29weSgpKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiVFg0MCIsIGNvbnRhaW5lckNNTlVTUi5nZXRTdHJpbmcoIkpVVFg0MCIpKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoIlRYNDAiLCBjb250YWluZXJDTU5VU1IuZ2V0U3RyaW5nKCJKVVRYNDAiKSk7DQogICAgICB9DQogICAgICANCiAgICAgIGNvbnRhaW5lckNNTlVTUiA9IGNtbnVzckxpc3QuZmluZCB7DQogICAgICAgIGl0LmdldFN0cmluZygiSlVVU0lEIikgPT0gQ0hJRA0KICAgICAgfTsNCg0KICAgICAgaWYgKGNvbnRhaW5lckNNTlVTUiA9PSBudWxsKSB7DQogICAgICAgIERCQWN0aW9uIGFjdGlvbkNNTlVTUiA9IGRhdGFiYXNlLnRhYmxlKCJDTU5VU1IiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkpVVFg0MCIpLmJ1aWxkKCk7DQogICAgICAgIGNvbnRhaW5lckNNTlVTUiA9IGFjdGlvbkNNTlVTUi5nZXRDb250YWluZXIoKTsNCg0KICAgICAgICBjb250YWluZXJDTU5VU1Iuc2V0SW50KCJKVUNPTk8iLCAwKTsNCiAgICAgICAgY29udGFpbmVyQ01OVVNSLnNldCgiSlVESVZJIiwgIiIpOw0KICAgICAgICBjb250YWluZXJDTU5VU1Iuc2V0KCJKVVVTSUQiLCBDSElEKTsNCg0KICAgICAgICBpZiAoYWN0aW9uQ01OVVNSLnJlYWQoY29udGFpbmVyQ01OVVNSKSkgew0KICAgICAgICAgIGNtbnVzckxpc3QuYWRkKGNvbnRhaW5lckNNTlVTUi5jcmVhdGVDb3B5KCkpOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJUWDQxIiwgY29udGFpbmVyQ01OVVNSLmdldFN0cmluZygiSlVUWDQwIikpOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5vdXREYXRhLnB1dCgiVFg0MSIsIGNvbnRhaW5lckNNTlVTUi5nZXRTdHJpbmcoIkpVVFg0MCIpKTsNCiAgICAgIH0NCg0KICAgICAgLy8gUHJvY2VzcyBNSVRMT0MNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1JVExPQyA9IG1pdGxvY0xpc3QuZmluZCB7DQogICAgICAgIGl0LmdldFN0cmluZygiTUxJVE5PIikgPT0gSVROTyAmJiBpdC5nZXRTdHJpbmcoIk1MQkFOTyIpID09IFNCQU4gJiYgaXQuZ2V0U3RyaW5nKCJNTENBTVUiKSA9PSBDQU1VDQogICAgICB9Ow0KDQogICAgICBpZiAoY29udGFpbmVyTUlUTE9DID09IG51bGwpIHsNCiAgICAgICAgRXhwcmVzc2lvbkZhY3RvcnkgTUlUTE9DZXhwcmVzc2lvbiA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJNSVRMT0MiKTsNCiAgICAgICAgTUlUTE9DZXhwcmVzc2lvbiA9IE1JVExPQ2V4cHJlc3Npb24uZXEoIk1MQ0FNVSIsIENBTVUpOw0KICAgICAgICBEQkFjdGlvbiBhY3Rpb25NSVRMT0MgPSBkYXRhYmFzZS50YWJsZSgiTUlUTE9DIikuaW5kZXgoIjE1IikubWF0Y2hpbmcoTUlUTE9DZXhwcmVzc2lvbikuc2VsZWN0aW9uKCJNTFdITE8iLCAiTUxXSFNMIiwgIk1MU1RBUyIpLmJ1aWxkKCk7DQogICAgICAgIGNvbnRhaW5lck1JVExPQyA9IGFjdGlvbk1JVExPQy5nZXRDb250YWluZXIoKTsNCg0KICAgICAgICBjb250YWluZXJNSVRMT0Muc2V0SW50KCJNTENPTk8iLCBpQ09OTyBhcyBpbnQpOw0KICAgICAgICBjb250YWluZXJNSVRMT0Muc2V0KCJNTElUTk8iLCBJVE5PKTsNCiAgICAgICAgY29udGFpbmVyTUlUTE9DLnNldCgiTUxCQU5PIiwgU0JBTik7DQoNCiAgICAgICAgQ2xvc3VyZSA8ID8gPiByZWFkQWxsUmVjb3Jkc01JVExPQyA9IHsNCiAgICAgICAgICBEQkNvbnRhaW5lciByZXN1bHRDb250YWluZXIgLT4NCiAgICAgICAgICBtaXRsb2NMaXN0LmFkZChyZXN1bHRDb250YWluZXIuY3JlYXRlQ29weSgpKTsNCiAgICAgICAgICBtaWxvbWFXSExPID0gcmVzdWx0Q29udGFpbmVyLmdldFN0cmluZygiTUxXSExPIik7DQogICAgICAgICAgbWlsb21hV0hTTCA9IHJlc3VsdENvbnRhaW5lci5nZXRTdHJpbmcoIk1MV0hTTCIpOw0KICAgICAgICAgIG1pbG9tYVNUQVMgPSByZXN1bHRDb250YWluZXIuZ2V0KCJNTFNUQVMiKS50b1N0cmluZygpOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJTVFFUIiwgcmVzdWx0Q29udGFpbmVyLmdldCgiTUxTVFFUIikudG9TdHJpbmcoKS50cmltKCkpOw0KICAgICAgICB9DQogICAgICAgIGFjdGlvbk1JVExPQy5yZWFkQWxsKGNvbnRhaW5lck1JVExPQywgMywgMSwgcmVhZEFsbFJlY29yZHNNSVRMT0MpDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaWxvbWFXSExPID0gY29udGFpbmVyTUlUTE9DLmdldFN0cmluZygiTUxXSExPIik7DQogICAgICAgIG1pbG9tYVdIU0wgPSBjb250YWluZXJNSVRMT0MuZ2V0U3RyaW5nKCJNTFdIU0wiKTsNCiAgICAgICAgbWlsb21hU1RBUyA9IGNvbnRhaW5lck1JVExPQy5nZXRTdHJpbmcoIk1MU1RBUyIpLnRvU3RyaW5nKCk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCJTVFFUIiwgY29udGFpbmVyTUlUTE9DLmdldCgiTUxTVFFUIikudG9TdHJpbmcoKS50cmltKCkpOw0KICAgICAgfQ0KICAgICAgaWYgKG1pbG9tYVdITE8gIT0gIiIpIHsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoIldITE8iLCBtaWxvbWFXSExPKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLm91dERhdGEucHV0KCJXSExPIiwgbWl0dHJhV0hMTyk7DQogICAgICB9DQoNCiAgICAgIGlmIChtaWxvbWFXSFNMICE9ICIiKSB7DQogICAgICAgIG1pLm91dERhdGEucHV0KCJXSFNMIiwgbWlsb21hV0hTTCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5vdXREYXRhLnB1dCgiV0hTTCIsIG1pdHRyYVdIU0wpOw0KICAgICAgfQ0KDQogICAgICBpZiAobWlsb21hU1RBUyAhPSAiIikgew0KICAgICAgICBtaS5vdXREYXRhLnB1dCgiU1RBUyIsIG1pbG9tYVNUQVMpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoIlNUQVMiLCBtaXR0cmFTVEFTKTsNCiAgICAgIH0NCg0KICAgICAgLy8gUHJvY2VzcyBNSVRNQVMNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1JVE1BUyA9IG1pdG1hc0xpc3QuZmluZCB7DQogICAgICAgIGl0LmdldFN0cmluZygiTU1JVE5PIikgPT0gSVROTw0KICAgICAgfTsNCg0KICAgICAgaWYgKGNvbnRhaW5lck1JVE1BUyA9PSBudWxsKSB7DQogICAgICAgIERCQWN0aW9uIGFjdGlvbk1JVE1BUyA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1NSVRUWSIsICJNTVVOTVMiKS5idWlsZCgpOw0KICAgICAgICBjb250YWluZXJNSVRNQVMgPSBhY3Rpb25NSVRNQVMuZ2V0Q29udGFpbmVyKCk7DQoNCiAgICAgICAgY29udGFpbmVyTUlUTUFTLnNldEludCgiTU1DT05PIiwgaUNPTk8gYXMgaW50KTsNCiAgICAgICAgY29udGFpbmVyTUlUTUFTLnNldCgiTU1JVE5PIiwgSVROTyk7DQoNCiAgICAgICAgaWYgKGFjdGlvbk1JVE1BUy5yZWFkKGNvbnRhaW5lck1JVE1BUykpIHsNCiAgICAgICAgICBtaXRtYXNMaXN0LmFkZChjb250YWluZXJNSVRNQVMuY3JlYXRlQ29weSgpKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiSVRUWSIsIGNvbnRhaW5lck1JVE1BUy5nZXRTdHJpbmcoIk1NSVRUWSIpKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiVU5NUyIsIGNvbnRhaW5lck1JVE1BUy5nZXRTdHJpbmcoIk1NVU5NUyIpKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoIklUVFkiLCBjb250YWluZXJNSVRNQVMuZ2V0U3RyaW5nKCJNTUlUVFkiKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCJVTk1TIiwgY29udGFpbmVyTUlUTUFTLmdldFN0cmluZygiTU1VTk1TIikpOw0KICAgICAgfQ0KDQogICAgICAvLyBXcml0ZSBvdXRwdXQgZGF0YQ0KICAgICAgbWkud3JpdGUoKTsNCiAgICB9Ow0KDQogICAgYWN0aW9uRVhUNDAyLnJlYWRBbGwoY29udGFpbmVyRVhUNDAyLCAxLCAxMDAwMCwgcmVhZEFsbFJlY29yZHNFWFQ0MDIpOw0KICB9DQp9"}}}