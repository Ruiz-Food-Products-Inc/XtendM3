{"programModules":{"EXT130MI":{"program":"EXT130MI","triggers":{},"transactions":{"setCORetRes":{"sourceUuid":"6e6db5e6-667f-4baa-9287-d777130d05c1","name":"setCORetRes","program":"EXT130MI","description":"setCORetRes","active":true,"multi":false,"modified":1695989534176,"modifiedBy":"900073","outputFields":[],"inputFields":[{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A","refField":null},{"name":"REPN","description":"Receiving number","length":12,"mandatory":true,"type":"A","refField":null},{"name":"ITNO","description":"Item number","length":15,"mandatory":true,"type":"A","refField":null},{"name":"BANO","description":"Lot number","length":20,"mandatory":true,"type":"A","refField":null},{"name":"CAMU","description":"Container","length":20,"mandatory":true,"type":"A","refField":null},{"name":"WHSL","description":"Location","length":10,"mandatory":true,"type":"A","refField":null},{"name":"TRES","description":"Responsible","length":10,"mandatory":false,"type":"A","refField":null}],"utilities":[],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"6e6db5e6-667f-4baa-9287-d777130d05c1":{"uuid":"6e6db5e6-667f-4baa-9287-d777130d05c1","updated":1751261793663,"updatedBy":"900073","created":1695989343431,"createdBy":"900073","apiVersion":"0.21","beVersion":"16.0.0.20250414161800.9","language":"GROOVY","codeHash":"1A9733ECD72CCD486F4BD59E19944897246459BE2BDC7A77B459C9B8A3B38CCD","code":"LyoqDQogKiBSRUFETUUNCiAqIHNldENPUmV0UmVzIC0gU2V0IHRoZSBDTyBSZXR1cm4gUmVzdWx0IGluIHRoZSBIZWFkZXIgVGV4dCBCbG9jaw0KICoNCiAqIE5hbWU6IEVYVDEzME1JLnNldENPUmV0UmVzDQogKiBEZXNjcmlwdGlvbjogc2V0Q09SZXRSZXMgLSBTZXQgdGhlIENPIFJldHVybiBSZXN1bHQgaW4gdGhlIEhlYWRlciBUZXh0IEJsb2NrDQogKiBEYXRlCSAgICAgIENoYW5nZWQgQnkgICAgRGVzY3JpcHRpb24NCiAqIDIwMjIxMjIyCSAgVklEVkVOICAgICAgICBzZXRDT1JldFJlcyAtIFNldCB0aGUgQ08gUmV0dXJuIFJlc3VsdCBpbiB0aGUgSGVhZGVyIFRleHQgQmxvY2sNCiAqIDIwMjMwMjE4CSAgVklEVkVOICAgICAgICBDaGFuZ2VzIGJhc2VkIG9uIEluZm9yIGZlZWRiYWNrDQogKiAyMDI1MDYyOSAgIEFKQVkgICAgICAgICAgRml4ZWQgQVBJIExpbmUgbnVtYmVyIGxvZ2ljDQogKiovDQoNCnB1YmxpYyBjbGFzcyBzZXRDT1JldFJlcyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pDQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXINCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQ0KICBwcml2YXRlIGZpbmFsIExvZ2dlckFQSSBsb2dnZXINCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0NCg0KICAvLyBJbnB1dCBmaWVsZHMNCiAgcHJpdmF0ZSBTdHJpbmcgaVdITE8NCiAgcHJpdmF0ZSBTdHJpbmcgaVJFUE4NCiAgcHJpdmF0ZSBTdHJpbmcgaUlUTk8NCiAgcHJpdmF0ZSBTdHJpbmcgaUJBTk8NCiAgcHJpdmF0ZSBTdHJpbmcgaUNBTVUNCiAgcHJpdmF0ZSBTdHJpbmcgaVdIU0wNCiAgcHJpdmF0ZSBTdHJpbmcgaVRSRVMNCg0KICBwcml2YXRlIFN0cmluZyBDT05PDQogIHByaXZhdGUgU3RyaW5nIENVTk8NCiAgcHJpdmF0ZSBTdHJpbmcgbGluZTFTdHJpbmcNCiAgcHJpdmF0ZSBTdHJpbmcgbGluZTJTdHJpbmcNCiAgcHJpdmF0ZSBTdHJpbmcgYXBpRXJyb3JNZXNzYWdlID0gIiINCiAgcHJpdmF0ZSBTdHJpbmcgYXBpRXJyb3JNc2lkID0gIiINCg0KICBwcml2YXRlIGxvbmcgVFhJRA0KICBwcml2YXRlIGxvbmcgbGFzdFVzZWRMaW5lTnVtYmVyID0gMA0KDQogIHByaXZhdGUgYm9vbGVhbiBpc0V4c3RpbmdUZXh0SWRVc2VkID0gZmFsc2UNCiAgcHJpdmF0ZSBib29sZWFuIGlzRXJyb3IgPSBmYWxzZQ0KDQogIHB1YmxpYyBzZXRDT1JldFJlcyhNSUFQSSBtaSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIsIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBMb2dnZXJBUEkgbG9nZ2VyLCBQcm9ncmFtQVBJIHByb2dyYW0pIHsNCiAgICB0aGlzLm1pID0gbWkNCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXINCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UNCiAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcg0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0NCiAgfQ0KDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7DQogICAgQ09OTyA9IHByb2dyYW0uTERBWkQuZ2V0KCJDT05PIikudG9TdHJpbmcoKQ0KDQogICAgaVdITE8gPSBtaS5pbkRhdGEuZ2V0KCJXSExPIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiV0hMTyIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaUlUTk8gPSBtaS5pbkRhdGEuZ2V0KCJJVE5PIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiSVROTyIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaVJFUE4gPSBtaS5pbkRhdGEuZ2V0KCJSRVBOIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiUkVQTiIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaUNBTVUgPSBtaS5pbkRhdGEuZ2V0KCJDQU1VIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ0FNVSIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaVdIU0wgPSBtaS5pbkRhdGEuZ2V0KCJXSFNMIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiV0hTTCIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaUJBTk8gPSBtaS5pbkRhdGEuZ2V0KCJCQU5PIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQkFOTyIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaVRSRVMgPSBtaS5pbkRhdGEuZ2V0KCJUUkVTIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiVFJFUyIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaWYgKHZhbGlkYXRlKCkpIHsNCiAgICAgIHByb2Nlc3MoKQ0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBDaGVjayBJdGVtTG9jYXRpb24gYW5kIEN1c3RvbWVyUmV0dXJuSGVhZGVyDQogICAqIEByZXR1cm4NCiAgICovDQogIHByaXZhdGUgYm9vbGVhbiB2YWxpZGF0ZSgpIHsNCiAgICBpZiAoIXZhbGlkYXRlSXRlbUxvY2F0aW9uKENPTk8sIGlXSExPLCBpSVROTywgaVdIU0wsIGlCQU5PLCBpQ0FNVSkpIHsNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgICBpZiAoIXZhbGlkYXRlQ3VzdG9tZXJSZXR1cm5zSGVhZGVyKENPTk8sIGlXSExPLCBpUkVQTikpIHsNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgICByZXR1cm4gdHJ1ZQ0KICB9DQoNCiAgLyoqDQogICAqDQogICAqIEBwYXJhbSBDT05PDQogICAqIEBwYXJhbSBXSExPDQogICAqIEBwYXJhbSBJVE5PDQogICAqIEBwYXJhbSBXSFNMDQogICAqIEBwYXJhbSBCQU5PDQogICAqIEBwYXJhbSBDQU1VDQogICAqIEByZXR1cm4NCiAgICovDQogIHByaXZhdGUgYm9vbGVhbiB2YWxpZGF0ZUl0ZW1Mb2NhdGlvbihTdHJpbmcgQ09OTywgU3RyaW5nIFdITE8sIFN0cmluZyBJVE5PLCBTdHJpbmcgV0hTTCwgU3RyaW5nIEJBTk8sIFN0cmluZyBDQU1VKSB7DQogICAgREJBY3Rpb24gYWN0aW9uTUlUTE9DID0gZGF0YWJhc2UudGFibGUoIk1JVExPQyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTUxDT05PIiwgIk1MV0hMTyIsICJNTElUTk8iLCAiTUxCQU5PIiwgIk1MQ0FNVSIsICJNTFdIU0wiKS5idWlsZCgpDQogICAgREJDb250YWluZXIgY29udGFpbmVyTUlUTE9DID0gYWN0aW9uTUlUTE9DLmdldENvbnRhaW5lcigpDQoNCiAgICBjb250YWluZXJNSVRMT0Muc2V0KCJNTENPTk8iLCBDT05PLnRvSW50ZWdlcigpKQ0KICAgIGNvbnRhaW5lck1JVExPQy5zZXQoIk1MV0hMTyIsIFdITE8pDQogICAgY29udGFpbmVyTUlUTE9DLnNldCgiTUxJVE5PIiwgSVROTykNCiAgICBjb250YWluZXJNSVRMT0Muc2V0KCJNTFdIU0wiLCBXSFNMKQ0KICAgIGNvbnRhaW5lck1JVExPQy5zZXQoIk1MQkFOTyIsIEJBTk8pDQogICAgY29udGFpbmVyTUlUTE9DLnNldCgiTUxDQU1VIiwgQ0FNVSkNCg0KICAgIGlmICghYWN0aW9uTUlUTE9DLnJlYWRBbGwoY29udGFpbmVyTUlUTE9DLCAzLCAxLCB7fSkpIHsNCiAgICAgIG1pLmVycm9yKCJUaGUgYmFsYW5jZSBpZGVudGl0eSBkb2VzIG5vdCBleGlzdCIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgcmV0dXJuIHRydWUNCiAgfQ0KDQogIC8qKg0KICAgKg0KICAgKiBAcGFyYW0gQ09OTw0KICAgKiBAcGFyYW0gV0hMTw0KICAgKiBAcGFyYW0gUkVQTg0KICAgKiBAcmV0dXJuDQogICAqLw0KICBwcml2YXRlIGJvb2xlYW4gdmFsaWRhdGVDdXN0b21lclJldHVybnNIZWFkZXIoU3RyaW5nIENPTk8sIFN0cmluZyBXSExPLCBTdHJpbmcgUkVQTikgew0KICAgIGxvbmcgUkVQTl9sb25nID0gUkVQTiA9PSAiIiA/IDAgOiBSRVBOIGFzIGxvbmcNCiAgICBib29sZWFuIGlzRmlyc3RSZWNvcmRSZWFkID0gZmFsc2UNCg0KICAgIERCQWN0aW9uIGFjdGlvbk9DSEVBRCA9IGRhdGFiYXNlLnRhYmxlKCJPQ0hFQUQiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk9DQ09OTyIsICJPQ1dITE8iLCAiT0NSRVBOIiwgIk9DVFhJRCIsICJPQ0NVTk8iKS5idWlsZCgpDQogICAgREJDb250YWluZXIgY29udGFpbmVyT0NIRUFEID0gYWN0aW9uT0NIRUFELmdldENvbnRhaW5lcigpDQoNCiAgICBjb250YWluZXJPQ0hFQUQuc2V0KCJPQ0NPTk8iLCBDT05PLnRvSW50ZWdlcigpKQ0KICAgIGNvbnRhaW5lck9DSEVBRC5zZXQoIk9DV0hMTyIsIFdITE8pDQogICAgY29udGFpbmVyT0NIRUFELnNldCgiT0NSRVBOIiwgUkVQTl9sb25nKQ0KDQogICAgQ2xvc3VyZTw/PiByZWFkQWxsUmVjb3JkT0NIRUFEID0gew0KICAgICAgREJDb250YWluZXIgcmVzdWx0Q29udGFpbmVyIC0+DQogICAgICAgIGlmICghaXNGaXJzdFJlY29yZFJlYWQpIHsNCiAgICAgICAgICBUWElEID0gcmVzdWx0Q29udGFpbmVyLmdldExvbmcoIk9DVFhJRCIpDQogICAgICAgICAgQ1VOTyA9IHJlc3VsdENvbnRhaW5lci5nZXRTdHJpbmcoIk9DQ1VOTyIpDQogICAgICAgICAgaXNGaXJzdFJlY29yZFJlYWQgPSB0cnVlDQogICAgICAgIH0NCiAgICB9DQogICAgaWYgKCFhY3Rpb25PQ0hFQUQucmVhZEFsbChjb250YWluZXJPQ0hFQUQsIDMsIDEsIHJlYWRBbGxSZWNvcmRPQ0hFQUQpKSB7DQogICAgICBtaS5lcnJvcigiUmVjZWl2aW5nIG51bWJlciAiICsgUkVQTiArICIgZG9lcyBub3QgZXhpc3QiLCAiUkVQTiIsICIwMyIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgcmV0dXJuIHRydWUNCiAgfQ0KDQogIC8qKg0KICAgKiBDaGVjayBUWElEDQogICAqLw0KICBwcml2YXRlIHZvaWQgcHJvY2VzcygpIHsNCiAgICBpZiAoVFhJRCA9PSAwKSB7DQogICAgICBUWElEID0gcnR2TmV3VGV4dElEKCkNCg0KICAgICAgaWYgKFRYSUQgPT0gMCkgew0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlzRXhzdGluZ1RleHRJZFVzZWQgPSBmYWxzZQ0KICAgIH0gZWxzZSB7DQogICAgICBpc0V4c3RpbmdUZXh0SWRVc2VkID0gdHJ1ZQ0KICAgIH0NCiAgICBpc0Vycm9yID0gZmFsc2UNCiAgICBpZighaXNFeHN0aW5nVGV4dElkVXNlZCl7DQogICAgICBhZGRUZXh0QmxvY2tIZWFkKFRYSUQsICJDT05UUkVTIiwgIk9TWVRYSCIsICJPQ0hFQUQwMCIsIGlDQU1VKQ0KICAgIH0NCg0KICAgIGlmIChpc0Vycm9yKSB7DQogICAgICBtaS5lcnJvcihhcGlFcnJvck1lc3NhZ2UgKyAiLCBhZGRUZXh0QmxvY2tIZWFkIikNCiAgICAgIHJldHVybg0KICAgIH0NCg0KICAgIGxpbmUxU3RyaW5nID0gIkk9IiArIGlJVE5PICsgIiBCPSIgKyBpQkFOTyArICIgTD0iICsgaVdIU0wNCiAgICBsaW5lMlN0cmluZyA9ICJDPSIgKyBpQ0FNVSArICIgUj0iICsgaVRSRVMNCg0KICAgIGlmIChjaGVja0lmTGluZUV4aXN0c0FscmVhZHkoVFhJRCwgIkNPTlRSRVMiLCAiT1NZVFhIIiwgIk9DSEVBRDAwIikpIHsNCiAgICAgIHVwZGF0ZUV4aXN0aW5nTGluZShUWElELCAiQ09OVFJFUyIsICJPU1lUWEgiLCAiT0NIRUFEMDAiLCBsYXN0VXNlZExpbmVOdW1iZXIsICJDPSIgKyBpQ0FNVSArICIgUj0iICsgaVRSRVMpDQoNCiAgICAgIGlmIChpc0Vycm9yKSB7DQogICAgICAgIG1pLmVycm9yKGFwaUVycm9yTWVzc2FnZSArICIsIHVwZGF0ZUV4aXN0aW5nTGluZSIpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgIH0gZWxzZSBpZiAoaXNFcnJvcikgew0KICAgICAgbWkuZXJyb3IoYXBpRXJyb3JNZXNzYWdlICsgIiwgY2hlY2tJZkxpbmVFeGlzdHNBbHJlYWR5IikNCiAgICAgIHJldHVybg0KICAgIH0gZWxzZSB7DQogICAgICBhZGROZXdMaW5lKFRYSUQsICJDT05UUkVTIiwgIk9TWVRYSCIsICJPQ0hFQUQwMCIsIChsYXN0VXNlZExpbmVOdW1iZXIgKyAxKS50b1N0cmluZygpLCBsaW5lMVN0cmluZykNCg0KICAgICAgaWYgKGlzRXJyb3IpIHsNCiAgICAgICAgbWkuZXJyb3IoYXBpRXJyb3JNZXNzYWdlICsgIiwgYWRkTmV3TGluZSAxIikNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQoNCiAgICAgIGFkZE5ld0xpbmUoVFhJRCwgIkNPTlRSRVMiLCAiT1NZVFhIIiwgIk9DSEVBRDAwIiwgKGxhc3RVc2VkTGluZU51bWJlciArIDIpLnRvU3RyaW5nKCksIGxpbmUyU3RyaW5nKQ0KDQogICAgICBpZiAoaXNFcnJvcikgew0KICAgICAgICBtaS5lcnJvcihhcGlFcnJvck1lc3NhZ2UgKyAiLCBhZGROZXdMaW5lIDIiKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoIWlzRXhzdGluZ1RleHRJZFVzZWQpIHsNCiAgICAgIHVwZGF0ZUN1c3RvbWVyUmV0dXJuSGVhZGVyV2l0aFRYSUQoQ09OTywgaVdITE8sIGlSRVBOLCBDVU5PKQ0KICAgICAgaWYgKGlzRXJyb3IpIHsNCiAgICAgICAgbWkuZXJyb3IoYXBpRXJyb3JNZXNzYWdlICsgIiwgdXBkYXRlQ3VzdG9tZXJSZXR1cm5IZWFkZXJXaXRoVFhJRCIpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBnZXQgbmV3IFRYSUQNCiAgICogQHJldHVybg0KICAgKi8NCiAgcHJpdmF0ZSBsb25nIHJ0dk5ld1RleHRJRCgpIHsNCiAgICBkZWYgcGFyYW1zID0gWyJDT05PIjogQ09OTywgIkZJTEUiOiAiT1NZVFhIIl0NCiAgICBsb25nIFRYSUQgPSAwDQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiBvdXQgLT4NCiAgICAgICAgaWYgKG91dC5lcnJvciAhPSBudWxsKSB7DQogICAgICAgICAgbWkuZXJyb3Iob3V0LmVycm9yTWVzc2FnZSk7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIFRYSUQgPSBvdXQuZ2V0KCJUWElEIikudG9Mb25nKCkNCiAgICB9DQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTOTgwTUkiLCAiUnR2TmV3VGV4dElEIiwgcGFyYW1zLCBjYWxsYmFjaykNCiAgICByZXR1cm4gVFhJRA0KICB9DQoNCiAgLyoqDQogICAqIGFkZFRleHRCbG9ja0hlYWQNCiAgICogQHBhcmFtIFRYSUQNCiAgICogQHBhcmFtIFRYVlINCiAgICogQHBhcmFtIFRGSUwNCiAgICogQHBhcmFtIEZJTEUNCiAgICogQHBhcmFtIENBTVUNCiAgICogQHJldHVybg0KICAgKi8NCiAgcHJpdmF0ZSBib29sZWFuIGFkZFRleHRCbG9ja0hlYWQobG9uZyBUWElELCBTdHJpbmcgVFhWUiwgU3RyaW5nIFRGSUwsIFN0cmluZyBGSUxFLCBTdHJpbmcgQ0FNVSkgew0KICAgIGRlZiBwYXJhbXMgPSBbDQogICAgICAiVFhJRCI6IFRYSUQudG9TdHJpbmcoKSwNCiAgICAgICJUWFZSIjogVFhWUiwNCiAgICAgICJURklMIjogVEZJTCwNCiAgICAgICJGSUxFIjogRklMRSwNCiAgICAgICJLRkxEIjogQ0FNVSwNCiAgICAgICJVU0lEIjogcHJvZ3JhbS5nZXRVc2VyKCksDQogICAgXQ0KICAgIGJvb2xlYW4gaXNBUElTdWNjZXNzZnVsID0gZmFsc2UNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IG91dCAtPg0KICAgICAgICAvKg0KICAgICAgICAgKiBJZ25vcmUgdGhlIHN0YW5kYXJkIGVycm9yIG1lc3NhZ2UgaW4gdGhpcyBjYXNlDQogICAgICAgICAqIE1XMjE2MDIgLT4gUmVjb3JkICYxIGV4aXN0cyBhbHJlYWR5DQogICAgICAgICAqLw0KICAgICAgICBpZiAob3V0LmVycm9yICE9IG51bGwgJiYgb3V0LmVycm9yTXNpZCA9PSAiTVcyMTYwMiIpIHsNCiAgICAgICAgICBvdXQuZXJyb3IgPSBudWxsDQogICAgICAgICAgb3V0LmVycm9yTXNpZCA9IG51bGwNCiAgICAgICAgICBvdXQuZXJyb3JNZXNzYWdlID0gbnVsbA0KICAgICAgICB9IGVsc2UgaWYgKG91dC5lcnJvciAhPSBudWxsKSB7DQogICAgICAgICAgaXNFcnJvciA9IHRydWUNCiAgICAgICAgICBhcGlFcnJvck1zaWQgPSBvdXQuZXJyb3JNc2lkDQogICAgICAgICAgYXBpRXJyb3JNZXNzYWdlID0gb3V0LmVycm9yTWVzc2FnZQ0KICAgICAgICB9DQogICAgICAgIGlzQVBJU3VjY2Vzc2Z1bCA9IHRydWUNCiAgICB9DQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTOTgwTUkiLCAiQWRkVHh0QmxvY2tIZWFkIiwgcGFyYW1zLCBjYWxsYmFjaykNCiAgICByZXR1cm4gaXNBUElTdWNjZXNzZnVsDQogIH0NCg0KICAvKioNCiAgICogYWRkTmV3TGluZQ0KICAgKiBAcGFyYW0gVFhJRA0KICAgKiBAcGFyYW0gVFhWUg0KICAgKiBAcGFyYW0gVEZJTA0KICAgKiBAcGFyYW0gRklMRQ0KICAgKiBAcGFyYW0gTElOTw0KICAgKiBAcGFyYW0gVFg2MA0KICAgKi8NCiAgcHJpdmF0ZSB2b2lkIGFkZE5ld0xpbmUobG9uZyBUWElELCBTdHJpbmcgVFhWUiwgU3RyaW5nIFRGSUwsIFN0cmluZyBGSUxFLCBTdHJpbmcgTElOTywgU3RyaW5nIFRYNjApIHsNCiAgICBkZWYgcGFyYW1zID0gWw0KICAgICAgIlRYSUQiOiBUWElELnRvU3RyaW5nKCksDQogICAgICAiVFhWUiI6IFRYVlIsDQogICAgICAiTElOTyI6IExJTk8sDQogICAgICAiVFg2MCI6IFRYNjAsDQogICAgICAiVEZJTCI6IFRGSUwsDQogICAgICAiRklMRSI6IEZJTEUNCiAgICBdDQoJDQoJbG9nZ2VyLmRlYnVnKHBhcmFtcy50b1N0cmluZygpKQ0KDQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiBvdXQgLT4NCg0KICAgICAgICBpZiAob3V0LmVyb3JyICE9IG51bGwpIHsNCiAgICAgICAgICBpc0Vycm9yID0gdHJ1ZQ0KICAgICAgICAgIGFwaUVycm9yTXNpZCA9IG91dC5lcnJvck1zaWQNCiAgICAgICAgICBhcGlFcnJvck1lc3NhZ2UgPSBvdXQuZXJyb3JNZXNzYWdlDQogICAgICAgIH0NCiAgICB9DQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTOTgwTUkiLCAiQWRkVHh0QmxvY2tMaW5lIiwgcGFyYW1zLCBjYWxsYmFjaykNCiAgfQ0KDQogIC8qKg0KICAgKiB1cGRhdGVFeGlzdGluZ0xpbmUNCiAgICogQHBhcmFtIFRYSUQNCiAgICogQHBhcmFtIFRYVlINCiAgICogQHBhcmFtIFRGSUwNCiAgICogQHBhcmFtIEZJTEUNCiAgICogQHBhcmFtIExJTk8NCiAgICogQHBhcmFtIFRYNjANCiAgICovDQogIHByaXZhdGUgdm9pZCB1cGRhdGVFeGlzdGluZ0xpbmUobG9uZyBUWElELCBTdHJpbmcgVFhWUiwgU3RyaW5nIFRGSUwsIFN0cmluZyBGSUxFLCBsb25nIExJTk8sIFN0cmluZyBUWDYwKSB7DQogICAgZGVmIHBhcmFtcyA9IFsNCiAgICAgICJUWElEIjogVFhJRC50b1N0cmluZygpLA0KICAgICAgIlRYVlIiOiBUWFZSLA0KICAgICAgIkxJTk8iOiBMSU5PLnRvU3RyaW5nKCksDQogICAgICAiVFg2MCI6IFRYNjAsDQogICAgICAiVEZJTCI6IFRGSUwsDQogICAgICAiRklMRSI6IEZJTEUNCiAgICBdDQoNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IG91dCAtPg0KDQogICAgICAgIGlmIChvdXQuZXJvcnIgIT0gbnVsbCkgew0KICAgICAgICAgIGlzRXJyb3IgPSB0cnVlDQogICAgICAgICAgYXBpRXJyb3JNc2lkID0gb3V0LmVycm9yTXNpZA0KICAgICAgICAgIGFwaUVycm9yTWVzc2FnZSA9IG91dC5lcnJvck1lc3NhZ2UNCiAgICAgICAgfQ0KICAgIH0NCiAgICBtaUNhbGxlci5jYWxsKCJDUlM5ODBNSSIsICJVcGRUeHRCbG9ja0xpbmUiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KICB9DQoNCiAgLyoqDQogICAqIGNoZWNrSWZMaW5lRXhpc3RzQWxyZWFkeQ0KICAgKiBAcGFyYW0gVFhJRA0KICAgKiBAcGFyYW0gVFhWUg0KICAgKiBAcGFyYW0gVEZJTA0KICAgKiBAcGFyYW0gRklMRQ0KICAgKiBAcmV0dXJuDQogICAqLw0KICBwcml2YXRlIGJvb2xlYW4gY2hlY2tJZkxpbmVFeGlzdHNBbHJlYWR5KGxvbmcgVFhJRCwgU3RyaW5nIFRYVlIsIFN0cmluZyBURklMLCBTdHJpbmcgRklMRSkgew0KICAgIGRlZiBwYXJhbXMgPSBbDQogICAgICAiVFhJRCI6IFRYSUQudG9TdHJpbmcoKSwNCiAgICAgICJUWFZSIjogVFhWUiwNCiAgICAgICJURklMIjogVEZJTCwNCiAgICAgICJGSUxFIjogRklMRQ0KICAgIF0NCg0KICAgIGxhc3RVc2VkTGluZU51bWJlciA9IDANCiAgICBTdHJpbmcgVFg2MCA9ICIiDQogICAgYm9vbGVhbiBpc0xpbmUxTWF0Y2hlZCA9IGZhbHNlDQogICAgYm9vbGVhbiBkb2VzSW5mb3JtYXRpb25FeGlzdHMgPSBmYWxzZQ0KDQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiBvdXQgLT4NCiAgICAgICAgLyoNCiAgICAgICAgICogWFJFMDEwMyAtPiBSZWNvcmQgZG9lcyBub3QgZXhpc3QuDQogICAgICAgICAqIElnbm9yZSB0aGlzIHN0YW5kYXJkIG1lc3NhZ2Ugc28gdGhhdCBsYXRlciBuZXcgaW5mb3JtYXRpb24gY2FuIGJlIGFkZGVkLg0KICAgICAgICAgKi8NCiAgICAgICAgaWYgKG91dC5lcnJvciAhPSBudWxsICYmIG91dC5lcnJvck1zaWQgIT0gIlhSRTAxMDMiKSB7DQogICAgICAgICAgaXNFcnJvciA9IHRydWUNCiAgICAgICAgICBhcGlFcnJvck1zaWQgPSBvdXQuZXJyb3JNc2lkDQogICAgICAgICAgYXBpRXJyb3JNZXNzYWdlID0gb3V0LmVycm9yTWVzc2FnZQ0KICAgICAgICB9IGVsc2UgaWYgKG91dC5lcm9yciA9PSBudWxsICYmICFkb2VzSW5mb3JtYXRpb25FeGlzdHMpIHsNCiAgICAgICAgICBsYXN0VXNlZExpbmVOdW1iZXIgPSAob3V0WyJMSU5PIl0gPT0gbnVsbCA/ICIwIiA6IG91dFsiTElOTyJdLnRvU3RyaW5nKCkudHJpbSgpKSBhcyBsb25nDQogICAgICAgICAgLyoNCiAgICAgICAgICAgKiBJbmZvcm1hdGlvbiBpbiB0ZXh0IGJsb2NrIGlzIHNhdmVkIGFzIHNldCBvZiAyIGxpbmVzLg0KICAgICAgICAgICAqIE9kZCBsaW5lIG51bWJlciBoYXMgaW5mb3JtYXRpb24gSXRlbSwgbG90IGFuZCBsb2NhdGlvbiwgYW5kIG5leHQgZXZlbiBsaW5lIG51bWJlciBoYXMgaW5mb3JtYXRpb24gQ29udGFpbmVyIGFuZCByZXNwb25zaWJsZS4NCiAgICAgICAgICAgKg0KICAgICAgICAgICAqIElmIG9kZCBsaW5lIG51bWJlciBtYXRoY2VzLCBuZXh0IGV2ZW4gbGluZSBudW1iZXIgbmVlZHMgdG8gYmUgY29tcGFyZWQgdG9vLiBJZiBib3RoIGxpbmVzIG1hdGNoZSwgdGhhdCBtZWFucyBsaW5lIGRldGFpbCBhbHJlYWR5IGV4aXN0cywgYW5kIHdlIG5lZWQgdG8gdXBkYXRlIGl0Lg0KICAgICAgICAgICAqDQogICAgICAgICAgICovDQogICAgICAgICAgaWYgKGxhc3RVc2VkTGluZU51bWJlciAlIDIgPT0gMSkgew0KICAgICAgICAgICAgVFg2MCA9IG91dFsiVFg2MCJdLnRvU3RyaW5nKCkudHJpbSgpDQogICAgICAgICAgICBpc0xpbmUxTWF0Y2hlZCA9IFRYNjAuY29udGFpbnMoIkk9IiArIGlJVE5PKSAmJiBUWDYwLmNvbnRhaW5zKCJCPSIgKyBpQkFOTykgJiYgVFg2MC5jb250YWlucygiTD0iICsgaVdIU0wpDQogICAgICAgICAgfSBlbHNlIGlmIChpc0xpbmUxTWF0Y2hlZCAmJiBsYXN0VXNlZExpbmVOdW1iZXIgJSAyID09IDApIHsNCiAgICAgICAgICAgIFRYNjAgPSBvdXRbIlRYNjAiXS50b1N0cmluZygpLnRyaW0oKQ0KICAgICAgICAgICAgZG9lc0luZm9ybWF0aW9uRXhpc3RzID0gVFg2MC5jb250YWlucygiQz0iICsgaUNBTVUpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGlzTGluZTFNYXRjaGVkID0gZmFsc2UNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBtaUNhbGxlci5jYWxsKCJDUlM5ODBNSSIsICJTbHRUeHRCbG9jayIsIHBhcmFtcywgY2FsbGJhY2spDQoJDQoJbG9nZ2VyLmRlYnVnKGRvZXNJbmZvcm1hdGlvbkV4aXN0cy50b1N0cmluZygpKQ0KDQogICAgcmV0dXJuIGRvZXNJbmZvcm1hdGlvbkV4aXN0cw0KICB9DQoNCiAgLyoqDQogICAqIHVwZGF0ZUN1c3RvbWVyUmV0dXJuSGVhZGVyV2l0aFRYSUQNCiAgICogQHBhcmFtIENPTk8NCiAgICogQHBhcmFtIFdITE8NCiAgICogQHBhcmFtIFJFUE4NCiAgICogQHBhcmFtIENVTk8NCiAgICogQHJldHVybg0KICAgKi8NCiAgcHJpdmF0ZSBib29sZWFuIHVwZGF0ZUN1c3RvbWVyUmV0dXJuSGVhZGVyV2l0aFRYSUQoU3RyaW5nIENPTk8sIFN0cmluZyBXSExPLCBTdHJpbmcgUkVQTiwgU3RyaW5nIENVTk8pIHsNCiAgICBkZWYgcGFyYW1zID0gWw0KICAgICAgIkZJTEUiOiAiT0NIRUFEMDAiLA0KICAgICAgIlRYSUQiOiBUWElELnRvU3RyaW5nKCksDQogICAgICAiS1YwMSI6IENPTk8sDQogICAgICAiS1YwMiI6IFdITE8sDQogICAgICAiS1YwMyI6IFJFUE4sDQogICAgICAiS1YwNCI6IENVTk8NCiAgICBdDQoNCiAgICBib29sZWFuIGlzQVBJU3VjY2Vzc2Z1bCA9IGZhbHNlDQoNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IG91dCAtPg0KDQogICAgICAgIGlmIChvdXQuZXJyb3IgIT0gbnVsbCkgew0KICAgICAgICAgIGlzRXJyb3IgPSB0cnVlDQogICAgICAgICAgYXBpRXJyb3JNc2lkID0gb3V0LmVycm9yTXNpZA0KICAgICAgICAgIGFwaUVycm9yTWVzc2FnZSA9IG91dC5lcnJvck1lc3NhZ2UNCiAgICAgICAgICBpc0FQSVN1Y2Nlc3NmdWwgPSBmYWxzZQ0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQoNCiAgICAgICAgaXNBUElTdWNjZXNzZnVsID0gdHJ1ZQ0KICAgIH0NCg0KICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzk4ME1JIiwgIlNldFRleHRJRCIsIHBhcmFtcywgY2FsbGJhY2spDQoNCiAgICByZXR1cm4gaXNBUElTdWNjZXNzZnVsDQogIH0NCn0NCg=="}}}