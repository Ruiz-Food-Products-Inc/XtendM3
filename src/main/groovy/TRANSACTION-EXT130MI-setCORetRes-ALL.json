{"programModules":{"EXT130MI":{"program":"EXT130MI","triggers":{},"transactions":{"setCORetRes":{"sourceUuid":"6e6db5e6-667f-4baa-9287-d777130d05c1","name":"setCORetRes","program":"EXT130MI","description":"setCORetRes","active":true,"multi":false,"modified":1676896508411,"modifiedBy":"900071","outputFields":[],"inputFields":[{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"REPN","description":"Receiving number","length":12,"mandatory":true,"type":"A"},{"name":"ITNO","description":"Item number","length":15,"mandatory":true,"type":"A"},{"name":"BANO","description":"Lot number","length":20,"mandatory":true,"type":"A"},{"name":"CAMU","description":"Container","length":20,"mandatory":true,"type":"A"},{"name":"WHSL","description":"Location","length":10,"mandatory":true,"type":"A"},{"name":"TRES","description":"Responsible","length":10,"mandatory":false,"type":"A"}],"utilities":[],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"6e6db5e6-667f-4baa-9287-d777130d05c1":{"uuid":"6e6db5e6-667f-4baa-9287-d777130d05c1","updated":1676765981315,"updatedBy":"900107","created":1676896502909,"createdBy":"900071","apiVersion":"UNKNOWN","beVersion":"16.0.0.20221210044646.7","language":"GROOVY","codeHash":"5C4E195D9442950661C83D54540AA5C76F54F732FBBF0C3A6F2F07F204C46038","code":"LyoqDQogKiBSRUFETUUNCiAqIHNldENPUmV0UmVzIC0gU2V0IHRoZSBDTyBSZXR1cm4gUmVzdWx0IGluIHRoZSBIZWFkZXIgVGV4dCBCbG9jaw0KICoNCiAqIE5hbWU6IEVYVDEzME1JLnNldENPUmV0UmVzDQogKiBEZXNjcmlwdGlvbjogc2V0Q09SZXRSZXMgLSBTZXQgdGhlIENPIFJldHVybiBSZXN1bHQgaW4gdGhlIEhlYWRlciBUZXh0IEJsb2NrDQogKiBEYXRlCSAgICAgIENoYW5nZWQgQnkgICAgRGVzY3JpcHRpb24NCiAqIDIwMjIxMjIyCSAgVklEVkVOICAgICAgICBzZXRDT1JldFJlcyAtIFNldCB0aGUgQ08gUmV0dXJuIFJlc3VsdCBpbiB0aGUgSGVhZGVyIFRleHQgQmxvY2sNCiAqIDIwMjMwMjE4CSAgVklEVkVOICAgICAgICBDaGFuZ2VzIGJhc2VkIG9uIEluZm9yIGZlZWRiYWNrDQogKiovDQoNCnB1YmxpYyBjbGFzcyBzZXRDT1JldFJlcyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pDQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXINCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQ0KICBwcml2YXRlIGZpbmFsIExvZ2dlckFQSSBsb2dnZXINCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0NCg0KICAvLyBJbnB1dCBmaWVsZHMNCiAgcHJpdmF0ZSBTdHJpbmcgaVdITE8NCiAgcHJpdmF0ZSBTdHJpbmcgaVJFUE4NCiAgcHJpdmF0ZSBTdHJpbmcgaUlUTk8NCiAgcHJpdmF0ZSBTdHJpbmcgaUJBTk8NCiAgcHJpdmF0ZSBTdHJpbmcgaUNBTVUNCiAgcHJpdmF0ZSBTdHJpbmcgaVdIU0wNCiAgcHJpdmF0ZSBTdHJpbmcgaVRSRVMNCg0KICBwcml2YXRlIFN0cmluZyBDT05PDQogIHByaXZhdGUgU3RyaW5nIENVTk8NCiAgcHJpdmF0ZSBTdHJpbmcgbGluZTFTdHJpbmcNCiAgcHJpdmF0ZSBTdHJpbmcgbGluZTJTdHJpbmcNCiAgcHJpdmF0ZSBTdHJpbmcgYXBpRXJyb3JNZXNzYWdlID0gIiINCiAgcHJpdmF0ZSBTdHJpbmcgYXBpRXJyb3JNc2lkID0gIiINCg0KICBwcml2YXRlIGxvbmcgVFhJRA0KICBwcml2YXRlIGxvbmcgbGFzdFVzZWRMaW5lTnVtYmVyID0gMA0KDQogIHByaXZhdGUgYm9vbGVhbiBpc0V4c3RpbmdUZXh0SWRVc2VkID0gZmFsc2UNCiAgcHJpdmF0ZSBib29sZWFuIGlzRXJyb3IgPSBmYWxzZQ0KDQogIHB1YmxpYyBzZXRDT1JldFJlcyhNSUFQSSBtaSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIsIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBMb2dnZXJBUEkgbG9nZ2VyLCBQcm9ncmFtQVBJIHByb2dyYW0pIHsNCiAgICB0aGlzLm1pID0gbWkNCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXINCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UNCiAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcg0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0NCiAgfQ0KDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7DQogICAgQ09OTyA9IHByb2dyYW0uTERBWkQuZ2V0KCJDT05PIikudG9TdHJpbmcoKQ0KDQogICAgaVdITE8gPSBtaS5pbkRhdGEuZ2V0KCJXSExPIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiV0hMTyIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaUlUTk8gPSBtaS5pbkRhdGEuZ2V0KCJJVE5PIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiSVROTyIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaVJFUE4gPSBtaS5pbkRhdGEuZ2V0KCJSRVBOIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiUkVQTiIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaUNBTVUgPSBtaS5pbkRhdGEuZ2V0KCJDQU1VIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ0FNVSIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaVdIU0wgPSBtaS5pbkRhdGEuZ2V0KCJXSFNMIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiV0hTTCIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaUJBTk8gPSBtaS5pbkRhdGEuZ2V0KCJCQU5PIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQkFOTyIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaVRSRVMgPSBtaS5pbkRhdGEuZ2V0KCJUUkVTIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiVFJFUyIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgaWYgKHZhbGlkYXRlKCkpIHsNCiAgICAgIHByb2Nlc3MoKQ0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBDaGVjayBJdGVtTG9jYXRpb24gYW5kIEN1c3RvbWVyUmV0dXJuSGVhZGVyDQogICAqIEByZXR1cm4NCiAgICovDQogIHByaXZhdGUgYm9vbGVhbiB2YWxpZGF0ZSgpIHsNCiAgICBpZiAoIXZhbGlkYXRlSXRlbUxvY2F0aW9uKENPTk8sIGlXSExPLCBpSVROTywgaVdIU0wsIGlCQU5PLCBpQ0FNVSkpIHsNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgICBpZiAoIXZhbGlkYXRlQ3VzdG9tZXJSZXR1cm5zSGVhZGVyKENPTk8sIGlXSExPLCBpUkVQTikpIHsNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgICByZXR1cm4gdHJ1ZQ0KICB9DQoNCiAgLyoqDQogICAqDQogICAqIEBwYXJhbSBDT05PDQogICAqIEBwYXJhbSBXSExPDQogICAqIEBwYXJhbSBJVE5PDQogICAqIEBwYXJhbSBXSFNMDQogICAqIEBwYXJhbSBCQU5PDQogICAqIEBwYXJhbSBDQU1VDQogICAqIEByZXR1cm4NCiAgICovDQogIHByaXZhdGUgYm9vbGVhbiB2YWxpZGF0ZUl0ZW1Mb2NhdGlvbihTdHJpbmcgQ09OTywgU3RyaW5nIFdITE8sIFN0cmluZyBJVE5PLCBTdHJpbmcgV0hTTCwgU3RyaW5nIEJBTk8sIFN0cmluZyBDQU1VKSB7DQogICAgREJBY3Rpb24gYWN0aW9uTUlUTE9DID0gZGF0YWJhc2UudGFibGUoIk1JVExPQyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTUxDT05PIiwgIk1MV0hMTyIsICJNTElUTk8iLCAiTUxCQU5PIiwgIk1MQ0FNVSIsICJNTFdIU0wiKS5idWlsZCgpDQogICAgREJDb250YWluZXIgY29udGFpbmVyTUlUTE9DID0gYWN0aW9uTUlUTE9DLmdldENvbnRhaW5lcigpDQoNCiAgICBjb250YWluZXJNSVRMT0Muc2V0KCJNTENPTk8iLCBDT05PLnRvSW50ZWdlcigpKQ0KICAgIGNvbnRhaW5lck1JVExPQy5zZXQoIk1MV0hMTyIsIFdITE8pDQogICAgY29udGFpbmVyTUlUTE9DLnNldCgiTUxJVE5PIiwgSVROTykNCiAgICBjb250YWluZXJNSVRMT0Muc2V0KCJNTFdIU0wiLCBXSFNMKQ0KICAgIGNvbnRhaW5lck1JVExPQy5zZXQoIk1MQkFOTyIsIEJBTk8pDQogICAgY29udGFpbmVyTUlUTE9DLnNldCgiTUxDQU1VIiwgQ0FNVSkNCg0KICAgIGlmICghYWN0aW9uTUlUTE9DLnJlYWRBbGwoY29udGFpbmVyTUlUTE9DLCAzLCAxLCB7fSkpIHsNCiAgICAgIG1pLmVycm9yKCJUaGUgYmFsYW5jZSBpZGVudGl0eSBkb2VzIG5vdCBleGlzdCIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgcmV0dXJuIHRydWUNCiAgfQ0KDQogIC8qKg0KICAgKg0KICAgKiBAcGFyYW0gQ09OTw0KICAgKiBAcGFyYW0gV0hMTw0KICAgKiBAcGFyYW0gUkVQTg0KICAgKiBAcmV0dXJuDQogICAqLw0KICBwcml2YXRlIGJvb2xlYW4gdmFsaWRhdGVDdXN0b21lclJldHVybnNIZWFkZXIoU3RyaW5nIENPTk8sIFN0cmluZyBXSExPLCBTdHJpbmcgUkVQTikgew0KICAgIGxvbmcgUkVQTl9sb25nID0gUkVQTiA9PSAiIiA/IDAgOiBSRVBOIGFzIGxvbmcNCiAgICBib29sZWFuIGlzRmlyc3RSZWNvcmRSZWFkID0gZmFsc2UNCg0KICAgIERCQWN0aW9uIGFjdGlvbk9DSEVBRCA9IGRhdGFiYXNlLnRhYmxlKCJPQ0hFQUQiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk9DQ09OTyIsICJPQ1dITE8iLCAiT0NSRVBOIiwgIk9DVFhJRCIsICJPQ0NVTk8iKS5idWlsZCgpDQogICAgREJDb250YWluZXIgY29udGFpbmVyT0NIRUFEID0gYWN0aW9uT0NIRUFELmdldENvbnRhaW5lcigpDQoNCiAgICBjb250YWluZXJPQ0hFQUQuc2V0KCJPQ0NPTk8iLCBDT05PLnRvSW50ZWdlcigpKQ0KICAgIGNvbnRhaW5lck9DSEVBRC5zZXQoIk9DV0hMTyIsIFdITE8pDQogICAgY29udGFpbmVyT0NIRUFELnNldCgiT0NSRVBOIiwgUkVQTl9sb25nKQ0KDQogICAgQ2xvc3VyZTw/PiByZWFkQWxsUmVjb3JkT0NIRUFEID0gew0KICAgICAgREJDb250YWluZXIgcmVzdWx0Q29udGFpbmVyIC0+DQogICAgICAgIGlmICghaXNGaXJzdFJlY29yZFJlYWQpIHsNCiAgICAgICAgICBUWElEID0gcmVzdWx0Q29udGFpbmVyLmdldExvbmcoIk9DVFhJRCIpDQogICAgICAgICAgQ1VOTyA9IHJlc3VsdENvbnRhaW5lci5nZXRTdHJpbmcoIk9DQ1VOTyIpDQogICAgICAgICAgaXNGaXJzdFJlY29yZFJlYWQgPSB0cnVlDQogICAgICAgIH0NCiAgICB9DQogICAgaWYgKCFhY3Rpb25PQ0hFQUQucmVhZEFsbChjb250YWluZXJPQ0hFQUQsIDMsIDEsIHJlYWRBbGxSZWNvcmRPQ0hFQUQpKSB7DQogICAgICBtaS5lcnJvcigiUmVjZWl2aW5nIG51bWJlciAiICsgUkVQTiArICIgZG9lcyBub3QgZXhpc3QiLCAiUkVQTiIsICIwMyIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgcmV0dXJuIHRydWUNCiAgfQ0KDQogIC8qKg0KICAgKiBDaGVjayBUWElEDQogICAqLw0KICBwcml2YXRlIHZvaWQgcHJvY2VzcygpIHsNCiAgICBpZiAoVFhJRCA9PSAwKSB7DQogICAgICBUWElEID0gcnR2TmV3VGV4dElEKCkNCg0KICAgICAgaWYgKFRYSUQgPT0gMCkgew0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlzRXhzdGluZ1RleHRJZFVzZWQgPSBmYWxzZQ0KICAgIH0gZWxzZSB7DQogICAgICBpc0V4c3RpbmdUZXh0SWRVc2VkID0gdHJ1ZQ0KICAgIH0NCiAgICBpc0Vycm9yID0gZmFsc2UNCiAgICBhZGRUZXh0QmxvY2tIZWFkKFRYSUQsICJDT05UUkVTIiwgIk9TWVRYSCIsICJPQ0hFQUQwMCIsIGlDQU1VKQ0KDQogICAgaWYgKGlzRXJyb3IpIHsNCiAgICAgIG1pLmVycm9yKGFwaUVycm9yTWVzc2FnZSArICIsIGFkZFRleHRCbG9ja0hlYWQiKQ0KICAgICAgcmV0dXJuDQogICAgfQ0KDQogICAgbGluZTFTdHJpbmcgPSAiST0iICsgaUlUTk8gKyAiIEI9IiArIGlCQU5PICsgIiBMPSIgKyBpV0hTTA0KICAgIGxpbmUyU3RyaW5nID0gIkM9IiArIGlDQU1VICsgIiBSPSIgKyBpVFJFUw0KDQogICAgaWYgKGNoZWNrSWZMaW5lRXhpc3RzQWxyZWFkeShUWElELCAiQ09OVFJFUyIsICJPU1lUWEgiLCAiT0NIRUFEMDAiKSkgew0KICAgICAgdXBkYXRlRXhpc3RpbmdMaW5lKFRYSUQsICJDT05UUkVTIiwgIk9TWVRYSCIsICJPQ0hFQUQwMCIsIGxhc3RVc2VkTGluZU51bWJlciwgIkM9IiArIGlDQU1VICsgIiBSPSIgKyBpVFJFUykNCg0KICAgICAgaWYgKGlzRXJyb3IpIHsNCiAgICAgICAgbWkuZXJyb3IoYXBpRXJyb3JNZXNzYWdlICsgIiwgdXBkYXRlRXhpc3RpbmdMaW5lIikNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgfSBlbHNlIGlmIChpc0Vycm9yKSB7DQogICAgICBtaS5lcnJvcihhcGlFcnJvck1lc3NhZ2UgKyAiLCBjaGVja0lmTGluZUV4aXN0c0FscmVhZHkiKQ0KICAgICAgcmV0dXJuDQogICAgfSBlbHNlIHsNCiAgICAgIGFkZE5ld0xpbmUoVFhJRCwgIkNPTlRSRVMiLCAiT1NZVFhIIiwgIk9DSEVBRDAwIiwgKGxhc3RVc2VkTGluZU51bWJlciArIDEpLnRvU3RyaW5nKCksIGxpbmUxU3RyaW5nKQ0KDQogICAgICBpZiAoaXNFcnJvcikgew0KICAgICAgICBtaS5lcnJvcihhcGlFcnJvck1lc3NhZ2UgKyAiLCBhZGROZXdMaW5lIDEiKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCg0KICAgICAgYWRkTmV3TGluZShUWElELCAiQ09OVFJFUyIsICJPU1lUWEgiLCAiT0NIRUFEMDAiLCAobGFzdFVzZWRMaW5lTnVtYmVyICsgMSkudG9TdHJpbmcoKSwgbGluZTJTdHJpbmcpDQoNCiAgICAgIGlmIChpc0Vycm9yKSB7DQogICAgICAgIG1pLmVycm9yKGFwaUVycm9yTWVzc2FnZSArICIsIGFkZE5ld0xpbmUgMiIpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICghaXNFeHN0aW5nVGV4dElkVXNlZCkgew0KICAgICAgdXBkYXRlQ3VzdG9tZXJSZXR1cm5IZWFkZXJXaXRoVFhJRChDT05PLCBpV0hMTywgaVJFUE4sIENVTk8pDQogICAgICBpZiAoaXNFcnJvcikgew0KICAgICAgICBtaS5lcnJvcihhcGlFcnJvck1lc3NhZ2UgKyAiLCB1cGRhdGVDdXN0b21lclJldHVybkhlYWRlcldpdGhUWElEIikNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgLyoqDQogICAqIGdldCBuZXcgVFhJRA0KICAgKiBAcmV0dXJuDQogICAqLw0KICBwcml2YXRlIGxvbmcgcnR2TmV3VGV4dElEKCkgew0KICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLCAiRklMRSI6ICJPU1lUWEgiXQ0KICAgIGxvbmcgVFhJRCA9IDANCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IG91dCAtPg0KICAgICAgICBpZiAob3V0LmVycm9yICE9IG51bGwpIHsNCiAgICAgICAgICBtaS5lcnJvcihvdXQuZXJyb3JNZXNzYWdlKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgVFhJRCA9IG91dC5nZXQoIlRYSUQiKS50b0xvbmcoKQ0KICAgIH0NCiAgICBtaUNhbGxlci5jYWxsKCJDUlM5ODBNSSIsICJSdHZOZXdUZXh0SUQiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KICAgIHJldHVybiBUWElEDQogIH0NCg0KICAvKioNCiAgICogYWRkVGV4dEJsb2NrSGVhZA0KICAgKiBAcGFyYW0gVFhJRA0KICAgKiBAcGFyYW0gVFhWUg0KICAgKiBAcGFyYW0gVEZJTA0KICAgKiBAcGFyYW0gRklMRQ0KICAgKiBAcGFyYW0gQ0FNVQ0KICAgKiBAcmV0dXJuDQogICAqLw0KICBwcml2YXRlIGJvb2xlYW4gYWRkVGV4dEJsb2NrSGVhZChsb25nIFRYSUQsIFN0cmluZyBUWFZSLCBTdHJpbmcgVEZJTCwgU3RyaW5nIEZJTEUsIFN0cmluZyBDQU1VKSB7DQogICAgZGVmIHBhcmFtcyA9IFsNCiAgICAgICJUWElEIjogVFhJRC50b1N0cmluZygpLA0KICAgICAgIlRYVlIiOiBUWFZSLA0KICAgICAgIlRGSUwiOiBURklMLA0KICAgICAgIkZJTEUiOiBGSUxFLA0KICAgICAgIktGTEQiOiBDQU1VLA0KICAgICAgIlVTSUQiOiBwcm9ncmFtLmdldFVzZXIoKSwNCiAgICBdDQogICAgYm9vbGVhbiBpc0FQSVN1Y2Nlc3NmdWwgPSBmYWxzZQ0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gb3V0IC0+DQogICAgICAgIC8qDQogICAgICAgICAqIElnbm9yZSB0aGUgc3RhbmRhcmQgZXJyb3IgbWVzc2FnZSBpbiB0aGlzIGNhc2UNCiAgICAgICAgICogTVcyMTYwMiAtPiBSZWNvcmQgJjEgZXhpc3RzIGFscmVhZHkNCiAgICAgICAgICovDQogICAgICAgIGlmIChvdXQuZXJyb3IgIT0gbnVsbCAmJiBvdXQuZXJyb3JNc2lkID09ICJNVzIxNjAyIikgew0KICAgICAgICAgIG91dC5lcnJvciA9IG51bGwNCiAgICAgICAgICBvdXQuZXJyb3JNc2lkID0gbnVsbA0KICAgICAgICAgIG91dC5lcnJvck1lc3NhZ2UgPSBudWxsDQogICAgICAgIH0gZWxzZSBpZiAob3V0LmVycm9yICE9IG51bGwpIHsNCiAgICAgICAgICBpc0Vycm9yID0gdHJ1ZQ0KICAgICAgICAgIGFwaUVycm9yTXNpZCA9IG91dC5lcnJvck1zaWQNCiAgICAgICAgICBhcGlFcnJvck1lc3NhZ2UgPSBvdXQuZXJyb3JNZXNzYWdlDQogICAgICAgIH0NCiAgICAgICAgaXNBUElTdWNjZXNzZnVsID0gdHJ1ZQ0KICAgIH0NCiAgICBtaUNhbGxlci5jYWxsKCJDUlM5ODBNSSIsICJBZGRUeHRCbG9ja0hlYWQiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KICAgIHJldHVybiBpc0FQSVN1Y2Nlc3NmdWwNCiAgfQ0KDQogIC8qKg0KICAgKiBhZGROZXdMaW5lDQogICAqIEBwYXJhbSBUWElEDQogICAqIEBwYXJhbSBUWFZSDQogICAqIEBwYXJhbSBURklMDQogICAqIEBwYXJhbSBGSUxFDQogICAqIEBwYXJhbSBMSU5PDQogICAqIEBwYXJhbSBUWDYwDQogICAqLw0KICBwcml2YXRlIHZvaWQgYWRkTmV3TGluZShsb25nIFRYSUQsIFN0cmluZyBUWFZSLCBTdHJpbmcgVEZJTCwgU3RyaW5nIEZJTEUsIFN0cmluZyBMSU5PLCBTdHJpbmcgVFg2MCkgew0KICAgIGRlZiBwYXJhbXMgPSBbDQogICAgICAiVFhJRCI6IFRYSUQudG9TdHJpbmcoKSwNCiAgICAgICJUWFZSIjogVFhWUiwNCiAgICAgICJMSU5PIjogTElOTywNCiAgICAgICJUWDYwIjogVFg2MCwNCiAgICAgICJURklMIjogVEZJTCwNCiAgICAgICJGSUxFIjogRklMRQ0KICAgIF0NCg0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gb3V0IC0+DQoNCiAgICAgICAgaWYgKG91dC5lcm9yciAhPSBudWxsKSB7DQogICAgICAgICAgaXNFcnJvciA9IHRydWUNCiAgICAgICAgICBhcGlFcnJvck1zaWQgPSBvdXQuZXJyb3JNc2lkDQogICAgICAgICAgYXBpRXJyb3JNZXNzYWdlID0gb3V0LmVycm9yTWVzc2FnZQ0KICAgICAgICB9DQogICAgfQ0KICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzk4ME1JIiwgIkFkZFR4dEJsb2NrTGluZSIsIHBhcmFtcywgY2FsbGJhY2spDQogIH0NCg0KICAvKioNCiAgICogdXBkYXRlRXhpc3RpbmdMaW5lDQogICAqIEBwYXJhbSBUWElEDQogICAqIEBwYXJhbSBUWFZSDQogICAqIEBwYXJhbSBURklMDQogICAqIEBwYXJhbSBGSUxFDQogICAqIEBwYXJhbSBMSU5PDQogICAqIEBwYXJhbSBUWDYwDQogICAqLw0KICBwcml2YXRlIHZvaWQgdXBkYXRlRXhpc3RpbmdMaW5lKGxvbmcgVFhJRCwgU3RyaW5nIFRYVlIsIFN0cmluZyBURklMLCBTdHJpbmcgRklMRSwgbG9uZyBMSU5PLCBTdHJpbmcgVFg2MCkgew0KICAgIGRlZiBwYXJhbXMgPSBbDQogICAgICAiVFhJRCI6IFRYSUQudG9TdHJpbmcoKSwNCiAgICAgICJUWFZSIjogVFhWUiwNCiAgICAgICJMSU5PIjogTElOTy50b1N0cmluZygpLA0KICAgICAgIlRYNjAiOiBUWDYwLA0KICAgICAgIlRGSUwiOiBURklMLA0KICAgICAgIkZJTEUiOiBGSUxFDQogICAgXQ0KDQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiBvdXQgLT4NCg0KICAgICAgICBpZiAob3V0LmVyb3JyICE9IG51bGwpIHsNCiAgICAgICAgICBpc0Vycm9yID0gdHJ1ZQ0KICAgICAgICAgIGFwaUVycm9yTXNpZCA9IG91dC5lcnJvck1zaWQNCiAgICAgICAgICBhcGlFcnJvck1lc3NhZ2UgPSBvdXQuZXJyb3JNZXNzYWdlDQogICAgICAgIH0NCiAgICB9DQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTOTgwTUkiLCAiVXBkVHh0QmxvY2tMaW5lIiwgcGFyYW1zLCBjYWxsYmFjaykNCiAgfQ0KDQogIC8qKg0KICAgKiBjaGVja0lmTGluZUV4aXN0c0FscmVhZHkNCiAgICogQHBhcmFtIFRYSUQNCiAgICogQHBhcmFtIFRYVlINCiAgICogQHBhcmFtIFRGSUwNCiAgICogQHBhcmFtIEZJTEUNCiAgICogQHJldHVybg0KICAgKi8NCiAgcHJpdmF0ZSBib29sZWFuIGNoZWNrSWZMaW5lRXhpc3RzQWxyZWFkeShsb25nIFRYSUQsIFN0cmluZyBUWFZSLCBTdHJpbmcgVEZJTCwgU3RyaW5nIEZJTEUpIHsNCiAgICBkZWYgcGFyYW1zID0gWw0KICAgICAgIlRYSUQiOiBUWElELnRvU3RyaW5nKCksDQogICAgICAiVFhWUiI6IFRYVlIsDQogICAgICAiVEZJTCI6IFRGSUwsDQogICAgICAiRklMRSI6IEZJTEUNCiAgICBdDQoNCiAgICBsYXN0VXNlZExpbmVOdW1iZXIgPSAwDQogICAgU3RyaW5nIFRYNjAgPSAiIg0KICAgIGJvb2xlYW4gaXNMaW5lMU1hdGNoZWQgPSBmYWxzZQ0KICAgIGJvb2xlYW4gZG9lc0luZm9ybWF0aW9uRXhpc3RzID0gZmFsc2UNCg0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gb3V0IC0+DQogICAgICAgIC8qDQogICAgICAgICAqIFhSRTAxMDMgLT4gUmVjb3JkIGRvZXMgbm90IGV4aXN0Lg0KICAgICAgICAgKiBJZ25vcmUgdGhpcyBzdGFuZGFyZCBtZXNzYWdlIHNvIHRoYXQgbGF0ZXIgbmV3IGluZm9ybWF0aW9uIGNhbiBiZSBhZGRlZC4NCiAgICAgICAgICovDQogICAgICAgIGlmIChvdXQuZXJyb3IgIT0gbnVsbCAmJiBvdXQuZXJyb3JNc2lkICE9ICJYUkUwMTAzIikgew0KICAgICAgICAgIGlzRXJyb3IgPSB0cnVlDQogICAgICAgICAgYXBpRXJyb3JNc2lkID0gb3V0LmVycm9yTXNpZA0KICAgICAgICAgIGFwaUVycm9yTWVzc2FnZSA9IG91dC5lcnJvck1lc3NhZ2UNCiAgICAgICAgfSBlbHNlIGlmIChvdXQuZXJvcnIgPT0gbnVsbCAmJiAhZG9lc0luZm9ybWF0aW9uRXhpc3RzKSB7DQogICAgICAgICAgbGFzdFVzZWRMaW5lTnVtYmVyID0gKG91dFsiTElOTyJdID09IG51bGwgPyAiMCIgOiBvdXRbIkxJTk8iXS50b1N0cmluZygpLnRyaW0oKSkgYXMgbG9uZw0KICAgICAgICAgIC8qDQogICAgICAgICAgICogSW5mb3JtYXRpb24gaW4gdGV4dCBibG9jayBpcyBzYXZlZCBhcyBzZXQgb2YgMiBsaW5lcy4NCiAgICAgICAgICAgKiBPZGQgbGluZSBudW1iZXIgaGFzIGluZm9ybWF0aW9uIEl0ZW0sIGxvdCBhbmQgbG9jYXRpb24sIGFuZCBuZXh0IGV2ZW4gbGluZSBudW1iZXIgaGFzIGluZm9ybWF0aW9uIENvbnRhaW5lciBhbmQgcmVzcG9uc2libGUuDQogICAgICAgICAgICoNCiAgICAgICAgICAgKiBJZiBvZGQgbGluZSBudW1iZXIgbWF0aGNlcywgbmV4dCBldmVuIGxpbmUgbnVtYmVyIG5lZWRzIHRvIGJlIGNvbXBhcmVkIHRvby4gSWYgYm90aCBsaW5lcyBtYXRjaGUsIHRoYXQgbWVhbnMgbGluZSBkZXRhaWwgYWxyZWFkeSBleGlzdHMsIGFuZCB3ZSBuZWVkIHRvIHVwZGF0ZSBpdC4NCiAgICAgICAgICAgKg0KICAgICAgICAgICAqLw0KICAgICAgICAgIGlmIChsYXN0VXNlZExpbmVOdW1iZXIgJSAyID09IDEpIHsNCiAgICAgICAgICAgIFRYNjAgPSBvdXRbIlRYNjAiXS50b1N0cmluZygpLnRyaW0oKQ0KICAgICAgICAgICAgaXNMaW5lMU1hdGNoZWQgPSBUWDYwLmNvbnRhaW5zKCJJPSIgKyBpSVROTykgJiYgVFg2MC5jb250YWlucygiQj0iICsgaUJBTk8pICYmIFRYNjAuY29udGFpbnMoIkw9IiArIGlXSFNMKQ0KICAgICAgICAgIH0gZWxzZSBpZiAoaXNMaW5lMU1hdGNoZWQgJiYgbGFzdFVzZWRMaW5lTnVtYmVyICUgMiA9PSAwKSB7DQogICAgICAgICAgICBUWDYwID0gb3V0WyJUWDYwIl0udG9TdHJpbmcoKS50cmltKCkNCiAgICAgICAgICAgIGRvZXNJbmZvcm1hdGlvbkV4aXN0cyA9IFRYNjAuY29udGFpbnMoIkM9IiArIGlDQU1VKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpc0xpbmUxTWF0Y2hlZCA9IGZhbHNlDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTOTgwTUkiLCAiU2x0VHh0QmxvY2siLCBwYXJhbXMsIGNhbGxiYWNrKQ0KDQogICAgcmV0dXJuIGRvZXNJbmZvcm1hdGlvbkV4aXN0cw0KICB9DQoNCiAgLyoqDQogICAqIHVwZGF0ZUN1c3RvbWVyUmV0dXJuSGVhZGVyV2l0aFRYSUQNCiAgICogQHBhcmFtIENPTk8NCiAgICogQHBhcmFtIFdITE8NCiAgICogQHBhcmFtIFJFUE4NCiAgICogQHBhcmFtIENVTk8NCiAgICogQHJldHVybg0KICAgKi8NCiAgcHJpdmF0ZSBib29sZWFuIHVwZGF0ZUN1c3RvbWVyUmV0dXJuSGVhZGVyV2l0aFRYSUQoU3RyaW5nIENPTk8sIFN0cmluZyBXSExPLCBTdHJpbmcgUkVQTiwgU3RyaW5nIENVTk8pIHsNCiAgICBkZWYgcGFyYW1zID0gWw0KICAgICAgIkZJTEUiOiAiT0NIRUFEMDAiLA0KICAgICAgIlRYSUQiOiBUWElELnRvU3RyaW5nKCksDQogICAgICAiS1YwMSI6IENPTk8sDQogICAgICAiS1YwMiI6IFdITE8sDQogICAgICAiS1YwMyI6IFJFUE4sDQogICAgICAiS1YwNCI6IENVTk8NCiAgICBdDQoNCiAgICBib29sZWFuIGlzQVBJU3VjY2Vzc2Z1bCA9IGZhbHNlDQoNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IG91dCAtPg0KDQogICAgICAgIGlmIChvdXQuZXJyb3IgIT0gbnVsbCkgew0KICAgICAgICAgIGlzRXJyb3IgPSB0cnVlDQogICAgICAgICAgYXBpRXJyb3JNc2lkID0gb3V0LmVycm9yTXNpZA0KICAgICAgICAgIGFwaUVycm9yTWVzc2FnZSA9IG91dC5lcnJvck1lc3NhZ2UNCiAgICAgICAgICBpc0FQSVN1Y2Nlc3NmdWwgPSBmYWxzZQ0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQoNCiAgICAgICAgaXNBUElTdWNjZXNzZnVsID0gdHJ1ZQ0KICAgIH0NCg0KICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzk4ME1JIiwgIlNldFRleHRJRCIsIHBhcmFtcywgY2FsbGJhY2spDQoNCiAgICByZXR1cm4gaXNBUElTdWNjZXNzZnVsDQogIH0NCn0NCg=="}}}