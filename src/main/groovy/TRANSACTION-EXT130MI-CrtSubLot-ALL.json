{"programModules":{"EXT130MI":{"program":"EXT130MI","triggers":{},"transactions":{"CrtSubLot":{"sourceUuid":"8c0667fc-ed5e-44b4-a3cc-ae87fd45eae6","name":"CrtSubLot","program":"EXT130MI","description":"Create Sub Lot","active":true,"multi":false,"modified":1676896175331,"modifiedBy":"900071","outputFields":[{"name":"SBAN","description":"SubLotNumber","length":20,"mandatory":false,"type":"A"}],"inputFields":[{"name":"CONO","description":"Company","length":3,"mandatory":false,"type":"N"},{"name":"ITNO","description":"Item Number","length":15,"mandatory":true,"type":"A"},{"name":"BANO","description":"Lot Number","length":20,"mandatory":true,"type":"A"}],"utilities":["DateUtil"],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"8c0667fc-ed5e-44b4-a3cc-ae87fd45eae6":{"uuid":"8c0667fc-ed5e-44b4-a3cc-ae87fd45eae6","updated":1676757968658,"updatedBy":"900107","created":1676896170580,"createdBy":"900071","apiVersion":"UNKNOWN","beVersion":"16.0.0.20221210044646.7","language":"GROOVY","codeHash":"CD40A150C6AF6E60328ECFE617B593916CC98953AB55AD3053AF92C67F8CCFBD","code":"LyoqDQogKiBSRUFETUUNCiAqIENyZWF0ZSBTdWJMb3QgZm9yIHRoZSBpbnB1dCBMb3QNCiAqDQogKiBOYW1lOiBFWFQxMzBNSS5DcnRTdWJMb3QNCiAqIERlc2NyaXB0aW9uOiBVcGRhdGUgYSByZWNvcmQgaW4gdGhlIE9PSEVBRCB0YWJsZQ0KICogRGF0ZQkgICAgICBDaGFuZ2VkIEJ5ICAgICAgICAgICAgRGVzY3JpcHRpb24NCiAqIDIwMjIxMDAxCSAgVklEVkVOICAgICAgICBDcmVhdGUgc3ViIGxvdCBmb3IgYW4gRXhpc3RpbmcgTG90DQogKiAyMDIzMDIxOAkgIFZJRFZFTiAgICAgICAgQ2hhbmdlcyBiYXNlZCBvbiBJbmZvciBmZWVkYmFjaw0KICoqLw0KDQpjbGFzcyBDcnRTdWJMb3QgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsNCiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQ0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlDQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtDQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXINCiAgcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyDQogIHByaXZhdGUgZmluYWwgVXRpbGl0eUFQSSB1dGlsaXR5DQoNCiAgLy9JbnB1dCBmaWVsZHMNCiAgcHJpdmF0ZSBTdHJpbmcgaUNPTk8NCiAgcHJpdmF0ZSBTdHJpbmcgaUlUTk8NCiAgcHJpdmF0ZSBTdHJpbmcgaUJBTk8NCg0KICBwcml2YXRlIFN0cmluZyBGQUNJDQoNCiAgQ3J0U3ViTG90KE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIsIFByb2dyYW1BUEkgcHJvZ3JhbSwgTG9nZ2VyQVBJIGxvZ2dlciwgVXRpbGl0eUFQSSB1dGlsaXR5KSB7DQogICAgdGhpcy5taSA9IG1pDQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlDQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQ0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcg0KICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyDQogICAgdGhpcy51dGlsaXR5ID0gdXRpbGl0eQ0KICB9DQoNCiAgLyoqDQogICAqIE1haW4gbWV0aG9kDQogICAqIEBwYXJhbQ0KICAgKiBAcmV0dXJuDQogICAqLw0KICB2b2lkIG1haW4oKSB7DQoNCiAgICBpQ09OTyA9IG1pLmluRGF0YS5nZXQoIkNPTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNPTk8iKS50cmltKCkgPT0gIiIgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKSA9PSAiPyIgPyBwcm9ncmFtLkxEQVpELkNPTk8udG9TdHJpbmcoKSA6IG1pLmluRGF0YS5nZXQoIkNPTk8iKS50cmltKCkNCiAgICBpSVROTyA9IG1pLmluRGF0YS5nZXQoIklUTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIklUTk8iKS50cmltKCkgPT0gIj8iID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJJVE5PIikudHJpbSgpDQogICAgaUJBTk8gPSBtaS5pbkRhdGEuZ2V0KCJCQU5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJCQU5PIikudHJpbSgpID09ICI/IiA/ICIiIDogbWkuaW5EYXRhLmdldCgiQkFOTyIpLnRyaW0oKQ0KDQogICAgbG9nZ2VyLmRlYnVnKCJDcnRTdWJMb3QgQVBJIGNhbGxlZCB3aXRoIElucHV0czogaUlUTk86ICIgKyBpSVROTy50cmltKCkgKyAiIC0tIGlCQU5POiAiICsgaUJBTk8udHJpbSgpKQ0KICAgIC8vIENoZWNrIGlmIHRoZSBpdGVtIGlzIHZhbGlkIGJ5IGNhbGxpbmcgdGhlIHZhbGlkYXRlSXRlbSBtZXRob2QNCiAgICBib29sZWFuIGNoZWNrSXRlbSA9IHZhbGlkYXRlSXRlbShpQ09OTy50b0ludGVnZXIoKSwgaUlUTk8pDQogICAgaWYgKGNoZWNrSXRlbSkgew0KICAgICAgLy8gQ2hlY2sgaWYgdGhlIGl0ZW0gbG90IGlzIHZhbGlkIGJ5IGNhbGxpbmcgdGhlIHZhbGlkYXRlSXRlbUxvdCBtZXRob2QNCiAgICAgIGJvb2xlYW4gY2hlY2tJdGVtTG90ID0gdmFsaWRhdGVJdGVtTG90KGlDT05PLnRvSW50ZWdlcigpLCBpSVROTywgaUJBTk8pDQogICAgICAvLyBJZiB0aGUgaXRlbSBsb3QgaXMgdmFsaWQsIHByb2NlZWQgdG8gY3JlYXRlIGEgbmV3IHN1YmxvdA0KICAgICAgaWYgKGNoZWNrSXRlbUxvdCkgew0KICAgICAgICAvLyBHZXQgdGhlIG5leHQgc3VibG90IG51bWJlciBmb3IgdGhlIGl0ZW0gYnkgY2FsbGluZyB0aGUgR2V0TmV4dFN1YkxvdE51bWJlciBtZXRob2QNCiAgICAgICAgU3RyaW5nIG5ld0JBTk8gPSBnZXROZXh0U3ViTG90TnVtYmVyKGlDT05PLCBpQkFOTywgaUlUTk8pDQogICAgICAgIC8vIENyZWF0ZSB0aGUgbmV3IHN1YmxvdCBieSBjYWxsaW5nIHRoZSBjcmVhdGVTdWJMb3QgbWV0aG9kDQogICAgICAgIGNyZWF0ZVN1YkxvdChpQ09OTy50b0ludGVnZXIoKSwgaUlUTk8sIG5ld0JBTk8pDQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgLyoqDQogICAqIFZhbGlkYXRlIGl0ZW0gbnVtYmVyDQogICAqIEBwYXJhbSBpbnRDT05PDQogICAqIEBwYXJhbSBpbklUTk8NCiAgICogQHJldHVybiB0cnVlIGlmIGl0ZW0gbnVtYmVyIGlzIHZhbGlkDQogICAqLw0KICBwcml2YXRlIGJvb2xlYW4gdmFsaWRhdGVJdGVtKGludCBpbnRDT05PLCBTdHJpbmcgaW5JVE5PKSB7DQogICAgREJBY3Rpb24gYWN0aW9uTUlUTUFTID0gZGF0YWJhc2UudGFibGUoIk1JVE1BUyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTU1DT05PIiwgIk1NSVROTyIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSVRNQVMgPSBhY3Rpb25NSVRNQVMuZ2V0Q29udGFpbmVyKCkNCiAgICBjb250YWluZXJNSVRNQVMuc2V0KCJNTUNPTk8iLCBpbnRDT05PKQ0KICAgIGNvbnRhaW5lck1JVE1BUy5zZXQoIk1NSVROTyIsIGluSVROTykNCiAgICBpZiAoIWFjdGlvbk1JVE1BUy5yZWFkKGNvbnRhaW5lck1JVE1BUykpIHsNCiAgICAgIG1pLmVycm9yKCJJdGVtIGRvZXMgbm90IGV4aXN0IikNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgICByZXR1cm4gdHJ1ZQ0KICB9DQoNCiAgLyoqDQogICAqICBWYWxpZGF0ZSBpdGVtL2xvdA0KICAgKiBAcGFyYW0gaW5DT05PDQogICAqIEBwYXJhbSBpbklUTk8NCiAgICogQHBhcmFtIGluQkFOTw0KICAgKiBAcmV0dXJuIHRydWUgaWYgaXRlbS9sb3QgaXMgdmFsaWQNCiAgICovDQogIHByaXZhdGUgYm9vbGVhbiB2YWxpZGF0ZUl0ZW1Mb3QoaW50IGluQ09OTywgU3RyaW5nIGluSVROTywgU3RyaW5nIGluQkFOTykgew0KICAgIERCQWN0aW9uIGFjdGlvbk1JTE9NQSA9IGRhdGFiYXNlLnRhYmxlKCJNSUxPTUEiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkxNRkFDSSIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSUxPTUEgPSBhY3Rpb25NSUxPTUEuZ2V0Q29udGFpbmVyKCkNCiAgICBjb250YWluZXJNSUxPTUEuc2V0KCJMTUNPTk8iLCBpbkNPTk8pDQogICAgY29udGFpbmVyTUlMT01BLnNldCgiTE1JVE5PIiwgaW5JVE5PKQ0KICAgIGNvbnRhaW5lck1JTE9NQS5zZXQoIkxNQkFOTyIsIGluQkFOTy50cmltKCkpDQogICAgaWYgKCFhY3Rpb25NSUxPTUEucmVhZChjb250YWluZXJNSUxPTUEpKSB7DQogICAgICBtaS5lcnJvcigiSXRlbS9Mb3QgcmVjb3JkIGRvZXMgbm90IGV4aXN0IikNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgICBGQUNJID0gY29udGFpbmVyTUlMT01BLmdldFN0cmluZygiTE1GQUNJIikNCiAgICByZXR1cm4gdHJ1ZQ0KICB9DQoNCiAgLyoqDQogICAqIEdldCB0aGUgbmV4dCBzdWJsb3QgbnVtYmVyIGZvciB0aGUgb3JpZ2luYWwgbG90DQogICAqIEBwYXJhbSBpbkNPTk8NCiAgICogQHBhcmFtIGluQkFOTw0KICAgKiBAcGFyYW0gaW5JVE5PDQogICAqIEByZXR1cm4gc3ViLWxvdCBOdW1iZXINCiAgICovDQogIFN0cmluZyBnZXROZXh0U3ViTG90TnVtYmVyKFN0cmluZyBpbkNPTk8sIFN0cmluZyBpbkJBTk8sIFN0cmluZyBpbklUTk8pIHsNCiAgICBTdHJpbmcgb3JpZ2luYWxCQU5PID0gIiINCiAgICAvL1NldCBvcmlnaW5hbEJBTk8gdG8gZWl0aGVyIGEgc3Vic3RyaW5nIG9mIHRoZSBpbnB1dCBpbkJBTk8gdXAgdG8gdGhlIGxhc3Qgb2NjdXJyZW5jZSBvZiAifCIsIG9yIHRvIHRoZSBpbnB1dCBpbkJBTk8gaWYgdGhlICJ8IiBpcyBub3QgcHJlc2VudC4NCiAgICBpZiAoaW5CQU5PLmNvbnRhaW5zKCJ8IikpIHsNCiAgICAgIGludCBpbmRleCA9IGluQkFOTy5sYXN0SW5kZXhPZigifCIpDQogICAgICBvcmlnaW5hbEJBTk8gPSBpbkJBTk8uc3Vic3RyaW5nKDAsIGluZGV4KQ0KICAgIH0gZWxzZSB7DQogICAgICBvcmlnaW5hbEJBTk8gPSBpbkJBTk8NCiAgICB9DQoNCiAgICBEQkFjdGlvbiBhY3Rpb25NSUxPTUEgPSBkYXRhYmFzZS50YWJsZSgiTUlMT01BIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJMTUJBTk8iKS5idWlsZCgpDQogICAgREJDb250YWluZXIgY29udGFpbmVyTUlMT01BID0gYWN0aW9uTUlMT01BLmdldENvbnRhaW5lcigpDQogICAgY29udGFpbmVyTUlMT01BLnNldCgiTE1DT05PIiwgaUNPTk8udG9JbnRlZ2VyKCkpDQogICAgY29udGFpbmVyTUlMT01BLnNldCgiTE1JVE5PIiwgaW5JVE5PKQ0KICAgIGludCBzdWZmaXggPSAwDQoNCiAgICBDbG9zdXJlPD8+IHJlYWRBbGxSZWNvcmRNSUxPTUEgPSB7IERCQ29udGFpbmVyIHJlc3VsdENvbnRhaW5lciAtPg0KICAgICAgU3RyaW5nIEJBTk8gPSByZXN1bHRDb250YWluZXIuZ2V0U3RyaW5nKCJMTUJBTk8iKQ0KICAgICAgLy9DaGVjayBpZiB0aGUgInwiIGlzIHByZXNlbnQgaW4gQkFOTyBhbmQgc2V0cyBMb3QgYW5kIHN1YkxvdCBiYXNlZCBvbiBpdHMgcHJlc2VuY2UuDQogICAgICAvLyBJZiBMb3QgbWF0Y2hlcyBvcmlnaW5hbEJBTk8sIGl0IHVwZGF0ZXMgc3VmZml4IHdpdGggdGhlIG1heGltdW0gb2Ygc3ViTG90IGNvbnZlcnRlZCB0byBhbiBpbnRlZ2VyLg0KICAgICAgaWYgKEJBTk8uY29udGFpbnMoInwiKSkgew0KICAgICAgICBTdHJpbmcgTG90ID0gQkFOTy5zdWJzdHJpbmcoMCwgQkFOTy5sYXN0SW5kZXhPZigifCIpKQ0KICAgICAgICBTdHJpbmcgc3ViTG90ID0gQkFOTy5zdWJzdHJpbmcoQkFOTy5sYXN0SW5kZXhPZigifCIpICsgMSkNCg0KICAgICAgICBpZiAoTG90LnRyaW0oKSA9PSBvcmlnaW5hbEJBTk8pIHsNCiAgICAgICAgICBzdWZmaXggPSBzdWJMb3QudG9JbnRlZ2VyKCkgPiBzdWZmaXggPyBzdWJMb3QudG9JbnRlZ2VyKCkgOiBzdWZmaXgNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBpZiAoIWFjdGlvbk1JTE9NQS5yZWFkQWxsKGNvbnRhaW5lck1JTE9NQSwgMiwgcmVhZEFsbFJlY29yZE1JTE9NQSkpIHsNCiAgICAgIG1pLmVycm9yKCJJdGVtL0xvdCByZWNvcmQgZG9lcyBub3QgZXhpc3QiKQ0KICAgIH0gZWxzZSB7DQogICAgICAvLw0KICAgIH0NCiAgICByZXR1cm4gb3JpZ2luYWxCQU5PICsgInwiICsgU3RyaW5nLmZvcm1hdCgiJTAzZCIsIChzdWZmaXggKyAxKSkNCiAgfQ0KDQogIC8qKg0KICAgKiBDcmVhdGUgc3ViTG90IC0gQ2FsbHMgTU1TMjM1TUkuQWRkSXRtTG90DQogICAqIEBwYXJhbSBpbkNPTk8NCiAgICogQHBhcmFtIGluSVROTw0KICAgKiBAcGFyYW0gaW5CQU5PDQogICAqIEByZXR1cm4NCiAgICovDQogIHByaXZhdGUgY3JlYXRlU3ViTG90KGludCBpbkNPTk8sIFN0cmluZyBpbklUTk8sIFN0cmluZyBpbkJBTk8pIHsNCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHBhcmFtcyA9IFsiQ09OTyI6IGluQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIklUTk8iOiBpbklUTk8udG9TdHJpbmcoKS50cmltKCksICJCQU5PIjogaW5CQU5PLnRvU3RyaW5nKCkudHJpbSgpXQ0KDQogICAgYm9vbGVhbiBpc0FQSVN1Y2Nlc3NmdWwgPSBmYWxzZQ0KICAgIENsb3N1cmU8Pz4gaGFuZGxlciA9IHsgTWFwPFN0cmluZywNCiAgICAgIFN0cmluZz4gcmVzcG9uc2UgLT4NCiAgICAgIGlmIChyZXNwb25zZS5lcnJvcikgew0KICAgICAgICBtaS5lcnJvcihyZXNwb25zZS5lcnJvck1lc3NhZ2UudG9TdHJpbmcoKSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9IGVsc2Ugew0KICAgICAgICBpc0FQSVN1Y2Nlc3NmdWwgPSB0cnVlDQogICAgICAgIG1pLm91dERhdGEucHV0KCJTQkFOIiwgaW5CQU5PKQ0KICAgICAgICBtaS53cml0ZSgpDQogICAgICB9DQogICAgfQ0KICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzIzNU1JIiwgIkFkZEl0bUxvdCIsIHBhcmFtcywgaGFuZGxlcikNCg0KICAgIGlmIChpc0FQSVN1Y2Nlc3NmdWwpIHsNCiAgICAgIGNyZWF0ZVFJUmVxdWVzdChpbkJBTk8pDQogICAgfQ0KICB9DQovKioNCiAqIENyZWF0ZSBRSSByZXF1ZXN0DQogKiBAcGFyYW0gTkJBTg0KICogQHJldHVybg0KICovDQogIHByaXZhdGUgY3JlYXRlUUlSZXF1ZXN0KFN0cmluZyBOQkFOKSB7DQoNCiAgICBEQkFjdGlvbiBhY3Rpb25RTVNSUUggPSBkYXRhYmFzZS50YWJsZSgiUU1TUlFIIikuaW5kZXgoIjMwIikuc2VsZWN0aW9uKCJSSENPTk8iLCAiUkhJVE5PIiwgIlJIQkFOTyIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJRTVNSUUggPSBhY3Rpb25RTVNSUUguZ2V0Q29udGFpbmVyKCkNCg0KICAgIGNvbnRhaW5lclFNU1JRSC5zZXQoIlJIQ09OTyIsIGlDT05PLnRvSW50ZWdlcigpKQ0KICAgIGNvbnRhaW5lclFNU1JRSC5zZXQoIlJISVROTyIsIGlJVE5PKQ0KICAgIGNvbnRhaW5lclFNU1JRSC5zZXQoIlJIQkFOTyIsIE5CQU4pDQoNCiAgICBDbG9zdXJlPD8+IHJlYWRBbGxSZWNvcmRzUU1TUlFIID0geyBEQkNvbnRhaW5lciBjb250YWluZXIgLT4NCiAgICB9DQoNCiAgICBpZiAoIWFjdGlvblFNU1JRSC5yZWFkQWxsKGNvbnRhaW5lclFNU1JRSCwgMywgMSwgcmVhZEFsbFJlY29yZHNRTVNSUUgpKSB7DQogICAgICBib29sZWFuIGlzQVBJU3VjY2Vzc2Z1bCA9IGZhbHNlDQogICAgICBTdHJpbmcgUVJJRCA9ICIiDQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IGFkZFFJUmVxdWVzdFBhcmFtcyA9IFsiRkFDSSI6IEZBQ0ksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSVROTyI6IGlJVE5PLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkJBTk8iOiBOQkFOLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlFSRFQiOiB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImN1cnJlbnREYXRlWThBc0ludCIpLnRvU3RyaW5nKCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiU1JUVCI6ICIxIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUUFMxIjogIjAiXQ0KDQogICAgICBDbG9zdXJlPD8+IGFkZFFJUmVxdWVzdEhhbmRsZXIgPSB7IE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4NCiAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7DQogICAgICAgICAgbWkuZXJyb3IocmVzcG9uc2UuZXJyb3JNZXNzYWdlLnRvU3RyaW5nKCkpDQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaXNBUElTdWNjZXNzZnVsID0gdHJ1ZQ0KICAgICAgICAgIFFSSUQgPSByZXNwb25zZS5RUklEDQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgbWlDYWxsZXIuY2FsbCgiUU1TMzAwTUkiLCAiQWRkUUlSZXF1ZXN0IiwgYWRkUUlSZXF1ZXN0UGFyYW1zLCBhZGRRSVJlcXVlc3RIYW5kbGVyKQ0KICAgICAgaWYgKGlzQVBJU3VjY2Vzc2Z1bCkgew0KICAgICAgICBxbXMzMDBNSUFkZFFJUmVxdWVzdFN1Y2Nlc3NmdWwoUVJJRCkNCiAgICAgIH0NCiAgICB9DQogIH0NCi8qKg0KICogQ2FsbCBBZGQgUUkgcmVxdWVzdCB1c2luZyBRTVMzMDAgQVBJIGNhbGxzDQogKiBAcGFyYW0gUVJJRA0KICovDQogIHByaXZhdGUgdm9pZCBxbXMzMDBNSUFkZFFJUmVxdWVzdFN1Y2Nlc3NmdWwoU3RyaW5nIFFSSUQpIHsNCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHVwZFFJUmVxdWVzdFBhcmFtcyA9IFsiRkFDSSI6IEZBQ0ksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlFSSUQiOiBRUklELA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJVE5PIjogaUlUTk8sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlFTVEEiOiAiMSJdDQoNCiAgICBDbG9zdXJlPD8+IHVwZFFJUmVxdWVzdEhhbmRsZXIgPSB7IE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4NCiAgICAgIGlmIChyZXNwb25zZS5lcnJvcikgew0KICAgICAgICBtaS5lcnJvcihyZXNwb25zZS5lcnJvck1lc3NhZ2UudG9TdHJpbmcoKSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9IGVsc2Ugew0KICAgICAgfQ0KICAgIH0NCiAgICBsb2dnZXIuZGVidWcoIkNhbGxpbmcgUU1TMzAwTUkgVXBkUUlSZXF1ZXN0IC0gUGFyYW1zOiAiICsgdXBkUUlSZXF1ZXN0UGFyYW1zLnRvU3RyaW5nKCkpDQogICAgbWlDYWxsZXIuY2FsbCgiUU1TMzAwTUkiLCAiVXBkUUlSZXF1ZXN0IiwgdXBkUUlSZXF1ZXN0UGFyYW1zLCB1cGRRSVJlcXVlc3RIYW5kbGVyKQ0KDQogICAgTWFwPFN0cmluZywgU3RyaW5nPiB1cGRUZXN0UmVzdWx0UGFyYW1zID0gWyJGQUNJIjogRkFDSSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlFSSUQiOiBRUklELA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSVROTyI6IGlJVE5PLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUVRTVCI6ICJEVU1NWSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJUU1RZIjogIjIiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVFNFUSI6ICIwMDAxIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlFMQ0QiOiAiQ09NUExFVEUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiVkxFTiI6ICIxIl0NCiAgICBDbG9zdXJlPD8+IHVwZFRlc3RSZXN1bHRIYW5kbGVyID0geyBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3BvbnNlIC0+DQogICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHsNCiAgICAgICAgbG9nZ2VyLmRlYnVnKCJNSSBFcnJvciB1cGRUZXN0UmVzdWx0SGFuZGxlciIpDQogICAgICAgIG1pLmVycm9yKHJlc3BvbnNlLmVycm9yTWVzc2FnZS50b1N0cmluZygpKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICB9DQogICAgbG9nZ2VyLmRlYnVnKCJDYWxsaW5nIFFNUzQwME1JIFVwZFRlc3RSZXN1bHQgLSBQYXJhbXM6ICIgKyB1cGRUZXN0UmVzdWx0UGFyYW1zLnRvU3RyaW5nKCkpDQogICAgbWlDYWxsZXIuY2FsbCgiUU1TNDAwTUkiLCAiVXBkVGVzdFJlc3VsdCIsIHVwZFRlc3RSZXN1bHRQYXJhbXMsIHVwZFRlc3RSZXN1bHRIYW5kbGVyKQ0KICB9DQp9DQo="}}}