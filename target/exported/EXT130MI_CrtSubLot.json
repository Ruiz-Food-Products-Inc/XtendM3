{"programModules":{"EXT130MI":{"program":"EXT130MI","triggers":{},"transactions":{"CrtSubLot":{"sourceUuid":"22cccf57-6d9a-4d8f-8182-59c59c169eaf","name":"CrtSubLot","program":"EXT130MI","description":"Create Sub Lot","active":false,"multi":false,"modified":1674085536255,"modifiedBy":"VIDYA","outputFields":[{"name":"SBAN","description":"SubLotNumber","length":20,"mandatory":false,"type":"A"}],"inputFields":[{"name":"CONO","description":"Company","length":3,"mandatory":false,"type":"N"},{"name":"ITNO","description":"Item Number","length":15,"mandatory":true,"type":"A"},{"name":"BANO","description":"Lot Number","length":20,"mandatory":true,"type":"A"}],"utilities":[]}},"batches":{},"utilities":{}}},"utilities":{},"sources":{"22cccf57-6d9a-4d8f-8182-59c59c169eaf":{"uuid":"22cccf57-6d9a-4d8f-8182-59c59c169eaf","updated":1674085536255,"updatedBy":"VIDYA","created":1674085536255,"createdBy":"VIDYA","apiVersion":"UNKNOWN","beVersion":"","code":"LyoqCiAqIFJFQURNRQogKiBDcmVhdGUgU3ViTG90IGZvciB0aGUgaW5wdXQgTG90CiAqCiAqIE5hbWU6IEVYVDEzME1JLkNydFN1YkxvdAogKiBEZXNjcmlwdGlvbjogVXBkYXRlIGEgcmVjb3JkIGluIHRoZSBPT0hFQUQgdGFibGUKICogRGF0ZQkgICAgICBDaGFuZ2VkIEJ5ICAgICAgICAgICAgRGVzY3JpcHRpb24KICogMjAyMjEwMDEJICBWSURWRU4gICAgICAgIENyZWF0ZSBzdWIgbG90IGZvciBhbiBFeGlzdGluZyBMb3QKICoqLwoKcHVibGljIGNsYXNzIENydFN1YkxvdCBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gewogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkKICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyCgogIC8vSW5wdXQgZmllbGRzCiAgcHJpdmF0ZSBTdHJpbmcgaUNPTk8KICBwcml2YXRlIFN0cmluZyBpSVROTwogIHByaXZhdGUgU3RyaW5nIGlCQU5PCgogIHB1YmxpYyBDcnRTdWJMb3QoTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBNSUNhbGxlckFQSSBtaUNhbGxlciwgUHJvZ3JhbUFQSSBwcm9ncmFtKSB7CiAgICB0aGlzLm1pID0gbWkKICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQogICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyCiAgfQoKICAvKioKICAgKiBNYWluIG1ldGhvZAogICAqIEBwYXJhbQogICAqIEByZXR1cm4KICAgKi8KICBwdWJsaWMgdm9pZCBtYWluKCkgewoKICAgIGlDT05PID0gbWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKSA9PSAiIiB8fCBtaS5pbkRhdGEuZ2V0KCJDT05PIikudHJpbSgpID09ICI/IiA/IHByb2dyYW0uTERBWkQuQ09OTy50b1N0cmluZygpIDogbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKQogICAgaUlUTk8gPSBtaS5pbkRhdGEuZ2V0KCJJVE5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJJVE5PIikudHJpbSgpID09ICI/IiA/ICIiIDogbWkuaW5EYXRhLmdldCgiSVROTyIpLnRyaW0oKQogICAgaUJBTk8gPSBtaS5pbkRhdGEuZ2V0KCJCQU5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJCQU5PIikudHJpbSgpID09ICI/IiA/ICIiIDogbWkuaW5EYXRhLmdldCgiQkFOTyIpLnRyaW0oKQoKICAgIGJvb2xlYW4gY2hlY2tJdGVtID0gdmFsaWRhdGVJdGVtKGlDT05PLnRvSW50ZWdlcigpLCBpSVROTykKICAgIGlmIChjaGVja0l0ZW0pIHsKICAgICAgYm9vbGVhbiBjaGVja0l0ZW1Mb3QgPSB2YWxpZGF0ZUl0ZW1Mb3QoaUNPTk8udG9JbnRlZ2VyKCksIGlJVE5PLCBpQkFOTykKICAgICAgaWYgKGNoZWNrSXRlbUxvdCkgewogICAgICAgIFN0cmluZyBuZXdCQU5PID0gR2V0TmV4dFN1YkxvdE51bWJlcihpQ09OTywgaUJBTk8sIGlJVE5PKQogICAgICAgIGNyZWF0ZVN1YkxvdChpQ09OTy50b0ludGVnZXIoKSwgaUlUTk8sIG5ld0JBTk8pCiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIFZhbGlkYXRlIGl0ZW0gbnVtYmVyCiAgICogQHBhcmFtIGludENPTk8KICAgKiBAcGFyYW0gaW5JVE5PCiAgICogQHJldHVybiB0cnVlIGlmIGl0ZW0gbnVtYmVyIGlzIHZhbGlkCiAgICovCiAgcHJpdmF0ZSBib29sZWFuIHZhbGlkYXRlSXRlbShpbnQgaW50Q09OTywgU3RyaW5nIGluSVROTykgewogICAgREJBY3Rpb24gZGJNSVRNQVMgPSBkYXRhYmFzZS50YWJsZSgiTUlUTUFTIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNTUNPTk8iLCAiTU1JVE5PIikuYnVpbGQoKQogICAgREJDb250YWluZXIgTUlUTUFTID0gZGJNSVRNQVMuZ2V0Q29udGFpbmVyKCkKICAgIE1JVE1BUy5zZXQoIk1NQ09OTyIsIGludENPTk8pCiAgICBNSVRNQVMuc2V0KCJNTUlUTk8iLCBpbklUTk8pCiAgICBpZiAoIWRiTUlUTUFTLnJlYWQoTUlUTUFTKSkgewogICAgICBtaS5lcnJvcigiSXRlbSBkb2VzIG5vdCBleGlzdCIpCiAgICAgIHJldHVybiBmYWxzZQogICAgfQogICAgcmV0dXJuIHRydWUKICB9CgogIC8qKgogICAqICBWYWxpZGF0ZSBpdGVtL2xvdAogICAqIEBwYXJhbSBpbkNPTk8KICAgKiBAcGFyYW0gaW5JVE5PCiAgICogQHBhcmFtIGluQkFOTwogICAqIEByZXR1cm4gdHJ1ZSBpZiBpdGVtL2xvdCBpcyB2YWxpZAogICAqLwogIHByaXZhdGUgYm9vbGVhbiB2YWxpZGF0ZUl0ZW1Mb3QoaW50IGluQ09OTywgU3RyaW5nIGluSVROTywgU3RyaW5nIGluQkFOTykgewogICAgREJBY3Rpb24gZGJNSUxPTUEgPSBkYXRhYmFzZS50YWJsZSgiTUlMT01BIikuaW5kZXgoIjAwIikuc2VsZWN0QWxsRmllbGRzKCkuYnVpbGQoKQogICAgREJDb250YWluZXIgTUlMT01BID0gZGJNSUxPTUEuZ2V0Q29udGFpbmVyKCkKICAgIE1JTE9NQS5zZXQoIkxNQ09OTyIsIGluQ09OTykKICAgIE1JTE9NQS5zZXQoIkxNSVROTyIsIGluSVROTykKICAgIE1JTE9NQS5zZXQoIkxNQkFOTyIsIGluQkFOTy50cmltKCkpCiAgICBpZiAoIWRiTUlMT01BLnJlYWQoTUlMT01BKSkgewogICAgICBtaS5lcnJvcigiSXRlbS9Mb3QgcmVjb3JkIGRvZXMgbm90IGV4aXN0IikKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9CiAgICByZXR1cm4gdHJ1ZQogIH0KCiAgLyoqCiAgICogR2V0IHRoZSBuZXh0IHN1YmxvdCBudW1iZXIgZm9yIHRoZSBvcmlnaW5hbCBsb3QKICAgKiBAcGFyYW0gaW5DT05PCiAgICogQHBhcmFtIGluQkFOTwogICAqIEBwYXJhbSBpbklUTk8KICAgKiBAcmV0dXJuIHN1Yi1sb3QgTnVtYmVyCiAgICovCiAgcHVibGljIFN0cmluZyBHZXROZXh0U3ViTG90TnVtYmVyKFN0cmluZyBpbkNPTk8sIFN0cmluZyBpbkJBTk8sIFN0cmluZyBpbklUTk8pIHsKICAgIFN0cmluZyBPcmlnaW5hbEJBTk8gPSAiIgoKICAgIGlmIChpbkJBTk8uY29udGFpbnMoInwiKSkgewogICAgICBpbnQgaW5kZXggPSBpbkJBTk8ubGFzdEluZGV4T2YoInwiKQogICAgICBPcmlnaW5hbEJBTk8gPSBpbkJBTk8uc3Vic3RyaW5nKDAsIGluZGV4KQogICAgfSBlbHNlIHsKICAgICAgT3JpZ2luYWxCQU5PID0gaW5CQU5PCiAgICB9CiAgICBEQkFjdGlvbiBhY3Rpb25NSUxPTUEgPSBkYXRhYmFzZS50YWJsZSgiTUlMT01BIikuaW5kZXgoIjAwIikuc2VsZWN0QWxsRmllbGRzKCkuYnVpbGQoKQogICAgREJDb250YWluZXIgY29udGFpbmVyTUlMT01BID0gYWN0aW9uTUlMT01BLmdldENvbnRhaW5lcigpCiAgICBjb250YWluZXJNSUxPTUEuc2V0KCJMTUNPTk8iLCBpQ09OTy50b0ludGVnZXIoKSkKICAgIGNvbnRhaW5lck1JTE9NQS5zZXQoIkxNSVROTyIsIGluSVROTykKICAgIGludCBzdWZmaXggPSAwCgogICAgQ2xvc3VyZTw/PiByZWFkQWxsUmVjb3JkTUlMT01BID0geyBEQkNvbnRhaW5lciByZXN1bHRDb250YWluZXIgLT4KICAgICAgU3RyaW5nIEJBTk8gPSByZXN1bHRDb250YWluZXIuZ2V0U3RyaW5nKCJMTUJBTk8iKQogICAgICBpZiAoQkFOTy5jb250YWlucygifCIpKSB7CiAgICAgICAgU3RyaW5nIExvdCA9IEJBTk8uc3Vic3RyaW5nKDAsIEJBTk8ubGFzdEluZGV4T2YoInwiKSkKICAgICAgICBTdHJpbmcgc3ViTG90ID0gQkFOTy5zdWJzdHJpbmcoQkFOTy5sYXN0SW5kZXhPZigifCIpICsgMSkKCiAgICAgICAgaWYgKExvdC50cmltKCkgPT0gT3JpZ2luYWxCQU5PKSB7CiAgICAgICAgICBzdWZmaXggPSBzdWJMb3QudG9JbnRlZ2VyKCkgPiBzdWZmaXggPyBzdWJMb3QudG9JbnRlZ2VyKCkgOiBzdWZmaXgKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmICghYWN0aW9uTUlMT01BLnJlYWRBbGwoY29udGFpbmVyTUlMT01BLCAyLCByZWFkQWxsUmVjb3JkTUlMT01BKSkgewogICAgICBtaS5lcnJvcigiSXRlbS9Mb3QgcmVjb3JkIGRvZXMgbm90IGV4aXN0IikKICAgIH0gZWxzZSB7CiAgICAgIC8vCiAgICB9CiAgICByZXR1cm4gT3JpZ2luYWxCQU5PICsgInwiICsgU3RyaW5nLmZvcm1hdCgiJTAzZCIsIChzdWZmaXggKyAxKSkKICB9CgogIC8qKgogICAqIENyZWF0ZSBzdWJMb3QgLSBDYWxscyBNTVMyMzVNSS5BZGRJdG1Mb3QKICAgKiBAcGFyYW0gaW5DT05PCiAgICogQHBhcmFtIGluSVROTwogICAqIEBwYXJhbSBpbkJBTk8KICAgKiBAcmV0dXJuCiAgICovCiAgcHJpdmF0ZSBjcmVhdGVTdWJMb3QoaW50IGluQ09OTywgU3RyaW5nIGluSVROTywgU3RyaW5nIGluQkFOTykgewogICAgTWFwPFN0cmluZywgU3RyaW5nPiBwYXJhbXMgPSBbIkNPTk8iOiBpbkNPTk8udG9TdHJpbmcoKS50cmltKCksICJJVE5PIjogaW5JVE5PLnRvU3RyaW5nKCkudHJpbSgpLCAiQkFOTyI6IGluQkFOTy50b1N0cmluZygpLnRyaW0oKV0KICAgIENsb3N1cmU8Pz4gaGFuZGxlciA9IHsgTWFwPFN0cmluZywKICAgICAgU3RyaW5nPiByZXNwb25zZSAtPgogICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHsKICAgICAgICBtaS5lcnJvcihyZXNwb25zZS5lcnJvck1lc3NhZ2UudG9TdHJpbmcoKSkKICAgICAgICByZXR1cm4KICAgICAgfSBlbHNlIHsKICAgICAgICBtaS5vdXREYXRhLnB1dCgiU0JBTiIsIGluQkFOTykKICAgICAgICBtaS53cml0ZSgpCiAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzIzNU1JIiwgIkFkZEl0bUxvdCIsIHBhcmFtcywgaGFuZGxlcikKICB9Cn0K"}}}
